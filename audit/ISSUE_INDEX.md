## ISSUE INDEX (Draft)

Note: IDs reserved for issues detected in Phases 1–4. Each issue includes repro and acceptance criteria. Live evidence to be added after Phase 3/4.

### ISSUE-001
- Severity: High
- Area: Build/Tooling
- Route/Feature: Frontend build/typecheck
- Files/Lines: `client/src/lib/generated-sdk/core/CancelablePromise.ts` (~L1–60)
- Symptom: TypeScript error TS18028 (private identifiers require ES2015 target)
- Repro Steps:
  1) `npm run check`
  2) Observe `TS18028` in typecheck log
- Observed vs Expected: Typecheck fails vs should pass
- Network Evidence: N/A
- Data Source: Live OK (not applicable)
- Likely Root Cause:
  - Client tsconfig target < ES2015 while generated SDK uses private fields
- Suggested Fix (Sketch only):
  - Raise client TS target/lib to ES2015+ or adjust generated SDK config
- Acceptance Criteria:
  - `npm run check` passes with 0 errors
- Test Stub Path: `/audit/tests/unit/ISSUE-001.test.ts`
- Dependencies/Risks: None
- Notes: Generated by OpenAPI SDK
Status: RESOLVED — split `check` into server/client, exclude generated SDK from root, both checks pass.

### ISSUE-002
- Severity: Medium
- Area: Build/Tooling
- Route/Feature: ESLint client
- Files/Lines: `client/package.json` (lint script), `eslint.config.js`
- Symptom: ESLint CLI flag `--ext` invalid with flat config
- Repro Steps:
  1) `cd client && npm run lint`
  2) Observe CLI error in log
- Observed vs Expected: Lint fails to run vs should run
- Network Evidence: N/A
- Data Source: N/A
- Likely Root Cause:
  - Using old CLI flags with flat-config ESLint
- Suggested Fix (Sketch only):
  - Update lint script to `eslint .` with proper file globs via config
- Acceptance Criteria:
  - `npm run -s lint` exits 0
- Test Stub Path: `/audit/tests/unit/ISSUE-002.test.ts`
- Dependencies/Risks: None
- Notes: Flat-config requires different invocation
Status: PARTIALLY RESOLVED — lint command runs; code-level lint errors remain for separate issues.

### ISSUE-003
- Severity: Low
- Area: Build/Tooling
- Route/Feature: Vite env handling
- Files/Lines: `client/.env*` (none present), `audit/logs/build-client.log`
- Symptom: Warning: NODE_ENV in .env not supported by Vite
- Repro Steps: `cd client && npm run build`
- Observed vs Expected: Warning emitted vs silent build
- Network Evidence: N/A
- Data Source: N/A
- Likely Root Cause: NODE_ENV set in .env file if present or injected
- Suggested Fix (Sketch only): Avoid NODE_ENV in .env; set in vite config if needed
- Acceptance Criteria: Build emits no NODE_ENV warning
- Test Stub Path: `/audit/tests/unit/ISSUE-003.test.ts`
- Dependencies/Risks: None
- Notes: Non-blocking

### ISSUE-004
- Severity: Medium
- Area: Backend/API
- Route/Feature: Rate limiting
- Files/Lines: `server/middleware/rateLimit.ts` (if present), `server/index.ts` rate-limit setup
- Symptom: Live verification indicates rate limiting may not be working
- Repro Steps:
  1) Run `scripts/verify-deployment.sh`
  2) Observe no rate limit triggered after multiple POST /api/auth/login
- Observed vs Expected: No 429 vs expected throttling
- Network Evidence: `audit/logs/verify-deployment.log`
- Data Source: Live failing
- Likely Root Cause:
  - Trust proxy/IP keying mismatch or IPv6 handling causing single bucket
- Suggested Fix (Sketch only):
  - Ensure rateLimit keyGenerator handles IPv6/X-Forwarded-For and trust proxy is set
- Acceptance Criteria:
  - Burst login attempts produce 429 within configured window
- Test Stub Path: `/audit/tests/e2e/ISSUE-004.spec.ts`
- Dependencies/Risks: Proxy/CDN behavior
- Notes: Non-blocking but security-related

### ISSUE-005
- Severity: Medium
- Area: Backend/API
- Route/Feature: CORS headers for client domain
- Files/Lines: `server/index.ts` CORS setup
- Symptom: CORS headers may be missing for `Origin: https://civicos.ca`
- Repro Steps:
  1) Run `scripts/verify-deployment.sh`
  2) Check CORS probe section
- Observed vs Expected: Missing header vs `Access-Control-Allow-Origin: https://civicos.ca`
- Network Evidence: `audit/logs/verify-deployment.log`
- Data Source: Live failing
- Likely Root Cause:
  - CORS_ORIGIN env mismatch or header not added to /health path
- Suggested Fix (Sketch only):
  - Align CORS allowed origins and ensure health and API routes include headers
- Acceptance Criteria:
  - CORS probe shows ACAO header for civicos.ca
- Test Stub Path: `/audit/tests/e2e/ISSUE-005.spec.ts`
- Dependencies/Risks: Proxy caching of headers
- Notes: Medium impact


