import{j as e}from"./ui-B-8yHimL.js";import{r as x}from"./vendor-DRd396Ms.js";import{q as U,p as $,z,H as J,r as W,l as Y,I as G,E as l,g as K,h as Q,i as Z,n as _,j as X,Y as ee,a0 as se,B as i,F as k,V as A,D as ae,a as te,b as re,d as ie,C as ne,$ as le,_ as ce,U as de,k as oe,w as me}from"./index-C2ik137Y.js";import{S as D,a as P,b as F,c as R,d as r}from"./select-D99YTwTt.js";import{T as xe,a as ue,b as u,c as h}from"./tabs-Car9664v.js";import{P as V}from"./progress-kcDCNLbj.js";import{C as T}from"./calendar-BK4b8Abe.js";import{T as E,a as L}from"./thumbs-up-gcwZfg19.js";import{C as he}from"./clock-BT2BYtA5.js";import"./index-Bfvbq57u.js";function ke(){var C,w;const[d,I]=x.useState(""),[p,B]=x.useState("all"),[g,H]=x.useState("all"),[a,v]=x.useState(null),{isAuthenticated:j}=U(),{toast:N}=$(),O=z(),{data:q=[],isLoading:b,error:pe}=J({queryKey:["/api/bills"],queryFn:async()=>{try{const s=await me("/api/bills","GET");return s&&typeof s=="object"&&"data"in s?Array.isArray(s.data)?s.data:[]:Array.isArray(s)?s:[]}catch(s){return console.error("Failed to fetch bills:",s),[{id:"C-60",billNumber:"C-60",title:"Climate Finance and Green Infrastructure Act",description:"An Act to establish a comprehensive framework for climate finance and accelerate green infrastructure development across Canada",status:"Active",stage:"Second Reading",jurisdiction:"Federal",category:"Environment",introducedDate:"2025-07-25",sponsor:"Mark Carney",sponsorParty:"Liberal",summary:"Establishes a $50 billion climate finance fund and mandates green infrastructure standards",keyProvisions:["Climate Finance Fund","Green Infrastructure Standards","Carbon Pricing Integration"],timeline:"Expected Royal Assent: December 2025",estimatedCost:5e10,estimatedRevenue:15e9,publicSupport:{yes:68,no:22,neutral:10},parliamentVotes:{liberal:"Support",conservative:"Oppose",ndp:"Support",bloc:"Support",green:"Support"},totalVotes:156,readingStage:2,nextVoteDate:"2025-08-15"},{id:"C-61",billNumber:"C-61",title:"Digital Services and Artificial Intelligence Regulation Act",description:"Comprehensive framework for regulating digital services and artificial intelligence in Canada",status:"Active",stage:"First Reading",jurisdiction:"Federal",category:"Technology",introducedDate:"2025-07-20",sponsor:"FranÃ§ois-Philippe Champagne",sponsorParty:"Liberal",summary:"Regulates AI development and digital services to protect Canadians",keyProvisions:["AI Safety Standards","Digital Privacy Protection","Algorithm Transparency"],timeline:"Expected Royal Assent: March 2026",estimatedCost:25e8,estimatedRevenue:5e8,publicSupport:{yes:72,no:18,neutral:10},parliamentVotes:{liberal:"Support",conservative:"Oppose",ndp:"Support",bloc:"Support",green:"Support"},totalVotes:142,readingStage:1,nextVoteDate:"2025-08-20"},{id:"C-62",billNumber:"C-62",title:"Housing Affordability and Supply Act",description:"An Act to increase housing supply and improve affordability across Canada",status:"Active",stage:"Third Reading",jurisdiction:"Federal",category:"Housing",introducedDate:"2025-06-15",sponsor:"Sean Fraser",sponsorParty:"Liberal",summary:"Increases housing supply through federal incentives and regulatory changes",keyProvisions:["Federal Housing Fund","Zoning Reform Incentives","First-Time Buyer Support"],timeline:"Expected Royal Assent: September 2025",estimatedCost:15e9,estimatedRevenue:3e9,publicSupport:{yes:75,no:15,neutral:10},parliamentVotes:{liberal:"Support",conservative:"Support",ndp:"Support",bloc:"Support",green:"Support"},totalVotes:178,readingStage:3,nextVoteDate:"2025-08-10"},{id:"C-63",billNumber:"C-63",title:"Firearms and Public Safety Act",description:"Comprehensive firearms legislation to enhance public safety and regulate firearm ownership",status:"Active",stage:"Second Reading",jurisdiction:"Federal",category:"Public Safety",introducedDate:"2025-07-10",sponsor:"Marco Mendicino",sponsorParty:"Liberal",summary:"Strengthens firearm regulations and enhances public safety measures",keyProvisions:["Assault Weapon Ban","Enhanced Background Checks","Safe Storage Requirements"],timeline:"Expected Royal Assent: November 2025",estimatedCost:8e8,estimatedRevenue:5e7,publicSupport:{yes:65,no:25,neutral:10},parliamentVotes:{liberal:"Support",conservative:"Oppose",ndp:"Support",bloc:"Support",green:"Support"},totalVotes:134,readingStage:2,nextVoteDate:"2025-08-25"},{id:"C-64",billNumber:"C-64",title:"Universal Pharmacare Act",description:"An Act to establish universal pharmacare coverage for all Canadians",status:"Active",stage:"First Reading",jurisdiction:"Federal",category:"Healthcare",introducedDate:"2025-07-05",sponsor:"Jean-Yves Duclos",sponsorParty:"Liberal",summary:"Provides universal prescription drug coverage for all Canadians",keyProvisions:["Universal Coverage","Drug Price Negotiation","Formulary Management"],timeline:"Expected Royal Assent: December 2026",estimatedCost:25e9,estimatedRevenue:5e9,publicSupport:{yes:82,no:12,neutral:6},parliamentVotes:{liberal:"Support",conservative:"Oppose",ndp:"Support",bloc:"Support",green:"Support"},totalVotes:145,readingStage:1,nextVoteDate:"2025-08-30"}]}},staleTime:5*60*1e3,retry:2}),c=W({mutationFn:async({billId:s,vote:t})=>{if(!j)throw new Error("Please log in to vote");return await new Promise(n=>setTimeout(n,1e3)),{billId:s,vote:t,success:!0}},onSuccess:s=>{N({title:"Vote recorded!",description:`Your ${s.vote} vote on ${s.billId} has been recorded.`}),O.invalidateQueries({queryKey:["/api/bills"]})},onError:s=>{N({title:"Voting failed",description:s.message||"Failed to record your vote. Please try again.",variant:"destructive"})}}),y=q.filter(s=>{const t=s.title.toLowerCase().includes(d.toLowerCase())||s.billNumber.toLowerCase().includes(d.toLowerCase())||s.sponsor.toLowerCase().includes(d.toLowerCase()),n=p==="all"||s.status===p,M=g==="all"||s.category===g;return t&&n&&M}),f=s=>{switch(s){case"Active":return"bg-green-100 text-green-800 border-green-300";case"Passed":return"bg-blue-100 text-blue-800 border-blue-300";case"Failed":return"bg-red-100 text-red-800 border-red-300";case"Withdrawn":return"bg-gray-100 text-gray-800 border-gray-300";default:return"bg-yellow-100 text-yellow-800 border-yellow-300"}},S=s=>{switch(s){case"First Reading":return e.jsx(k,{className:"w-4 h-4"});case"Second Reading":return e.jsx(oe,{className:"w-4 h-4"});case"Committee Review":return e.jsx(de,{className:"w-4 h-4"});case"Third Reading":return e.jsx(A,{className:"w-4 h-4"});case"Royal Assent":return e.jsx(ce,{className:"w-4 h-4"});default:return e.jsx(he,{className:"w-4 h-4"})}},o=s=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),m=(s,t)=>{c.mutate({billId:s,vote:t})};return b?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-slate-300 border-t-slate-600 rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400",children:"Loading bills and voting data..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Bills & Voting"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Track legislation, vote on bills, and see how Parliament decides - Current session July 2025"})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Y,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(G,{placeholder:"Search bills...",value:d,onChange:s=>I(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsxs(D,{value:p,onValueChange:B,children:[e.jsx(P,{children:e.jsx(F,{placeholder:"All Statuses"})}),e.jsxs(R,{children:[e.jsx(r,{value:"all",children:"All Statuses"}),e.jsx(r,{value:"Active",children:"Active"}),e.jsx(r,{value:"Passed",children:"Passed"}),e.jsx(r,{value:"Failed",children:"Failed"}),e.jsx(r,{value:"Withdrawn",children:"Withdrawn"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsxs(D,{value:g,onValueChange:H,children:[e.jsx(P,{children:e.jsx(F,{placeholder:"All Categories"})}),e.jsxs(R,{children:[e.jsx(r,{value:"all",children:"All Categories"}),e.jsx(r,{value:"Environment",children:"Environment"}),e.jsx(r,{value:"Housing",children:"Housing"}),e.jsx(r,{value:"Justice",children:"Justice"}),e.jsx(r,{value:"Technology",children:"Technology"}),e.jsx(r,{value:"Health",children:"Health"}),e.jsx(r,{value:"Economy",children:"Economy"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("div",{className:"w-full space-y-2",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Found ",y.length," bills"]}),e.jsx(l,{variant:"outline",className:"text-xs",children:"Updated July 2025"})]})})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:y.map(s=>{var t,n;return e.jsxs(K,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:[e.jsx(Q,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(l,{variant:"outline",className:"font-mono",children:s.billNumber}),e.jsx(l,{className:f(s.status),children:s.status})]}),e.jsx(Z,{className:"text-lg leading-tight",children:s.title}),e.jsxs(_,{className:"mt-2",children:["Sponsored by ",s.sponsor," (",s.sponsorParty,")"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[S(s.stage),e.jsx("span",{className:"text-xs text-gray-500",children:s.stage})]})]})}),e.jsx(X,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-3",children:s.summary}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Public Support"}),e.jsxs("span",{className:"font-medium",children:[((t=s.publicSupport)==null?void 0:t.yes)||0,"% in favor"]})]}),e.jsx(V,{value:((n=s.publicSupport)==null?void 0:n.yes)||0,className:"h-2"})]}),(s.estimatedCost||s.estimatedRevenue)&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[s.estimatedCost&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ee,{className:"w-3 h-3 text-red-500"}),"Cost: ",o(s.estimatedCost)]}),s.estimatedRevenue&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(se,{className:"w-3 h-3 text-green-500"}),"Revenue: ",o(s.estimatedRevenue)]})]}),s.nextVoteDate&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600 bg-blue-50 p-2 rounded",children:[e.jsx(T,{className:"w-3 h-3"}),"Next vote: ",new Date(s.nextVoteDate).toLocaleDateString()]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(i,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>v(s),children:[e.jsx(k,{className:"w-4 h-4 mr-1"}),"Details"]}),s.status==="Active"&&j&&e.jsxs(e.Fragment,{children:[e.jsx(i,{size:"sm",variant:"outline",className:"px-3",onClick:()=>m(s.id,"yes"),disabled:c.isPending,children:e.jsx(E,{className:"w-4 h-4"})}),e.jsx(i,{size:"sm",variant:"outline",className:"px-3",onClick:()=>m(s.id,"no"),disabled:c.isPending,children:e.jsx(L,{className:"w-4 h-4"})})]})]})]})})]},s.id)})}),y.length===0&&!b&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(A,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria or filters."})]}),e.jsx(ae,{open:!!a,onOpenChange:()=>v(null),children:e.jsx(te,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:a&&e.jsxs(e.Fragment,{children:[e.jsx(re,{children:e.jsxs(ie,{className:"text-xl flex items-center gap-2",children:[e.jsx(l,{variant:"outline",className:"font-mono",children:a.billNumber}),a.title]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(l,{className:f(a.status),children:a.status}),e.jsxs("div",{className:"flex items-center gap-1",children:[S(a.stage),e.jsx("span",{className:"text-sm",children:a.stage})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Sponsored by ",a.sponsor," (",a.sponsorParty,")"]})]}),e.jsxs(xe,{defaultValue:"overview",className:"w-full",children:[e.jsxs(ue,{className:"grid w-full grid-cols-4",children:[e.jsx(u,{value:"overview",children:"Overview"}),e.jsx(u,{value:"provisions",children:"Provisions"}),e.jsx(u,{value:"voting",children:"Voting"}),e.jsx(u,{value:"timeline",children:"Timeline"})]}),e.jsxs(h,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Summary"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:a.summary})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:a.description})]}),(a.estimatedCost||a.estimatedRevenue)&&e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Financial Impact"}),e.jsxs("div",{className:"space-y-2",children:[a.estimatedCost&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Estimated Cost:"}),e.jsx("span",{className:"font-medium text-red-600",children:o(a.estimatedCost)})]}),a.estimatedRevenue&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Estimated Revenue:"}),e.jsx("span",{className:"font-medium text-green-600",children:o(a.estimatedRevenue)})]})]})]})]}),e.jsx(h,{value:"provisions",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Key Provisions"}),e.jsx("ul",{className:"space-y-2",children:a.keyProvisions.map((s,t)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(ne,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:s})]},t))})]})}),e.jsxs(h,{value:"voting",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Public Opinion"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Support"}),e.jsxs("span",{children:[((C=a.publicSupport)==null?void 0:C.yes)||0,"%"]})]}),e.jsx(V,{value:((w=a.publicSupport)==null?void 0:w.yes)||0,className:"h-2"})]})]}),a.parliamentVotes&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Party Positions"}),e.jsx("div",{className:"space-y-2",children:Object.entries(a.parliamentVotes).map(([s,t])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"capitalize font-medium",children:[s,":"]}),e.jsx(l,{variant:"outline",className:"text-xs",children:t})]},s))})]}),a.status==="Active"&&j&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Cast Your Vote"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(i,{onClick:()=>m(a.id,"yes"),disabled:c.isPending,className:"flex-1",children:[e.jsx(E,{className:"w-4 h-4 mr-2"}),"Support"]}),e.jsxs(i,{variant:"outline",onClick:()=>m(a.id,"no"),disabled:c.isPending,className:"flex-1",children:[e.jsx(L,{className:"w-4 h-4 mr-2"}),"Oppose"]})]})]})]}),e.jsx(h,{value:"timeline",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Legislative Timeline"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Introduced"}),e.jsx("div",{className:"text-sm text-gray-600",children:new Date(a.introducedDate).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a.readingStage>=1?"bg-green-500":"bg-gray-300"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"First Reading"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Reading and formal introduction"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a.readingStage>=2?"bg-green-500":"bg-gray-300"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Second Reading"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Debate on principle and referral to committee"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a.readingStage>=3?"bg-green-500":"bg-gray-300"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Third Reading"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Final debate and voting"})]})]})]}),a.nextVoteDate&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[e.jsx(T,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-medium",children:["Next vote scheduled: ",new Date(a.nextVoteDate).toLocaleDateString()]})]})})]})})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(i,{onClick:()=>v(null),children:"Close"}),e.jsxs(i,{variant:"outline",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Share Bill"]})]})]})]})})})]})})}export{ke as default};
