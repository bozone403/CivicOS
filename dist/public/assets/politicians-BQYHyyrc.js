import{j as e}from"./ui-B-8yHimL.js";import{r as i}from"./vendor-DRd396Ms.js";import{H as B,B as n,l as D,I as q,E as l,g as z,h as G,i as H,n as M,j as O,M as U,V as $,Y as J,s as f,U as p,_ as K,w as Y}from"./index-BKXUXPM2.js";import{S as N,a as y,b,c as w,d}from"./select-CCpPD-Lk.js";import{T as _,a as Q,b as o,c as x}from"./tabs-B1MZovWF.js";import{P as W}from"./phone-DHuQfhZM.js";import{B as C}from"./building-2-C9t41caQ.js";import{E as X}from"./external-link-Da7h22Kz.js";import{G as Z}from"./globe-DoTJtTfh.js";import"./index-Bfvbq57u.js";function oe(){const[c,k]=i.useState(""),[m,S]=i.useState("all"),[h,T]=i.useState("all"),[a,v]=i.useState(null),{data:j=[],isLoading:u,error:I}=B({queryKey:["/api/politicians/comprehensive"],queryFn:async()=>{try{return await Y("/api/politicians/comprehensive","GET")}catch(s){return console.error("Failed to fetch politicians:",s),[]}},staleTime:10*60*1e3,retry:2}),L=Array.from(new Set(j.map(s=>s.party))).sort(),P=Array.from(new Set(j.map(s=>s.level))).sort(),g=j.filter(s=>{const r=s.name.toLowerCase().includes(c.toLowerCase())||s.riding.toLowerCase().includes(c.toLowerCase())||s.party.toLowerCase().includes(c.toLowerCase()),V=m==="all"||s.party===m,E=h==="all"||s.level===h;return r&&V&&E}),F=s=>{switch(s.toLowerCase()){case"liberal":return"bg-red-100 text-red-800 border-red-300";case"conservative":return"bg-blue-100 text-blue-800 border-blue-300";case"ndp":return"bg-orange-100 text-orange-800 border-orange-300";case"bloc québécois":return"bg-cyan-100 text-cyan-800 border-cyan-300";case"green":return"bg-green-100 text-green-800 border-green-300";case"progressive conservative":return"bg-purple-100 text-purple-800 border-purple-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},A=s=>{switch(s.toLowerCase()){case"federal":return e.jsx(K,{className:"w-4 h-4"});case"provincial":return e.jsx(C,{className:"w-4 h-4"});case"municipal":return e.jsx(Z,{className:"w-4 h-4"});default:return e.jsx(p,{className:"w-4 h-4"})}},R=s=>s>=80?"text-green-600":s>=60?"text-yellow-600":"text-red-600",t=s=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:0}).format(s);return u?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-slate-300 border-t-slate-600 rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400",children:"Loading politician data..."})]})})}):I?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-lg font-medium text-red-600",children:"Failed to load politician data"}),e.jsx(n,{onClick:()=>window.location.reload(),children:"Retry"})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Canadian Politicians"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Track your elected representatives across all levels of government - accurate as of July 2025"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(D,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(q,{placeholder:"Search by name, riding, or party...",value:c,onChange:s=>k(s.target.value),className:"pl-10"})]}),e.jsxs(N,{value:m,onValueChange:S,children:[e.jsx(y,{className:"w-full lg:w-48",children:e.jsx(b,{placeholder:"Filter by party"})}),e.jsxs(w,{children:[e.jsx(d,{value:"all",children:"All Parties"}),L.map(s=>e.jsx(d,{value:s,children:s},s))]})]}),e.jsxs(N,{value:h,onValueChange:T,children:[e.jsx(y,{className:"w-full lg:w-48",children:e.jsx(b,{placeholder:"Filter by level"})}),e.jsxs(w,{children:[e.jsx(d,{value:"all",children:"All Levels"}),P.map(s=>e.jsx(d,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsxs(l,{variant:"outline",className:"text-xs",children:[g.length," politicians found"]}),e.jsx(l,{variant:"outline",className:"text-xs",children:"Updated July 2025"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(s=>e.jsxs(z,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:[e.jsxs(G,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(H,{className:"text-lg",children:s.name}),e.jsx(M,{className:"text-sm mt-1",children:s.position})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[A(s.level),e.jsxs("span",{className:`text-sm font-medium ${R(s.trustScore)}`,children:[s.trustScore,"%"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsx(l,{className:F(s.party),children:s.party}),e.jsx(l,{variant:"outline",className:"text-xs",children:s.level})]})]}),e.jsx(O,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(U,{className:"w-4 h-4 mr-2"}),s.riding]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("strong",{children:"Recent:"})," ",s.recentActivity]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"w-3 h-3"}),s.votingRecord.yes+s.votingRecord.no+s.votingRecord.abstain," votes"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(J,{className:"w-3 h-3"}),t(s.expenses.total)," (",s.expenses.year,")"]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(n,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>v(s),children:"View Details"}),s.contactInfo.email&&e.jsx(n,{size:"sm",variant:"outline",className:"px-3",children:e.jsx(f,{className:"w-4 h-4"})})]})]})})]},s.id))}),g.length===0&&!u&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(p,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No politicians found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria or filters."})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:a.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:a.position})]}),e.jsx(n,{variant:"outline",onClick:()=>v(null),children:"Close"})]}),e.jsxs(_,{defaultValue:"overview",className:"w-full",children:[e.jsxs(Q,{className:"grid w-full grid-cols-4",children:[e.jsx(o,{value:"overview",children:"Overview"}),e.jsx(o,{value:"voting",children:"Voting"}),e.jsx(o,{value:"expenses",children:"Expenses"}),e.jsx(o,{value:"contact",children:"Contact"})]}),e.jsxs(x,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Biography"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:a.bio})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Key Achievements"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:a.keyAchievements.map((s,r)=>e.jsx("li",{className:"text-sm text-gray-600 dark:text-gray-300",children:s},r))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Policy Positions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.policyPositions.map((s,r)=>e.jsx(l,{variant:"outline",children:s},r))})]})]}),e.jsx(x,{value:"voting",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.votingRecord.yes}),e.jsx("div",{className:"text-sm text-gray-500",children:"Yes Votes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:a.votingRecord.no}),e.jsx("div",{className:"text-sm text-gray-500",children:"No Votes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:a.votingRecord.abstain}),e.jsx("div",{className:"text-sm text-gray-500",children:"Abstained"})]})]})}),e.jsx(x,{value:"expenses",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Travel"}),e.jsx("div",{className:"font-semibold",children:t(a.expenses.travel)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Hospitality"}),e.jsx("div",{className:"font-semibold",children:t(a.expenses.hospitality)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Office"}),e.jsx("div",{className:"font-semibold",children:t(a.expenses.office)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Total (",a.expenses.year,")"]}),e.jsx("div",{className:"font-semibold",children:t(a.expenses.total)})]})]})}),e.jsx(x,{value:"contact",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[a.contactInfo.email&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("a",{href:`mailto:${a.contactInfo.email}`,className:"text-blue-600 hover:underline",children:a.contactInfo.email})]}),a.contactInfo.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("a",{href:`tel:${a.contactInfo.phone}`,className:"text-blue-600 hover:underline",children:a.contactInfo.phone})]}),a.contactInfo.office&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(C,{className:"w-4 h-4 mt-1"}),e.jsx("div",{className:"text-sm",children:a.contactInfo.office})]}),a.contactInfo.website&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsx("a",{href:a.contactInfo.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Official Website"})]})]})})]})]})})})]})})}export{oe as default};
