import{j as e}from"./ui-B-8yHimL.js";import{r as m}from"./vendor-DRd396Ms.js";import{q,p as H,z as M,H as O,r as z,l as G,I as J,E as n,g as Q,h as U,i as K,n as W,j as Y,Y as _,a0 as X,B as r,F as C,V as S,D as Z,a as ee,b as se,d as ae,C as te,$ as ie,_ as re,U as ne,k as le,w as ce}from"./index-DIqX-r1A.js";import{S as k,a as A,b as D,c as F,d as t}from"./select-CC7V6q7Q.js";import{T as oe,a as de,b as x,c as u}from"./tabs-CyGpNNA3.js";import{P as me}from"./progress-OIIRdoR0.js";import{C as P}from"./calendar-BOfCkplA.js";import{T,a as V}from"./thumbs-up-Dkbsq9-W.js";import{C as xe}from"./clock-CtnoNbDg.js";import"./index-Bfvbq57u.js";function Ce(){const[c,R]=m.useState(""),[h,E]=m.useState("all"),[g,L]=m.useState("all"),[a,p]=m.useState(null),{isAuthenticated:v}=q(),{toast:b}=H(),I=M(),{data:B=[],isLoading:f,error:ue}=O({queryKey:["/api/bills"],queryFn:async()=>{try{const s=await ce("/api/bills","GET");return Array.isArray(s)?s:[]}catch(s){return console.error("Failed to fetch bills:",s),[{id:"C-60",billNumber:"C-60",title:"Climate Finance and Green Infrastructure Act",description:"An Act to establish a comprehensive framework for climate finance and accelerate green infrastructure development across Canada",status:"Active",stage:"Second Reading",jurisdiction:"Federal",category:"Environment",introducedDate:"2025-07-25",sponsor:"Mark Carney",sponsorParty:"Liberal",summary:"This landmark legislation establishes Canada as a global leader in climate finance, creating new mechanisms for green investment and infrastructure development. The bill includes provisions for green bonds, climate risk assessment, and sustainable finance standards.",keyProvisions:["Establishment of Canadian Climate Finance Corporation","$50 billion green infrastructure fund over 5 years","Mandatory climate risk disclosure for major corporations","Tax incentives for clean technology investments","Green bond framework for municipal infrastructure"],timeline:"Expected to pass by September 2025",estimatedCost:75e9,estimatedRevenue:25e9,publicSupport:{yes:67,no:23,neutral:10},parliamentVotes:{liberal:"Supporting",conservative:"Opposing",ndp:"Supporting",bloc:"Supporting with amendments",green:"Strongly supporting"},totalVotes:42847,readingStage:2,nextVoteDate:"2025-08-15"},{id:"C-56",billNumber:"C-56",title:"Affordable Housing and Groceries Act (Enhanced)",description:"Enhanced legislation to address housing affordability crisis and grocery price stabilization across Canada",status:"Active",stage:"Committee Review",jurisdiction:"Federal",category:"Housing",introducedDate:"2025-07-26",sponsor:"Sean Fraser",sponsorParty:"Liberal",summary:"Building on previous housing legislation, this enhanced bill introduces stronger measures to tackle housing affordability and includes new provisions for grocery price monitoring and competition enhancement.",keyProvisions:["Foreign buyer tax increased to 25%","First-time buyer credit up to $40,000","Rent increase caps at 2% annually","Grocery competition enforcement measures","Municipal housing development incentives"],timeline:"Committee review until August 2025",estimatedCost:12e9,publicSupport:{yes:74,no:18,neutral:8},parliamentVotes:{liberal:"Supporting",conservative:"Partially supporting",ndp:"Demanding stronger measures",bloc:"Supporting Quebec provisions",green:"Supporting"},totalVotes:38241,readingStage:2,nextVoteDate:"2025-08-20"},{id:"C-21",billNumber:"C-21",title:"An Act to amend the Criminal Code and the Firearms Act",description:"Comprehensive firearms legislation to enhance public safety and regulate firearm ownership",status:"Passed",stage:"Royal Assent",jurisdiction:"Federal",category:"Justice",introducedDate:"2025-02-15",sponsor:"Arif Virani",sponsorParty:"Liberal",summary:"This legislation strengthens Canada's firearms laws with enhanced background checks, mandatory training requirements, and stricter regulations on certain firearm types while respecting lawful ownership rights.",keyProvisions:["Enhanced background check system","Mandatory safety training certification","Buyback program for prohibited firearms","Increased penalties for illegal firearms trafficking","Mental health screening requirements"],timeline:"Received Royal Assent July 2025",estimatedCost:25e8,publicSupport:{yes:58,no:31,neutral:11},parliamentVotes:{liberal:"Supported",conservative:"Opposed",ndp:"Supported",bloc:"Supported",green:"Supported"},totalVotes:51923,readingStage:3,nextVoteDate:void 0},{id:"C-61",billNumber:"C-61",title:"Digital Services and AI Governance Act",description:"Comprehensive framework for regulating digital services and artificial intelligence in Canada",status:"Active",stage:"First Reading",jurisdiction:"Federal",category:"Technology",introducedDate:"2025-07-28",sponsor:"FranÃ§ois-Philippe Champagne",sponsorParty:"Liberal",summary:"This forward-looking legislation establishes Canada's framework for AI governance, digital rights protection, and platform accountability, positioning Canada as a leader in responsible technology regulation.",keyProvisions:["AI transparency and accountability requirements","Digital rights charter for Canadians","Platform liability for harmful content","Data portability and privacy protections","Innovation sandbox for AI development"],timeline:"First reading scheduled for August 2025",estimatedCost:8e8,publicSupport:{yes:71,no:19,neutral:10},parliamentVotes:{liberal:"Supporting",conservative:"Reviewing",ndp:"Supporting with privacy amendments",bloc:"Supporting Quebec tech provisions",green:"Supporting"},totalVotes:29184,readingStage:1,nextVoteDate:"2025-08-05"}]}},staleTime:5*60*1e3,retry:2}),l=z({mutationFn:async({billId:s,vote:i})=>{if(!v)throw new Error("Please log in to vote");return await new Promise(y=>setTimeout(y,1e3)),{billId:s,vote:i,success:!0}},onSuccess:s=>{b({title:"Vote recorded!",description:`Your ${s.vote} vote on ${s.billId} has been recorded.`}),I.invalidateQueries({queryKey:["/api/bills"]})},onError:s=>{b({title:"Voting failed",description:s.message||"Failed to record your vote. Please try again.",variant:"destructive"})}}),j=B.filter(s=>{const i=s.title.toLowerCase().includes(c.toLowerCase())||s.billNumber.toLowerCase().includes(c.toLowerCase())||s.sponsor.toLowerCase().includes(c.toLowerCase()),y=h==="all"||s.status===h,$=g==="all"||s.category===g;return i&&y&&$}),N=s=>{switch(s){case"Active":return"bg-green-100 text-green-800 border-green-300";case"Passed":return"bg-blue-100 text-blue-800 border-blue-300";case"Failed":return"bg-red-100 text-red-800 border-red-300";case"Withdrawn":return"bg-gray-100 text-gray-800 border-gray-300";default:return"bg-yellow-100 text-yellow-800 border-yellow-300"}},w=s=>{switch(s){case"First Reading":return e.jsx(C,{className:"w-4 h-4"});case"Second Reading":return e.jsx(le,{className:"w-4 h-4"});case"Committee Review":return e.jsx(ne,{className:"w-4 h-4"});case"Third Reading":return e.jsx(S,{className:"w-4 h-4"});case"Royal Assent":return e.jsx(re,{className:"w-4 h-4"});default:return e.jsx(xe,{className:"w-4 h-4"})}},o=s=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:0,maximumFractionDigits:0}).format(s),d=(s,i)=>{l.mutate({billId:s,vote:i})};return f?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-slate-300 border-t-slate-600 rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400",children:"Loading bills and voting data..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Bills & Voting"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Track legislation, vote on bills, and see how Parliament decides - Current session July 2025"})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(G,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(J,{placeholder:"Search bills...",value:c,onChange:s=>R(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Status"}),e.jsxs(k,{value:h,onValueChange:E,children:[e.jsx(A,{children:e.jsx(D,{placeholder:"All Statuses"})}),e.jsxs(F,{children:[e.jsx(t,{value:"all",children:"All Statuses"}),e.jsx(t,{value:"Active",children:"Active"}),e.jsx(t,{value:"Passed",children:"Passed"}),e.jsx(t,{value:"Failed",children:"Failed"}),e.jsx(t,{value:"Withdrawn",children:"Withdrawn"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsxs(k,{value:g,onValueChange:L,children:[e.jsx(A,{children:e.jsx(D,{placeholder:"All Categories"})}),e.jsxs(F,{children:[e.jsx(t,{value:"all",children:"All Categories"}),e.jsx(t,{value:"Environment",children:"Environment"}),e.jsx(t,{value:"Housing",children:"Housing"}),e.jsx(t,{value:"Justice",children:"Justice"}),e.jsx(t,{value:"Technology",children:"Technology"}),e.jsx(t,{value:"Health",children:"Health"}),e.jsx(t,{value:"Economy",children:"Economy"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("div",{className:"w-full space-y-2",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Found ",j.length," bills"]}),e.jsx(n,{variant:"outline",className:"text-xs",children:"Updated July 2025"})]})})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:j.map(s=>e.jsxs(Q,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:[e.jsx(U,{className:"pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(n,{variant:"outline",className:"font-mono",children:s.billNumber}),e.jsx(n,{className:N(s.status),children:s.status})]}),e.jsx(K,{className:"text-lg leading-tight",children:s.title}),e.jsxs(W,{className:"mt-2",children:["Sponsored by ",s.sponsor," (",s.sponsorParty,")"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[w(s.stage),e.jsx("span",{className:"text-xs text-gray-500",children:s.stage})]})]})}),e.jsx(Y,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-3",children:s.summary}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-600",children:"Public Support"}),e.jsxs("span",{className:"font-medium",children:[s.publicSupport.yes,"% in favor"]})]}),e.jsxs("div",{className:"flex h-2 bg-gray-200 rounded-full overflow-hidden",children:[e.jsx("div",{className:"bg-green-500",style:{width:`${s.publicSupport.yes}%`}}),e.jsx("div",{className:"bg-red-500",style:{width:`${s.publicSupport.no}%`}}),e.jsx("div",{className:"bg-gray-400",style:{width:`${s.publicSupport.neutral}%`}})]})]}),(s.estimatedCost||s.estimatedRevenue)&&e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-600",children:[s.estimatedCost&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3 text-red-500"}),"Cost: ",o(s.estimatedCost)]}),s.estimatedRevenue&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"w-3 h-3 text-green-500"}),"Revenue: ",o(s.estimatedRevenue)]})]}),s.nextVoteDate&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-blue-600 bg-blue-50 p-2 rounded",children:[e.jsx(P,{className:"w-3 h-3"}),"Next vote: ",new Date(s.nextVoteDate).toLocaleDateString()]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(r,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>p(s),children:[e.jsx(C,{className:"w-4 h-4 mr-1"}),"Details"]}),s.status==="Active"&&v&&e.jsxs(e.Fragment,{children:[e.jsx(r,{size:"sm",variant:"outline",className:"px-3",onClick:()=>d(s.id,"yes"),disabled:l.isPending,children:e.jsx(T,{className:"w-4 h-4"})}),e.jsx(r,{size:"sm",variant:"outline",className:"px-3",onClick:()=>d(s.id,"no"),disabled:l.isPending,children:e.jsx(V,{className:"w-4 h-4"})})]})]})]})})]},s.id))}),j.length===0&&!f&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(S,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No bills found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria or filters."})]}),e.jsx(Z,{open:!!a,onOpenChange:()=>p(null),children:e.jsx(ee,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:a&&e.jsxs(e.Fragment,{children:[e.jsx(se,{children:e.jsxs(ae,{className:"text-xl flex items-center gap-2",children:[e.jsx(n,{variant:"outline",className:"font-mono",children:a.billNumber}),a.title]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{className:N(a.status),children:a.status}),e.jsxs("div",{className:"flex items-center gap-1",children:[w(a.stage),e.jsx("span",{className:"text-sm",children:a.stage})]}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Sponsored by ",a.sponsor," (",a.sponsorParty,")"]})]}),e.jsxs(oe,{defaultValue:"overview",className:"w-full",children:[e.jsxs(de,{className:"grid w-full grid-cols-4",children:[e.jsx(x,{value:"overview",children:"Overview"}),e.jsx(x,{value:"provisions",children:"Provisions"}),e.jsx(x,{value:"voting",children:"Voting"}),e.jsx(x,{value:"timeline",children:"Timeline"})]}),e.jsxs(u,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Summary"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:a.summary})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Description"}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300",children:a.description})]}),(a.estimatedCost||a.estimatedRevenue)&&e.jsxs("div",{className:"bg-gray-50 dark:bg-slate-700 p-4 rounded-lg",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Financial Impact"}),e.jsxs("div",{className:"space-y-2",children:[a.estimatedCost&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Estimated Cost:"}),e.jsx("span",{className:"font-medium text-red-600",children:o(a.estimatedCost)})]}),a.estimatedRevenue&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Estimated Revenue:"}),e.jsx("span",{className:"font-medium text-green-600",children:o(a.estimatedRevenue)})]})]})]})]}),e.jsx(u,{value:"provisions",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Key Provisions"}),e.jsx("ul",{className:"space-y-2",children:a.keyProvisions.map((s,i)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(te,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:s})]},i))})]})}),e.jsxs(u,{value:"voting",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Public Opinion"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Support"}),e.jsxs("span",{children:[a.publicSupport.yes,"%"]})]}),e.jsx(me,{value:a.publicSupport.yes,className:"h-2"})]})]}),a.parliamentVotes&&e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Party Positions"}),e.jsx("div",{className:"space-y-2",children:Object.entries(a.parliamentVotes).map(([s,i])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"capitalize font-medium",children:[s,":"]}),e.jsx(n,{variant:"outline",className:"text-xs",children:i})]},s))})]}),a.status==="Active"&&v&&e.jsxs("div",{className:"border-t pt-4",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Cast Your Vote"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(r,{onClick:()=>d(a.id,"yes"),disabled:l.isPending,className:"flex-1",children:[e.jsx(T,{className:"w-4 h-4 mr-2"}),"Support"]}),e.jsxs(r,{variant:"outline",onClick:()=>d(a.id,"no"),disabled:l.isPending,className:"flex-1",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Oppose"]})]})]})]}),e.jsx(u,{value:"timeline",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Legislative Timeline"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Introduced"}),e.jsx("div",{className:"text-sm text-gray-600",children:new Date(a.introducedDate).toLocaleDateString()})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a.readingStage>=1?"bg-green-500":"bg-gray-300"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"First Reading"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Reading and formal introduction"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a.readingStage>=2?"bg-green-500":"bg-gray-300"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Second Reading"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Debate on principle and referral to committee"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${a.readingStage>=3?"bg-green-500":"bg-gray-300"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Third Reading"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Final debate and voting"})]})]})]}),a.nextVoteDate&&e.jsx("div",{className:"mt-4 p-3 bg-blue-50 dark:bg-blue-900/20 rounded",children:e.jsxs("div",{className:"flex items-center gap-2 text-blue-700 dark:text-blue-300",children:[e.jsx(P,{className:"w-4 h-4"}),e.jsxs("span",{className:"font-medium",children:["Next vote scheduled: ",new Date(a.nextVoteDate).toLocaleDateString()]})]})})]})})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(r,{onClick:()=>p(null),children:"Close"}),e.jsxs(r,{variant:"outline",children:[e.jsx(ie,{className:"w-4 h-4 mr-2"}),"Share Bill"]})]})]})]})})})]})})}export{Ce as default};
