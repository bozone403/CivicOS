import{j as e,v as De,w as $e,r as c,x as Pe,y as Ce,I as ke,z as Se,A as Te,E as Le,F as Fe,G as Re,L as Ae,H as Ee}from"./ui-D2Re0T6U.js";import{z as re,q as le,p as ie,E as ze,K as ne,r as B,y as A,H as b,B as x,a9 as Ie,J as Ve,R as he,W as pe,X as ge,Z as W,a1 as je,Y,s as qe,g as C,j as k,v,aa as _e,a3 as Be,ab as He,a2 as Je,k as be,F as fe,l as Ke,I as Qe,T as X,h as _,U as Ye,i as Z,M as Oe,a6 as Ge}from"./app-BYR0VHFY.js";import{T as We,a as Xe,b as ee,c as se}from"./tabs-XuL4YNg6.js";import{S as Ne,a as ve,b as ye,c as we,d as y}from"./select-DJnustoI.js";import{T as Ze,a as es}from"./thumbs-up-CKmFmAuZ.js";import{C as Me}from"./clock-CxvTlMxY.js";import{P as ss}from"./pen-CnIKEZRz.js";import{T as as}from"./trash-2-CBCij-Cu.js";import{C as ts}from"./circle-alert-BLneFVvO.js";import{C as rs}from"./calendar-B9vE9byU.js";import{E as ls}from"./external-link-kCoqHItM.js";import{B as is}from"./building-2-ClxZ_kCi.js";import"./vendor-BtP0CW_r.js";import"./index-B4pxPuSB.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=re("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ns=re("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=re("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);function os({targetType:t,targetId:r,className:i="",size:n="md",showCounts:p=!0}){const{user:S}=le(),{toast:o}=ie(),m=ze(),{data:d,isLoading:u}=ne({queryKey:[`/api/vote/${t}/${r}`],enabled:!!r}),g=B({mutationFn:async l=>await(await A("/api/vote","POST",{targetType:t,targetId:r,voteType:l})).json(),onSuccess:l=>{m.setQueryData([`/api/vote/${t}/${r}`],l),m.invalidateQueries({queryKey:[`/api/${t}s`]}),m.invalidateQueries({queryKey:["/api/forum/posts"]}),m.invalidateQueries({queryKey:["/api/politicians"]}),m.invalidateQueries({queryKey:["/api/bills"]})},onError:l=>{let j="Failed to register vote";if(l.message){if(l.message.includes("already voted")){o({title:"Already Voted",description:"You have already voted on this item. Each user can only vote once.",variant:"default"});return}const U=l.message.match(/400: (.+)/);if(U)try{j=JSON.parse(U[1]).message||j}catch{j=U[1]}else j=l.message}o({title:"Vote Failed",description:j,variant:"destructive"})}}),E=l=>{if(!S){o({title:"Login Required",description:"Please log in to vote",variant:"destructive"});return}g.mutate(l)},T=(d==null?void 0:d.upvotes)||0,L=(d==null?void 0:d.downvotes)||0,f=(d==null?void 0:d.totalScore)||0,w=d==null?void 0:d.userVote,z={sm:"h-7 w-7",md:"h-8 w-8",lg:"h-10 w-10"},M={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"};return e.jsxs("div",{className:b("flex items-center space-x-2",i),children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(x,{variant:w==="upvote"?"default":"outline",size:"sm",className:b(z[n],"p-0",w==="upvote"&&"bg-green-600 hover:bg-green-700 text-white"),onClick:()=>E("upvote"),disabled:g.isPending||u,children:e.jsx(Ze,{className:M[n]})}),p&&e.jsx("span",{className:"text-sm font-medium text-green-600 min-w-[20px] text-center",children:T})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(x,{variant:w==="downvote"?"default":"outline",size:"sm",className:b(z[n],"p-0",w==="downvote"&&"bg-red-600 hover:bg-red-700 text-white"),onClick:()=>E("downvote"),disabled:g.isPending||u,children:e.jsx(es,{className:M[n]})}),p&&e.jsx("span",{className:"text-sm font-medium text-red-600 min-w-[20px] text-center",children:L})]}),p&&e.jsxs("div",{className:"flex items-center space-x-1 ml-2 pl-2 border-l",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Score:"}),e.jsx("span",{className:b("text-sm font-bold",f>0&&"text-green-600",f<0&&"text-red-600",f===0&&"text-gray-500"),children:f>0?`+${f}`:f})]})]})}const ds=De,ms=$e,xs=c.forwardRef(({className:t,inset:r,children:i,...n},p)=>e.jsxs(Se,{ref:p,className:b("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...n,children:[i,e.jsx(Ie,{className:"ml-auto"})]}));xs.displayName=Se.displayName;const us=c.forwardRef(({className:t,...r},i)=>e.jsx(Te,{ref:i,className:b("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...r}));us.displayName=Te.displayName;const Ue=c.forwardRef(({className:t,sideOffset:r=4,...i},n)=>e.jsx(Pe,{children:e.jsx(Ce,{ref:n,sideOffset:r,className:b("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-white/95 backdrop-blur-md p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...i})}));Ue.displayName=Ce.displayName;const te=c.forwardRef(({className:t,inset:r,...i},n)=>e.jsx(ke,{ref:n,className:b("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",r&&"pl-8",t),...i}));te.displayName=ke.displayName;const hs=c.forwardRef(({className:t,children:r,checked:i,...n},p)=>e.jsxs(Le,{ref:p,className:b("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:i,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Fe,{children:e.jsx(Ve,{className:"h-4 w-4"})})}),r]}));hs.displayName=Le.displayName;const ps=c.forwardRef(({className:t,children:r,...i},n)=>e.jsxs(Re,{ref:n,className:b("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Fe,{children:e.jsx(ns,{className:"h-2 w-2 fill-current"})})}),r]}));ps.displayName=Re.displayName;const gs=c.forwardRef(({className:t,inset:r,...i},n)=>e.jsx(Ae,{ref:n,className:b("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t),...i}));gs.displayName=Ae.displayName;const js=c.forwardRef(({className:t,...r},i)=>e.jsx(Ee,{ref:i,className:b("-mx-1 my-1 h-px bg-muted",t),...r}));js.displayName=Ee.displayName;function bs({targetType:t,targetId:r,allowReplies:i=!0,allowEditing:n=!0,allowDeleting:p=!0,showUserAvatars:S=!0,maxDepth:o=3}){var ce,oe;const{user:m,isAuthenticated:d}=le(),{toast:u}=ie();ze();const[g,E]=c.useState(""),[T,L]=c.useState(null),[f,w]=c.useState(""),[z,M]=c.useState(null),[l,j]=c.useState(""),{data:U=[],isLoading:V,refetch:P}=ne({queryKey:[`/api/social/comments/${t}/${r}`],queryFn:async()=>{try{return await A(`/api/social/comments/${t}/${r}`,"GET")||[]}catch(a){return console.error("Failed to fetch comments:",a),[]}},staleTime:300*1e3}),D=B({mutationFn:async a=>await A("/api/social/comments","POST",{content:a,targetType:t,targetId:r,parentCommentId:z||void 0}),onSuccess:()=>{E(""),M(null),j(""),P(),u({title:"Comment posted!",description:"Your comment has been added successfully."})},onError:a=>{u({title:"Failed to post comment",description:a.message||"Please try again.",variant:"destructive"})}}),H=B({mutationFn:async({commentId:a,content:h})=>await A(`/api/social/comments/${a}`,"PUT",{content:h}),onSuccess:()=>{L(null),w(""),P(),u({title:"Comment updated!",description:"Your comment has been updated successfully."})},onError:a=>{u({title:"Failed to update comment",description:a.message||"Please try again.",variant:"destructive"})}}),O=B({mutationFn:async a=>await A(`/api/social/comments/${a}`,"DELETE"),onSuccess:()=>{P(),u({title:"Comment deleted!",description:"Your comment has been removed successfully."})},onError:a=>{u({title:"Failed to delete comment",description:a.message||"Please try again.",variant:"destructive"})}}),I=B({mutationFn:async({commentId:a,reaction:h})=>await A(`/api/social/comments/${a}/like`,"POST",{reaction:h}),onSuccess:()=>{P()},onError:a=>{u({title:"Failed to react to comment",description:a.message||"Please try again.",variant:"destructive"})}}),J=a=>{a.preventDefault(),g.trim()&&(z?D.mutate(l):D.mutate(g))},q=(a,h)=>{L(a),w(h)},K=()=>{!T||!f.trim()||H.mutate({commentId:T,content:f})},G=a=>{confirm("Are you sure you want to delete this comment?")&&O.mutate(a)},s=a=>{M(a),j("")},N=(a,h)=>{if(!d){u({title:"Login required",description:"Please log in to react to comments.",variant:"destructive"});return}const F=h==="like"?null:"like";I.mutate({commentId:a,reaction:F||"like"})},$=(a,h)=>{if(!d){u({title:"Login required",description:"Please log in to react to comments.",variant:"destructive"});return}const F=h==="dislike"?null:"dislike";I.mutate({commentId:a,reaction:F||"dislike"})},Q=(a,h=0)=>{var de,me,xe,ue;if(h>o)return null;const F=(de=a.user)!=null&&de.firstName&&((me=a.user)!=null&&me.lastName)?`${a.user.firstName} ${a.user.lastName}`:((xe=a.user)==null?void 0:xe.email)||"Anonymous";return e.jsx(C,{className:`mb-4 ${h>0?"ml-8 border-l-2 border-gray-200":""}`,children:e.jsx(k,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[S&&e.jsxs(he,{className:"w-8 h-8",children:[e.jsx(pe,{src:(ue=a.user)==null?void 0:ue.profileImageUrl}),e.jsx(ge,{children:F.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"font-medium text-sm text-gray-900",children:F}),e.jsxs(v,{variant:"outline",className:"text-xs",children:[e.jsx(Me,{className:"w-3 h-3 mr-1"}),_e(new Date(a.createdAt),{addSuffix:!0})]}),a.updatedAt&&a.updatedAt!==a.createdAt&&e.jsx(v,{variant:"secondary",className:"text-xs",children:"Edited"})]}),T===a.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx(W,{value:f,onChange:R=>w(R.target.value),placeholder:"Edit your comment...",className:"min-h-[80px]"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(x,{size:"sm",onClick:K,children:"Save"}),e.jsx(x,{size:"sm",variant:"outline",onClick:()=>L(null),children:"Cancel"})]})]}):e.jsx("div",{className:"text-sm text-gray-700 mb-3",children:a.content}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>N(a.id,a.userVote),className:`flex items-center space-x-1 ${a.userVote==="like"?"text-blue-600":"text-gray-500"}`,children:[e.jsx(Be,{className:`w-4 h-4 ${a.userVote==="like"?"fill-current":""}`}),e.jsx("span",{children:a.likeCount})]}),e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>$(a.id,a.userVote),className:`flex items-center space-x-1 ${a.userVote==="dislike"?"text-red-600":"text-gray-500"}`,children:e.jsx("span",{children:a.dislikeCount})}),i&&h<o&&e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>s(a.id),className:"flex items-center space-x-1 text-gray-500 hover:text-gray-700",children:[e.jsx(cs,{className:"w-4 h-4"}),e.jsx("span",{children:"Reply"})]}),(a.canEdit||a.canDelete)&&e.jsxs(ds,{children:[e.jsx(ms,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:e.jsx(He,{className:"w-4 h-4"})})}),e.jsxs(Ue,{align:"end",children:[a.canEdit&&n&&e.jsxs(te,{onClick:()=>q(a.id,a.content),children:[e.jsx(ss,{className:"w-4 h-4 mr-2"}),"Edit"]}),a.canDelete&&p&&e.jsxs(te,{onClick:()=>G(a.id),className:"text-red-600",children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),z===a.id&&e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("form",{onSubmit:R=>{R.preventDefault(),J(R)},children:[e.jsx(W,{value:l,onChange:R=>j(R.target.value),placeholder:"Write a reply...",className:"mb-2"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(x,{size:"sm",type:"submit",disabled:!l.trim(),children:[e.jsx(je,{className:"w-4 h-4 mr-1"}),"Reply"]}),e.jsx(x,{size:"sm",variant:"outline",onClick:()=>M(null),children:"Cancel"})]})]})}),a.replies&&a.replies.length>0&&e.jsx("div",{className:"mt-4",children:a.replies.map(R=>Q(R,h+1))})]})]})})},a.id)};return V?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})}):e.jsxs("div",{className:"space-y-6",children:[d&&e.jsx("form",{onSubmit:J,className:"space-y-3",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[S&&e.jsxs(he,{className:"w-8 h-8",children:[e.jsx(pe,{src:m==null?void 0:m.profileImageUrl}),e.jsx(ge,{children:((ce=m==null?void 0:m.firstName)==null?void 0:ce.charAt(0).toUpperCase())||((oe=m==null?void 0:m.email)==null?void 0:oe.charAt(0).toUpperCase())||"U"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(W,{value:g,onChange:a=>E(a.target.value),placeholder:"Write a comment...",className:"min-h-[100px] resize-none"}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[g.length,"/1000 characters"]}),e.jsxs(x,{type:"submit",size:"sm",disabled:!g.trim()||D.isPending,children:[D.isPending?e.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-white border-t-transparent rounded-full mr-2"}):e.jsx(je,{className:"w-4 h-4 mr-1"}),"Post Comment"]})]})]})]})}),!d&&e.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:[e.jsx(Y,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Please log in to comment"}),e.jsxs(x,{variant:"outline",size:"sm",children:[e.jsx(qe,{className:"w-4 h-4 mr-2"}),"Login to Comment"]})]}),e.jsx("div",{className:"space-y-4",children:U.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(Y,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No comments yet. Be the first to share your thoughts!"})]}):U.map(a=>Q(a))})]})}function fs({targetType:t,targetId:r,title:i,description:n,showVoting:p=!0,showComments:S=!0,showSharing:o=!0}){const{user:m}=le(),{toast:d}=ie(),u=async()=>{try{await navigator.share({title:i,text:n,url:window.location.href})}catch{navigator.clipboard.writeText(window.location.href),d({title:"Link copied",description:"The link has been copied to your clipboard."})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[p&&e.jsx(os,{targetType:t,targetId:Number(r),size:"md"}),o&&e.jsxs(x,{variant:"outline",size:"sm",onClick:u,className:"flex items-center space-x-2",children:[e.jsx(Je,{className:"w-4 h-4"}),e.jsx("span",{children:"Share"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(Y,{className:"w-4 h-4"}),e.jsx("span",{children:"Discussion"})]})]}),S&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(Y,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Comments"})]}),e.jsx(bs,{targetType:t,targetId:r,allowReplies:!0,allowEditing:!0,allowDeleting:!0,showUserAvatars:!0,maxDepth:3})]})]})}function Ms(){const[t,r]=c.useState(""),[i,n]=c.useState("all"),[p,S]=c.useState("all"),[o,m]=c.useState(null),[d,u]=c.useState("overview"),[g,E]=c.useState(void 0),[T,L]=c.useState(!1),[f,w]=c.useState({}),[z,M]=c.useState({}),{data:l,isLoading:j,error:U}=ne({queryKey:["/api/legal"],queryFn:async()=>{try{const s=await A("/api/legal","GET");return s&&typeof s=="object"&&"data"in s?s.data:s}catch(s){return console.error("Failed to fetch legal data:",s),{acts:[],cases:[],criminalCodeSections:[],lawUpdates:[]}}},staleTime:300*1e3,retry:2});l!=null&&l.acts,l!=null&&l.cases;const V=(l==null?void 0:l.criminalCodeSections)||[],P=(l==null?void 0:l.lawUpdates)||[],D=s=>{switch(s.toLowerCase()){case"amendment":return"bg-blue-100 text-blue-800 border-blue-300";case"new":return"bg-green-100 text-green-800 border-green-300";case"repeal":return"bg-red-100 text-red-800 border-red-300";case"update":return"bg-yellow-100 text-yellow-800 border-yellow-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},H=s=>{switch(s.toLowerCase()){case"federal":return"bg-blue-100 text-blue-800 border-blue-300";case"provincial":return"bg-purple-100 text-purple-800 border-purple-300";case"municipal":return"bg-orange-100 text-orange-800 border-orange-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},O=s=>{switch(s.toLowerCase()){case"federal":return e.jsx(Ge,{className:"w-4 h-4"});case"provincial":return e.jsx(is,{className:"w-4 h-4"});case"municipal":return e.jsx(Oe,{className:"w-4 h-4"});default:return e.jsx(be,{className:"w-4 h-4"})}},I=s=>new Date(s).toLocaleDateString("en-CA",{year:"numeric",month:"short",day:"numeric"}),J=s=>{const N=new Date(s),$=new Date;return $.setDate($.getDate()-30),N>$},q=P.filter(s=>{const N=s.title.toLowerCase().includes(t.toLowerCase())||s.description.toLowerCase().includes(t.toLowerCase())||s.legalReference.toLowerCase().includes(t.toLowerCase()),$=i==="all"||s.changeType===i,Q=p==="all"||s.jurisdiction===p;return N&&$&&Q}),K=V.filter(s=>s.sectionNumber.toLowerCase().includes(t.toLowerCase())||s.title.toLowerCase().includes(t.toLowerCase())||s.summary.toLowerCase().includes(t.toLowerCase())),G=async()=>{if(o)try{L(!0);const s=await A(`/api/legal/criminal-code/detail?section=${encodeURIComponent(o.sectionNumber)}`),N=s&&s.success?s.data:s;E((N==null?void 0:N.text)||"")}finally{L(!1)}};return j?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-slate-300 border-t-slate-600 rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400",children:"Loading Canadian legal database..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold font-serif text-slate-900 dark:text-slate-100 flex items-center",children:[e.jsx(be,{className:"w-8 h-8 mr-3 text-slate-600 dark:text-slate-400"}),"Legal System Transparency"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2",children:"Complete transparency of Canadian legal changes, criminal code sections, and law updates"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(v,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-300",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),q.length," Updates"]}),e.jsxs(v,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:[e.jsx(ae,{className:"w-3 h-3 mr-1"}),V.length," Sections"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ke,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),e.jsx(Qe,{placeholder:"Search laws, sections, or keywords...",value:t,onChange:s=>r(s.target.value),className:"pl-10 bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm"})]}),e.jsxs(Ne,{value:i,onValueChange:n,children:[e.jsx(ve,{className:"bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm",children:e.jsx(ye,{placeholder:"Filter by law type"})}),e.jsxs(we,{children:[e.jsx(y,{value:"all",children:"All Law Types"}),e.jsx(y,{value:"criminal_code",children:"Criminal Code"}),e.jsx(y,{value:"civil_code",children:"Civil Code"}),e.jsx(y,{value:"statute",children:"Statutes"}),e.jsx(y,{value:"regulation",children:"Regulations"}),e.jsx(y,{value:"charter",children:"Charter Rights"})]})]}),e.jsxs(Ne,{value:p,onValueChange:S,children:[e.jsx(ve,{className:"bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm",children:e.jsx(ye,{placeholder:"Filter by jurisdiction"})}),e.jsxs(we,{children:[e.jsx(y,{value:"all",children:"All Jurisdictions"}),e.jsx(y,{value:"federal",children:"Federal"}),e.jsx(y,{value:"provincial",children:"Provincial"}),e.jsx(y,{value:"municipal",children:"Municipal"})]})]}),e.jsxs(x,{variant:"outline",className:"bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm",children:[e.jsx(X,{className:"w-4 h-4 mr-2"}),"Recent Changes"]})]})]}),e.jsxs(We,{value:d,onValueChange:u,className:"w-full",children:[e.jsxs(Xe,{className:"grid w-full grid-cols-3 bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm",children:[e.jsx(ee,{value:"database",children:"Legal Database"}),e.jsx(ee,{value:"updates",children:"Law Updates"}),e.jsx(ee,{value:"criminal-code",children:"Criminal Code"})]}),e.jsx(se,{value:"database",className:"space-y-6 mt-6"}),e.jsx(se,{value:"updates",className:"space-y-6 mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[q.map(s=>e.jsxs(C,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all duration-300",children:[e.jsx(_,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[O(s.jurisdiction),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:s.title}),J(s.createdAt)&&e.jsxs(v,{className:"bg-red-100 text-red-700 border-red-300",children:[e.jsx(ts,{className:"w-3 h-3 mr-1"}),"New"]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(v,{variant:"outline",className:D(s.changeType),children:s.changeType.replace("_"," ").toUpperCase()}),e.jsx(v,{className:`${H(s.jurisdiction)}`,children:s.jurisdiction})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 mb-2",children:s.description}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Effective: ",I(s.effectiveDate)]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx(v,{variant:"outline",className:D(s.changeType),children:s.changeType.replace("_"," ").toUpperCase()}),e.jsx(v,{className:`${H(s.jurisdiction)}`,children:s.jurisdiction})]})]})}),e.jsxs(k,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(rs,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Effective:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:I(s.effectiveDate)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Reference:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:s.legalReference})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:s.changeType.replace("_"," ").toUpperCase()})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Summary"}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:s.summary})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:e.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Impact Analysis"})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(Me,{className:"w-4 h-4"}),"Updated ",I(s.createdAt)]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(x,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:s.sourceUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(ls,{className:"w-4 h-4 mr-2"}),"View Source"]})})})]})]})]},s.id)),q.length===0&&e.jsx(C,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:e.jsxs(k,{className:"p-8 text-center",children:[e.jsx(X,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"No Law Updates Found"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No law updates match your current filter criteria. Try adjusting your search terms or filters."})]})})]})}),e.jsx(se,{value:"criminal-code",className:"space-y-6 mt-6",children:o?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(x,{variant:"outline",onClick:()=>m(null),className:"bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm",children:"← Back to Sections"}),e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:["Section ",o.sectionNumber," - ",o.title]})]}),e.jsxs(C,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:[e.jsx(_,{children:e.jsx(Z,{children:"Full Text"})}),e.jsxs(k,{children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx(x,{variant:"outline",size:"sm",onClick:G,disabled:T,children:T?"Fetching…":"View Full Text"})}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300 leading-relaxed whitespace-pre-wrap",children:g||o.fullText})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(C,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:[e.jsx(_,{children:e.jsx(Z,{className:"text-red-900 dark:text-red-100",children:"Penalties"})}),e.jsx(k,{children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:o.penalties})})]}),e.jsxs(C,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:[e.jsx(_,{children:e.jsx(Z,{children:"Related Sections"})}),e.jsx(k,{children:e.jsx("div",{className:"space-y-2",children:o.relatedSections.map((s,N)=>e.jsxs(v,{variant:"outline",className:"mr-2 mb-2",children:["Section ",s]},N))})})]})]}),e.jsx(fs,{targetType:"post",targetId:o.id,title:`Section ${o.sectionNumber} - ${o.title}`,description:o.summary,showVoting:!0,showComments:!0,showSharing:!0})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[K.map(s=>e.jsxs(C,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600",onClick:()=>m(s),children:[e.jsx(_,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:["Section ",s.sectionNumber]}),e.jsx("h4",{className:"text-md font-semibold text-slate-700 dark:text-slate-300",children:s.title})]}),e.jsx(v,{variant:"outline",className:"bg-red-50 text-red-700 border-red-300",children:"Criminal Code"})]})}),e.jsxs(k,{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Section:"})," ",s.sectionNumber]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Title:"})," ",s.title]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Summary:"})," ",s.summary]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Source:"})," ",s.source]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Last Updated:"})," ",s.lastUpdated]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(Ye,{className:"w-4 h-4"}),"Section ",s.sectionNumber]}),e.jsx(x,{variant:"outline",size:"sm",children:"View Details →"})]})]})]},s.id)),K.length===0&&e.jsx("div",{className:"col-span-2",children:e.jsx(C,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:e.jsxs(k,{className:"p-8 text-center",children:[e.jsx(ae,{className:"w-12 h-12 text-blue-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"No Criminal Code Sections Found"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No sections match your search criteria. Try different keywords."})]})})})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsx(C,{className:"border-amber-200 bg-amber-50 dark:bg-amber-900/20 dark:border-amber-800",children:e.jsx(k,{className:"p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(X,{className:"w-6 h-6 text-amber-600 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-900 dark:text-amber-100 mb-2",children:"Legal Information Disclaimer"}),e.jsx("p",{className:"text-amber-800 dark:text-amber-200 text-sm",children:"This information is provided for transparency and educational purposes. Always consult with a qualified legal professional for specific legal advice. Law changes may have implementation delays or require additional regulatory processes."})]})]})})})})]})})}export{Ms as default};
