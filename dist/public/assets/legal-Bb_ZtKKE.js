import{j as e,v as Pe,w as qe,r as c,x as Ie,y as Te,I as Le,z as Fe,A as Re,E as Ae,F as De,G as ze,L as Ee,H as Ue}from"./ui-D2Re0T6U.js";import{z as de,q as oe,p as me,E as Me,K as P,r as H,y as U,H as w,B as x,aa as Ve,J as Ke,X as ge,Y as je,Z as be,$ as ae,a2 as Ne,_ as W,s as _e,g,j,v as y,ab as Be,a4 as He,ac as Je,a3 as Qe,k as te,F as fe,l as Ye,I as Oe,T as le,h as $,i as B,a7 as ve,U as Ge,M as We}from"./app-3Z8Fle7T.js";import{T as Xe,a as Ze,b as re,c as ie}from"./tabs-BNgvIO9b.js";import{S as ye,a as we,b as ke,c as Ce,d as S}from"./select-gFhVg5is.js";import{T as es,a as ss}from"./thumbs-up-Cn24Scl0.js";import{C as ne}from"./clock-BAvKuRCg.js";import{P as as}from"./pen-CwfiNeTK.js";import{T as ts}from"./trash-2--xPGCcqw.js";import{T as ls}from"./trending-up-BeUvQZ2g.js";import{B as Se}from"./building-2-BMOiKNpy.js";import{C as rs}from"./circle-alert-vCTci7jo.js";import{C as is}from"./calendar-s3K5SPTB.js";import{E as ns}from"./external-link-DrsCR-9Z.js";import"./vendor-BtP0CW_r.js";import"./index-B4pxPuSB.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=de("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H19a1 1 0 0 1 1 1v18a1 1 0 0 1-1 1H6.5a1 1 0 0 1 0-5H20",key:"k3hazp"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cs=de("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ds=de("Reply",[["polyline",{points:"9 17 4 12 9 7",key:"hvgpf2"}],["path",{d:"M20 18v-2a4 4 0 0 0-4-4H4",key:"5vmcpk"}]]);function os({targetType:t,targetId:l,className:i="",size:n="md",showCounts:p=!0}){const{user:R}=oe(),{toast:d}=me(),m=Me(),{data:o,isLoading:u}=P({queryKey:[`/api/vote/${t}/${l}`],enabled:!!l}),N=H({mutationFn:async h=>await(await U("/api/vote","POST",{targetType:t,targetId:l,voteType:h})).json(),onSuccess:h=>{m.setQueryData([`/api/vote/${t}/${l}`],h),m.invalidateQueries({queryKey:[`/api/${t}s`]}),m.invalidateQueries({queryKey:["/api/forum/posts"]}),m.invalidateQueries({queryKey:["/api/politicians"]}),m.invalidateQueries({queryKey:["/api/bills"]})},onError:h=>{let f="Failed to register vote";if(h.message){if(h.message.includes("already voted")){d({title:"Already Voted",description:"You have already voted on this item. Each user can only vote once.",variant:"default"});return}const F=h.message.match(/400: (.+)/);if(F)try{f=JSON.parse(F[1]).message||f}catch{f=F[1]}else f=h.message}d({title:"Vote Failed",description:f,variant:"destructive"})}}),M=h=>{if(!R){d({title:"Login Required",description:"Please log in to vote",variant:"destructive"});return}N.mutate(h)},A=(o==null?void 0:o.upvotes)||0,D=(o==null?void 0:o.downvotes)||0,b=(o==null?void 0:o.totalScore)||0,C=o==null?void 0:o.userVote,T={sm:"h-7 w-7",md:"h-8 w-8",lg:"h-10 w-10"},L={sm:"w-3 h-3",md:"w-4 h-4",lg:"w-5 h-5"};return e.jsxs("div",{className:w("flex items-center space-x-2",i),children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(x,{variant:C==="upvote"?"default":"outline",size:"sm",className:w(T[n],"p-0",C==="upvote"&&"bg-green-600 hover:bg-green-700 text-white"),onClick:()=>M("upvote"),disabled:N.isPending||u,children:e.jsx(es,{className:L[n]})}),p&&e.jsx("span",{className:"text-sm font-medium text-green-600 min-w-[20px] text-center",children:A})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(x,{variant:C==="downvote"?"default":"outline",size:"sm",className:w(T[n],"p-0",C==="downvote"&&"bg-red-600 hover:bg-red-700 text-white"),onClick:()=>M("downvote"),disabled:N.isPending||u,children:e.jsx(ss,{className:L[n]})}),p&&e.jsx("span",{className:"text-sm font-medium text-red-600 min-w-[20px] text-center",children:D})]}),p&&e.jsxs("div",{className:"flex items-center space-x-1 ml-2 pl-2 border-l",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Score:"}),e.jsx("span",{className:w("text-sm font-bold",b>0&&"text-green-600",b<0&&"text-red-600",b===0&&"text-gray-500"),children:b>0?`+${b}`:b})]})]})}const ms=Pe,xs=qe,hs=c.forwardRef(({className:t,inset:l,children:i,...n},p)=>e.jsxs(Fe,{ref:p,className:w("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",t),...n,children:[i,e.jsx(Ve,{className:"ml-auto"})]}));hs.displayName=Fe.displayName;const us=c.forwardRef(({className:t,...l},i)=>e.jsx(Re,{ref:i,className:w("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...l}));us.displayName=Re.displayName;const $e=c.forwardRef(({className:t,sideOffset:l=4,...i},n)=>e.jsx(Ie,{children:e.jsx(Te,{ref:n,sideOffset:l,className:w("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-white/95 backdrop-blur-md p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...i})}));$e.displayName=Te.displayName;const ce=c.forwardRef(({className:t,inset:l,...i},n)=>e.jsx(Le,{ref:n,className:w("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",l&&"pl-8",t),...i}));ce.displayName=Le.displayName;const ps=c.forwardRef(({className:t,children:l,checked:i,...n},p)=>e.jsxs(Ae,{ref:p,className:w("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:i,...n,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(De,{children:e.jsx(Ke,{className:"h-4 w-4"})})}),l]}));ps.displayName=Ae.displayName;const gs=c.forwardRef(({className:t,children:l,...i},n)=>e.jsxs(ze,{ref:n,className:w("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...i,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(De,{children:e.jsx(cs,{className:"h-2 w-2 fill-current"})})}),l]}));gs.displayName=ze.displayName;const js=c.forwardRef(({className:t,inset:l,...i},n)=>e.jsx(Ee,{ref:n,className:w("px-2 py-1.5 text-sm font-semibold",l&&"pl-8",t),...i}));js.displayName=Ee.displayName;const bs=c.forwardRef(({className:t,...l},i)=>e.jsx(Ue,{ref:i,className:w("-mx-1 my-1 h-px bg-muted",t),...l}));bs.displayName=Ue.displayName;function Ns({targetType:t,targetId:l,allowReplies:i=!0,allowEditing:n=!0,allowDeleting:p=!0,showUserAvatars:R=!0,maxDepth:d=3}){var _,a;const{user:m,isAuthenticated:o}=oe(),{toast:u}=me();Me();const[N,M]=c.useState(""),[A,D]=c.useState(null),[b,C]=c.useState(""),[T,L]=c.useState(null),[h,f]=c.useState(""),{data:F=[],isLoading:J,refetch:k}=P({queryKey:[`/api/social/comments/${t}/${l}`],queryFn:async()=>{try{return await U(`/api/social/comments/${t}/${l}`,"GET")||[]}catch(s){return console.error("Failed to fetch comments:",s),[]}},staleTime:300*1e3}),z=H({mutationFn:async s=>await U("/api/social/comments","POST",{content:s,targetType:t,targetId:l,parentCommentId:T||void 0}),onSuccess:()=>{M(""),L(null),f(""),k(),u({title:"Comment posted!",description:"Your comment has been added successfully."})},onError:s=>{u({title:"Failed to post comment",description:s.message||"Please try again.",variant:"destructive"})}}),xe=H({mutationFn:async({commentId:s,content:r})=>await U(`/api/social/comments/${s}`,"PUT",{content:r}),onSuccess:()=>{D(null),C(""),k(),u({title:"Comment updated!",description:"Your comment has been updated successfully."})},onError:s=>{u({title:"Failed to update comment",description:s.message||"Please try again.",variant:"destructive"})}}),X=H({mutationFn:async s=>await U(`/api/social/comments/${s}`,"DELETE"),onSuccess:()=>{k(),u({title:"Comment deleted!",description:"Your comment has been removed successfully."})},onError:s=>{u({title:"Failed to delete comment",description:s.message||"Please try again.",variant:"destructive"})}}),Q=H({mutationFn:async({commentId:s,reaction:r})=>await U(`/api/social/comments/${s}/like`,"POST",{reaction:r}),onSuccess:()=>{k()},onError:s=>{u({title:"Failed to react to comment",description:s.message||"Please try again.",variant:"destructive"})}}),I=s=>{s.preventDefault(),N.trim()&&(T?z.mutate(h):z.mutate(N))},V=(s,r)=>{D(s),C(r)},Z=()=>{!A||!b.trim()||xe.mutate({commentId:A,content:b})},Y=s=>{confirm("Are you sure you want to delete this comment?")&&X.mutate(s)},O=s=>{L(s),f("")},ee=(s,r)=>{if(!o){u({title:"Login required",description:"Please log in to react to comments.",variant:"destructive"});return}const v=r==="like"?null:"like";Q.mutate({commentId:s,reaction:v||"like"})},se=(s,r)=>{if(!o){u({title:"Login required",description:"Please log in to react to comments.",variant:"destructive"});return}const v=r==="dislike"?null:"dislike";Q.mutate({commentId:s,reaction:v||"dislike"})},K=(s,r=0)=>{var q,he,ue,pe;if(r>d)return null;const v=(q=s.user)!=null&&q.firstName&&((he=s.user)!=null&&he.lastName)?`${s.user.firstName} ${s.user.lastName}`:((ue=s.user)==null?void 0:ue.email)||"Anonymous";return e.jsx(g,{className:`mb-4 ${r>0?"ml-8 border-l-2 border-gray-200":""}`,children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[R&&e.jsxs(ge,{className:"w-8 h-8",children:[e.jsx(je,{src:(pe=s.user)==null?void 0:pe.profileImageUrl}),e.jsx(be,{children:v.charAt(0).toUpperCase()})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("span",{className:"font-medium text-sm text-gray-900",children:v}),e.jsxs(y,{variant:"outline",className:"text-xs",children:[e.jsx(ne,{className:"w-3 h-3 mr-1"}),Be(new Date(s.createdAt),{addSuffix:!0})]}),s.updatedAt&&s.updatedAt!==s.createdAt&&e.jsx(y,{variant:"secondary",className:"text-xs",children:"Edited"})]}),A===s.id?e.jsxs("div",{className:"space-y-2",children:[e.jsx(ae,{value:b,onChange:E=>C(E.target.value),placeholder:"Edit your comment...",className:"min-h-[80px]"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(x,{size:"sm",onClick:Z,children:"Save"}),e.jsx(x,{size:"sm",variant:"outline",onClick:()=>D(null),children:"Cancel"})]})]}):e.jsx("div",{className:"text-sm text-gray-700 mb-3",children:s.content}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>ee(s.id,s.userVote),className:`flex items-center space-x-1 ${s.userVote==="like"?"text-blue-600":"text-gray-500"}`,children:[e.jsx(He,{className:`w-4 h-4 ${s.userVote==="like"?"fill-current":""}`}),e.jsx("span",{children:s.likeCount})]}),e.jsx(x,{variant:"ghost",size:"sm",onClick:()=>se(s.id,s.userVote),className:`flex items-center space-x-1 ${s.userVote==="dislike"?"text-red-600":"text-gray-500"}`,children:e.jsx("span",{children:s.dislikeCount})}),i&&r<d&&e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>O(s.id),className:"flex items-center space-x-1 text-gray-500 hover:text-gray-700",children:[e.jsx(ds,{className:"w-4 h-4"}),e.jsx("span",{children:"Reply"})]}),(s.canEdit||s.canDelete)&&e.jsxs(ms,{children:[e.jsx(xs,{asChild:!0,children:e.jsx(x,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:e.jsx(Je,{className:"w-4 h-4"})})}),e.jsxs($e,{align:"end",children:[s.canEdit&&n&&e.jsxs(ce,{onClick:()=>V(s.id,s.content),children:[e.jsx(as,{className:"w-4 h-4 mr-2"}),"Edit"]}),s.canDelete&&p&&e.jsxs(ce,{onClick:()=>Y(s.id),className:"text-red-600",children:[e.jsx(ts,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]}),T===s.id&&e.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:e.jsxs("form",{onSubmit:E=>{E.preventDefault(),I(E)},children:[e.jsx(ae,{value:h,onChange:E=>f(E.target.value),placeholder:"Write a reply...",className:"mb-2"}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(x,{size:"sm",type:"submit",disabled:!h.trim(),children:[e.jsx(Ne,{className:"w-4 h-4 mr-1"}),"Reply"]}),e.jsx(x,{size:"sm",variant:"outline",onClick:()=>L(null),children:"Cancel"})]})]})}),s.replies&&s.replies.length>0&&e.jsx("div",{className:"mt-4",children:s.replies.map(E=>K(E,r+1))})]})]})})},s.id)};return J?e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})}):e.jsxs("div",{className:"space-y-6",children:[o&&e.jsx("form",{onSubmit:I,className:"space-y-3",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[R&&e.jsxs(ge,{className:"w-8 h-8",children:[e.jsx(je,{src:m==null?void 0:m.profileImageUrl}),e.jsx(be,{children:((_=m==null?void 0:m.firstName)==null?void 0:_.charAt(0).toUpperCase())||((a=m==null?void 0:m.email)==null?void 0:a.charAt(0).toUpperCase())||"U"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx(ae,{value:N,onChange:s=>M(s.target.value),placeholder:"Write a comment...",className:"min-h-[100px] resize-none"}),e.jsxs("div",{className:"flex justify-between items-center mt-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[N.length,"/1000 characters"]}),e.jsxs(x,{type:"submit",size:"sm",disabled:!N.trim()||z.isPending,children:[z.isPending?e.jsx("div",{className:"w-4 h-4 animate-spin border-2 border-white border-t-transparent rounded-full mr-2"}):e.jsx(Ne,{className:"w-4 h-4 mr-1"}),"Post Comment"]})]})]})]})}),!o&&e.jsxs("div",{className:"text-center py-6 bg-gray-50 rounded-lg",children:[e.jsx(W,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-gray-600 mb-2",children:"Please log in to comment"}),e.jsxs(x,{variant:"outline",size:"sm",children:[e.jsx(_e,{className:"w-4 h-4 mr-2"}),"Login to Comment"]})]}),e.jsx("div",{className:"space-y-4",children:F.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(W,{className:"w-8 h-8 mx-auto mb-2 text-gray-400"}),e.jsx("p",{children:"No comments yet. Be the first to share your thoughts!"})]}):F.map(s=>K(s))})]})}function fs({targetType:t,targetId:l,title:i,description:n,showVoting:p=!0,showComments:R=!0,showSharing:d=!0}){const{user:m}=oe(),{toast:o}=me(),u=async()=>{try{await navigator.share({title:i,text:n,url:window.location.href})}catch{navigator.clipboard.writeText(window.location.href),o({title:"Link copied",description:"The link has been copied to your clipboard."})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[p&&e.jsx(os,{targetType:t,targetId:Number(l),size:"md"}),d&&e.jsxs(x,{variant:"outline",size:"sm",onClick:u,className:"flex items-center space-x-2",children:[e.jsx(Qe,{className:"w-4 h-4"}),e.jsx("span",{children:"Share"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(W,{className:"w-4 h-4"}),e.jsx("span",{children:"Discussion"})]})]}),R&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsx(W,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:"Comments"})]}),e.jsx(Ns,{targetType:t,targetId:l,allowReplies:!0,allowEditing:!0,allowDeleting:!0,showUserAvatars:!0,maxDepth:3})]})]})}function Ms(){var K,_;const[t,l]=c.useState(""),[i,n]=c.useState("all"),[p,R]=c.useState("all"),[d,m]=c.useState(null),[o,u]=c.useState("overview"),[N,M]=c.useState(void 0),[A,D]=c.useState(!1),[b,C]=c.useState({}),[T,L]=c.useState({}),{data:h=[],isLoading:f}=P({queryKey:["/api/legal/updates"]}),{data:F=[],isLoading:J}=P({queryKey:["/api/legal/criminal-code"]}),{data:k}=P({queryKey:["/api/legal/stats"]}),{data:z}=P({queryKey:["/api/legal"]}),{data:xe}=P({queryKey:["/api/legal/search?q=",t],enabled:t.length>0}),X=a=>{switch(a.toLowerCase()){case"amendment":return"bg-blue-100 text-blue-800 border-blue-300";case"new":return"bg-green-100 text-green-800 border-green-300";case"repeal":return"bg-red-100 text-red-800 border-red-300";case"update":return"bg-yellow-100 text-yellow-800 border-yellow-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},Q=a=>{switch(a.toLowerCase()){case"federal":return"bg-blue-100 text-blue-800 border-blue-300";case"provincial":return"bg-purple-100 text-purple-800 border-purple-300";case"municipal":return"bg-orange-100 text-orange-800 border-orange-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},I=a=>{switch(a.toLowerCase()){case"federal":return e.jsx(ve,{className:"w-4 h-4"});case"provincial":return e.jsx(Se,{className:"w-4 h-4"});case"municipal":return e.jsx(We,{className:"w-4 h-4"});default:return e.jsx(te,{className:"w-4 h-4"})}},V=a=>new Date(a).toLocaleDateString("en-CA",{year:"numeric",month:"short",day:"numeric"}),Z=a=>{const s=new Date(a),r=new Date;return r.setDate(r.getDate()-30),s>r},Y=h.filter(a=>{const s=a.title.toLowerCase().includes(t.toLowerCase())||a.description.toLowerCase().includes(t.toLowerCase())||a.legalReference.toLowerCase().includes(t.toLowerCase()),r=i==="all"||a.lawType===i,v=p==="all"||a.jurisdiction===p;return s&&r&&v}),O=F.filter(a=>a.sectionNumber.toLowerCase().includes(t.toLowerCase())||a.title.toLowerCase().includes(t.toLowerCase())||a.summary.toLowerCase().includes(t.toLowerCase())),ee=async()=>{if(d)try{D(!0);const a=await U(`/api/legal/criminal-code/detail?section=${encodeURIComponent(d.sectionNumber)}`),s=a&&a.success?a.data:a;M((s==null?void 0:s.text)||"")}finally{D(!1)}},se=async a=>{try{L(q=>({...q,[a]:!0}));const s=await U(`/api/legal/act/detail?title=${encodeURIComponent(a)}`),r=s&&s.success?s.data:s,v=(r==null?void 0:r.text)||"";C(q=>({...q,[a]:v}))}finally{L(s=>({...s,[a]:!1}))}};return f||J?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-slate-300 border-t-slate-600 rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400",children:"Loading Canadian legal database..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl md:text-4xl font-bold font-serif text-slate-900 dark:text-slate-100 flex items-center",children:[e.jsx(te,{className:"w-8 h-8 mr-3 text-slate-600 dark:text-slate-400"}),"Legal System Transparency"]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400 mt-2",children:"Complete transparency of Canadian legal changes, criminal code sections, and law updates"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(y,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-300",children:[e.jsx(fe,{className:"w-3 h-3 mr-1"}),h.length," Updates"]}),e.jsxs(y,{variant:"outline",className:"bg-green-50 text-green-700 border-green-300",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),F.length," Sections"]})]})]}),k&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(g,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(te,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:k.criminalCodeSections||0}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Criminal Code Sections"})]})]})})}),e.jsx(g,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-5 h-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:k.acts||0}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Federal Acts"})]})]})})}),e.jsx(g,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ls,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:k.recentUpdates||0}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Recent Updates"})]})]})})}),e.jsx(g,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:e.jsx(j,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ne,{className:"w-5 h-5 text-orange-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:k.lastUpdated?V(k.lastUpdated):"N/A"}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:"Last Updated"})]})]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 w-4 h-4"}),e.jsx(Oe,{placeholder:"Search laws, sections, or keywords...",value:t,onChange:a=>l(a.target.value),className:"pl-10 bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm"})]}),e.jsxs(ye,{value:i,onValueChange:n,children:[e.jsx(we,{className:"bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm",children:e.jsx(ke,{placeholder:"Filter by law type"})}),e.jsxs(Ce,{children:[e.jsx(S,{value:"all",children:"All Law Types"}),e.jsx(S,{value:"criminal_code",children:"Criminal Code"}),e.jsx(S,{value:"civil_code",children:"Civil Code"}),e.jsx(S,{value:"statute",children:"Statutes"}),e.jsx(S,{value:"regulation",children:"Regulations"}),e.jsx(S,{value:"charter",children:"Charter Rights"})]})]}),e.jsxs(ye,{value:p,onValueChange:R,children:[e.jsx(we,{className:"bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm",children:e.jsx(ke,{placeholder:"Filter by jurisdiction"})}),e.jsxs(Ce,{children:[e.jsx(S,{value:"all",children:"All Jurisdictions"}),e.jsx(S,{value:"federal",children:"Federal"}),e.jsx(S,{value:"provincial",children:"Provincial"}),e.jsx(S,{value:"municipal",children:"Municipal"})]})]}),e.jsxs(x,{variant:"outline",className:"bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm",children:[e.jsx(le,{className:"w-4 h-4 mr-2"}),"Recent Changes"]})]})]}),e.jsxs(Xe,{value:o,onValueChange:u,className:"w-full",children:[e.jsxs(Ze,{className:"grid w-full grid-cols-3 bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm",children:[e.jsx(re,{value:"database",children:"Legal Database"}),e.jsx(re,{value:"updates",children:"Law Updates"}),e.jsx(re,{value:"criminal-code",children:"Criminal Code"})]}),e.jsx(ie,{value:"database",className:"space-y-6 mt-6",children:z&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(g,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:[e.jsx($,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-5 h-5 text-blue-600"}),"Federal Statutes"]})}),e.jsx(j,{className:"space-y-4",children:(K=z.federalStatutes)==null?void 0:K.map(a=>{var s;return e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:a.title}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:a.citation}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mb-3",children:a.description}),e.jsx(y,{variant:"secondary",className:"mb-2",children:a.category}),e.jsxs("div",{className:"text-xs text-slate-500 mb-2",children:[((s=a.sections)==null?void 0:s.length)||0," sections indexed"]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(x,{variant:"outline",size:"sm",onClick:()=>se(a.title),disabled:!!T[a.title],children:T[a.title]?"Loading…":"View Full Text"})}),b[a.title]&&e.jsx("div",{className:"mt-3 p-3 bg-slate-50 dark:bg-slate-900/40 rounded text-sm text-slate-700 dark:text-slate-300 max-h-64 overflow-auto",children:b[a.title]})]},a.id)})})]}),e.jsxs(g,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:[e.jsx($,{children:e.jsxs(B,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"w-5 h-5 text-purple-600"}),"Provincial Legislation"]})}),e.jsx(j,{className:"space-y-4",children:(_=z.provincialLegislation)==null?void 0:_.map(a=>e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-slate-50 dark:hover:bg-slate-700/50 transition-colors",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100",children:a.title}),e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400 mb-2",children:a.citation}),e.jsx(y,{variant:"outline",className:"mb-2",children:a.province}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300 mb-3",children:a.description}),e.jsx(y,{variant:"secondary",children:a.category})]},a.id))})]})]})}),e.jsx(ie,{value:"updates",className:"space-y-6 mt-6",children:e.jsxs("div",{className:"grid grid-cols-1 gap-6",children:[Y.map(a=>e.jsxs(g,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm border-slate-200 dark:border-slate-700 hover:shadow-lg transition-all duration-300",children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[I(a.jurisdiction),e.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-slate-100",children:a.title}),Z(a.createdAt)&&e.jsxs(y,{className:"bg-red-100 text-red-700 border-red-300",children:[e.jsx(rs,{className:"w-3 h-3 mr-1"}),"New"]})]}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:a.description})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2",children:[e.jsx(y,{className:`${X(a.changeType)}`,children:a.changeType}),e.jsxs(y,{className:`${Q(a.jurisdiction)}`,children:[I(a.jurisdiction),e.jsx("span",{className:"ml-1",children:a.jurisdiction})]})]})]})}),e.jsxs(j,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(is,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Effective:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:V(a.effectiveDate)})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fe,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Reference:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:a.legalReference})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{className:"text-slate-600 dark:text-slate-400",children:"Type:"}),e.jsx("span",{className:"font-medium text-slate-900 dark:text-slate-100",children:a.lawType.replace("_"," ").toUpperCase()})]})]}),e.jsxs("div",{className:"bg-slate-50 dark:bg-slate-900/50 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"Summary"}),e.jsx("p",{className:"text-sm text-slate-700 dark:text-slate-300",children:a.summary})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg p-4",children:[e.jsx("h4",{className:"font-semibold text-blue-900 dark:text-blue-100 mb-2",children:"Impact Analysis"}),e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:a.impactAnalysis})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(ne,{className:"w-4 h-4"}),"Updated ",V(a.createdAt)]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(x,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:a.sourceUrl,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(ns,{className:"w-4 h-4 mr-2"}),"View Source"]})})})]})]})]},a.id)),Y.length===0&&e.jsx(g,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:e.jsxs(j,{className:"p-8 text-center",children:[e.jsx(le,{className:"w-12 h-12 text-yellow-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"No Law Updates Found"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No law updates match your current filter criteria. Try adjusting your search terms or filters."})]})})]})}),e.jsx(ie,{value:"criminal-code",className:"space-y-6 mt-6",children:d?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx(x,{variant:"outline",onClick:()=>m(null),className:"bg-white/50 dark:bg-slate-800/50 backdrop-blur-sm",children:"← Back to Sections"}),e.jsxs("h2",{className:"text-2xl font-bold text-slate-900 dark:text-slate-100",children:["Section ",d.sectionNumber," - ",d.title]})]}),e.jsxs(g,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:[e.jsx($,{children:e.jsx(B,{children:"Full Text"})}),e.jsxs(j,{children:[e.jsx("div",{className:"flex items-center gap-2 mb-3",children:e.jsx(x,{variant:"outline",size:"sm",onClick:ee,disabled:A,children:A?"Fetching…":"View Full Text"})}),e.jsx("div",{className:"prose dark:prose-invert max-w-none",children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300 leading-relaxed whitespace-pre-wrap",children:N||d.fullText})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs(g,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:[e.jsx($,{children:e.jsx(B,{className:"text-red-900 dark:text-red-100",children:"Penalties"})}),e.jsx(j,{children:e.jsx("p",{className:"text-slate-700 dark:text-slate-300",children:d.penalties})})]}),e.jsxs(g,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:[e.jsx($,{children:e.jsx(B,{children:"Related Sections"})}),e.jsx(j,{children:e.jsx("div",{className:"space-y-2",children:d.relatedSections.map((a,s)=>e.jsxs(y,{variant:"outline",className:"mr-2 mb-2",children:["Section ",a]},s))})})]})]}),e.jsx(fs,{targetType:"post",targetId:d.id,title:`Section ${d.sectionNumber} - ${d.title}`,description:d.summary,showVoting:!0,showComments:!0,showSharing:!0})]}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[O.map(a=>e.jsxs(g,{className:"cursor-pointer hover:shadow-lg transition-all duration-300 bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm border-slate-200 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600",onClick:()=>m(a),children:[e.jsx($,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-900 dark:text-slate-100",children:["Section ",a.sectionNumber]}),e.jsx("h4",{className:"text-md font-semibold text-slate-700 dark:text-slate-300",children:a.title})]}),e.jsx(y,{variant:"outline",className:"bg-red-50 text-red-700 border-red-300",children:"Criminal Code"})]})}),e.jsxs(j,{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-400",children:a.summary}),e.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 rounded-lg p-3",children:[e.jsx("h5",{className:"font-semibold text-red-900 dark:text-red-100 text-sm mb-1",children:"Penalties"}),e.jsx("p",{className:"text-sm text-red-800 dark:text-red-200",children:a.penalties})]}),a.recentChanges&&e.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 rounded-lg p-3",children:[e.jsx("h5",{className:"font-semibold text-yellow-900 dark:text-yellow-100 text-sm mb-1",children:"Recent Changes"}),e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:a.recentChanges})]}),e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-slate-200 dark:border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600 dark:text-slate-400",children:[e.jsx(Ge,{className:"w-4 h-4"}),a.relatedSections.length," related sections"]}),e.jsx(x,{variant:"outline",size:"sm",children:"View Details →"})]})]})]},a.id)),O.length===0&&e.jsx("div",{className:"col-span-2",children:e.jsx(g,{className:"bg-white/80 dark:bg-slate-800/80 backdrop-blur-sm",children:e.jsxs(j,{className:"p-8 text-center",children:[e.jsx(G,{className:"w-12 h-12 text-blue-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-slate-900 dark:text-slate-100 mb-2",children:"No Criminal Code Sections Found"}),e.jsx("p",{className:"text-slate-600 dark:text-slate-400",children:"No sections match your search criteria. Try different keywords."})]})})})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsx(g,{className:"border-amber-200 bg-amber-50 dark:bg-amber-900/20 dark:border-amber-800",children:e.jsx(j,{className:"p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(le,{className:"w-6 h-6 text-amber-600 mr-3 mt-1"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-amber-900 dark:text-amber-100 mb-2",children:"Legal Information Disclaimer"}),e.jsx("p",{className:"text-amber-800 dark:text-amber-200 text-sm",children:"This information is provided for transparency and educational purposes. Always consult with a qualified legal professional for specific legal advice. Law changes may have implementation delays or require additional regulatory processes."})]})]})})})})]})})}export{Ms as default};
