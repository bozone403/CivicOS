import{K as u,E as s,r as a,aq as d}from"./index-CSXLomUD.js";function n(){return localStorage.getItem("civicos-jwt")||""}const r=d.apiUrl;function y(){return u({queryKey:["civicSocialFeed"],queryFn:async()=>{const i=n(),e=await fetch(`${r}/api/social/feed`,{headers:{Authorization:`Bearer ${i}`}});if(!e.ok)throw new Error("Failed to fetch feed");return(await e.json()).feed||[]}})}function f(){const i=s();return a({mutationFn:async e=>{const o=n(),t=await fetch(`${r}/api/social/posts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to create post");return t.json()},onSuccess:()=>i.invalidateQueries({queryKey:["civicSocialFeed"]})})}function h(){return a({mutationFn:async({postId:i,...e})=>{const o=n(),t=await fetch(`${r}/api/social/posts/${i}/comment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(e)});if(!t.ok)throw new Error("Failed to add comment");return t.json()}})}function p(){const i=s();return a({mutationFn:async({postId:e,reaction:o})=>{const t=n(),c=await fetch(`${r}/api/social/posts/${e}/like`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({reaction:o})});if(!c.ok)throw new Error("Failed to react to post");return c.json()},onSuccess:()=>i.invalidateQueries({queryKey:["civicSocialFeed"]})})}function S(){return u({queryKey:["civicSocialFriends"],queryFn:async()=>{const i=n(),e=await fetch(`${r}/api/social/friends`,{headers:{Authorization:`Bearer ${i}`}});if(!e.ok)throw new Error("Failed to fetch friends");return e.json()}})}function w(){const i=s();return a({mutationFn:async({friendId:e})=>{const o=n(),t=await fetch(`${r}/api/social/friends`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({friendId:e,action:"send"})});if(!t.ok)throw new Error("Failed to send friend request");return t.json()},onSuccess:()=>i.invalidateQueries({queryKey:["civicSocialFriends"]})})}function F(){const i=s();return a({mutationFn:async({friendId:e})=>{const o=n(),t=await fetch(`${r}/api/social/friends`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({friendId:e,action:"accept"})});if(!t.ok)throw new Error("Failed to accept friend request");return t.json()},onSuccess:()=>i.invalidateQueries({queryKey:["civicSocialFriends"]})})}function v(){const i=s();return a({mutationFn:async({friendId:e})=>{const o=n(),t=await fetch(`${r}/api/social/friends`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({friendId:e,action:"remove"})});if(!t.ok)throw new Error("Failed to remove friend");return t.json()},onSuccess:()=>i.invalidateQueries({queryKey:["civicSocialFriends"]})})}function m(){return a({mutationFn:async i=>{const e=n(),o=await fetch(`${r}/api/social/notifications`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(i)});if(!o.ok)throw new Error("Failed to send notification");return o.json()}})}function C(){const i=s();return a({mutationFn:async e=>{const o=n(),t=await fetch(`${r}/api/social/follow`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({userId:e})});if(!t.ok)throw new Error("Failed to follow user");return t.json()},onSuccess:()=>{i.invalidateQueries({queryKey:["civicSocialFriends"]}),i.invalidateQueries({queryKey:["civicSocialFeed"]})}})}export{S as a,f as b,p as c,h as d,m as e,C as f,w as g,F as h,v as i,y as u};
