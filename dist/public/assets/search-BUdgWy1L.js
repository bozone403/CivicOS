import{j as e}from"./ui-B-8yHimL.js";import{r as c}from"./vendor-DRd396Ms.js";import{u as b,H as f,l as o,B as w,g as n,j as i,h as u,i as p,E as v,n as S,ac as C,a7 as T,F as L,U as R,w as q}from"./index-CKaDF4Wf.js";import{L as E}from"./loading-spinner-BsElS4d4.js";import{E as F}from"./external-link-CH5w5NHF.js";const P=a=>{switch(a){case"politician":return e.jsx(R,{className:"w-4 h-4"});case"bill":return e.jsx(L,{className:"w-4 h-4"});case"legal":return e.jsx(T,{className:"w-4 h-4"});case"news":return e.jsx(C,{className:"w-4 h-4"});default:return e.jsx(o,{className:"w-4 h-4"})}},D=a=>{switch(a){case"politician":return"Politician";case"bill":return"Bill";case"legal":return"Legal Document";case"news":return"News Article";default:return"Result"}},B=a=>{switch(a){case"politician":return"bg-blue-100 text-blue-800";case"bill":return"bg-green-100 text-green-800";case"legal":return"bg-purple-100 text-purple-800";case"news":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}};function G(){const[a,d]=b(),[t,m]=c.useState(""),[r,x]=c.useState("");c.useEffect(()=>{const h=new URLSearchParams(window.location.search).get("q")||"";m(h),x(h)},[a]),c.useEffect(()=>{const s=setTimeout(()=>{x(t)},300);return()=>clearTimeout(s)},[t]);const{data:l,isLoading:j,error:g}=f({queryKey:["/api/search",r],queryFn:()=>q(`/api/search?q=${encodeURIComponent(r)}`,"GET"),enabled:r.length>=2,staleTime:5*60*1e3}),y=s=>{s.preventDefault(),t.trim()&&d(`/search?q=${encodeURIComponent(t.trim())}`)},N=s=>{d(s)};return e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Search CivicOS"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Search across politicians, bills, legal documents, and news articles"}),e.jsxs("form",{onSubmit:y,className:"relative max-w-2xl",children:[e.jsx(o,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Search for politicians, bills, laws, or news...",value:t,onChange:s=>m(s.target.value),className:"w-full pl-10 pr-4 py-3 bg-white border border-gray-300 rounded-lg text-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),e.jsx(w,{type:"submit",className:"absolute right-2 top-1/2 transform -translate-y-1/2",disabled:!t.trim(),children:"Search"})]})]}),r.length>=2&&e.jsx("div",{className:"space-y-4",children:j?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(E,{size:"lg"}),e.jsx("span",{className:"ml-3 text-gray-600",children:"Searching..."})]}):g?e.jsx(n,{children:e.jsx(i,{className:"pt-6",children:e.jsx("div",{className:"text-center text-red-600",children:"Failed to load search results. Please try again."})})}):l?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold mb-2",children:['Search Results for "',l.query,'"']}),e.jsxs("p",{className:"text-gray-600",children:["Found ",l.total," results"]})]}),l.results.length>0?e.jsx("div",{className:"space-y-4",children:l.results.map(s=>e.jsxs(n,{className:"hover:shadow-md transition-shadow cursor-pointer",onClick:()=>N(s.url),children:[e.jsx(u,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"text-gray-500",children:P(s.type)}),e.jsxs("div",{children:[e.jsx(p,{className:"text-lg",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx(v,{className:B(s.type),children:D(s.type)}),e.jsxs("span",{className:"text-sm text-gray-500",children:["Relevance: ",s.relevance,"%"]})]})]})]}),e.jsx(F,{className:"w-4 h-4 text-gray-400"})]})}),e.jsx(i,{className:"pt-0",children:e.jsx(S,{className:"text-gray-700",children:s.description})})]},`${s.type}-${s.id}`))}):e.jsx(n,{children:e.jsx(i,{className:"pt-6",children:e.jsxs("div",{className:"text-center text-gray-600",children:[e.jsx(o,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No results found"}),e.jsx("p",{children:"Try adjusting your search terms or browse our categories"})]})})})]}):null}),!r&&e.jsxs(n,{className:"mt-8",children:[e.jsx(u,{children:e.jsx(p,{children:"Search Tips"})}),e.jsx(i,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Search for Politicians"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Try searching by name, party, or constituency"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Search for Bills"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Search by bill title or description"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Search Legal Documents"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Find laws, acts, and legal cases"})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Search News"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Find news articles and analysis"})]})]})})]})]})}export{G as default};
