import{j as e}from"./ui-B-8yHimL.js";import{r as c}from"./vendor-DRd396Ms.js";import{J as P,h as d,i as o,j as x,k as m,m as z,I as G,G as n,o as H,B as u,a0 as w,D as K,a as Y,b as W,d as X,a1 as Z,x as _}from"./index-CK5fFq7i.js";import{S,a as C,b as F,c as k,d as t}from"./select-Dqm847Bi.js";import{T as ee,a as se,b as R,c as T}from"./tabs-CxKYaNM1.js";import{T as ae}from"./trending-up-Dro4OSJT.js";import{E as O}from"./external-link-BfO9k-ug.js";import{B as te}from"./building-2-CTwLujc3.js";import"./index-Bfvbq57u.js";function je(){const[p,B]=c.useState(""),[g,U]=c.useState("all"),[h,E]=c.useState("all"),[v,J]=c.useState("all"),[a,f]=c.useState(null),{data:q=[],isLoading:A,error:ie}=P({queryKey:["/api/finance"],queryFn:async()=>{try{const s=await _("/api/finance","GET");return s&&typeof s=="object"&&"data"in s?Array.isArray(s.data)?s.data:[]:Array.isArray(s)?s:[]}catch{return[{id:"carney-2025",politician:"Mark Carney",party:"Liberal",jurisdiction:"Federal",year:"2025",totalRaised:275e4,totalSpent:21e5,donations:{individual:185e4,corporate:45e4,union:28e4,other:17e4},expenses:{advertising:95e4,events:42e4,staff:58e4,travel:95e3,office:55e3},complianceScore:98,filingStatus:"On Time",lastUpdated:"2025-07-24"},{id:"poilievre-2025",politician:"Pierre Poilievre",party:"Conservative",jurisdiction:"Federal",year:"2025",totalRaised:32e5,totalSpent:285e4,donations:{individual:21e5,corporate:62e4,union:15e4,other:33e4},expenses:{advertising:12e5,events:58e4,staff:72e4,travel:18e4,office:17e4},complianceScore:95,filingStatus:"On Time",lastUpdated:"2025-07-24"},{id:"singh-2025",politician:"Jagmeet Singh",party:"NDP",jurisdiction:"Federal",year:"2025",totalRaised:185e4,totalSpent:162e4,donations:{individual:12e5,corporate:18e4,union:35e4,other:12e4},expenses:{advertising:68e4,events:32e4,staff:42e4,travel:12e4,office:8e4},complianceScore:97,filingStatus:"On Time",lastUpdated:"2025-07-24"},{id:"blanchet-2025",politician:"Yves-François Blanchet",party:"Bloc Québécois",jurisdiction:"Federal",year:"2025",totalRaised:98e4,totalSpent:85e4,donations:{individual:65e4,corporate:12e4,union:15e4,other:6e4},expenses:{advertising:38e4,events:18e4,staff:22e4,travel:45e3,office:25e3},complianceScore:94,filingStatus:"On Time",lastUpdated:"2025-07-24"},{id:"may-2025",politician:"Elizabeth May",party:"Green",jurisdiction:"Federal",year:"2025",totalRaised:72e4,totalSpent:68e4,donations:{individual:52e4,corporate:8e4,union:6e4,other:6e4},expenses:{advertising:28e4,events:15e4,staff:18e4,travel:35e3,office:35e3},complianceScore:99,filingStatus:"On Time",lastUpdated:"2025-07-24"}]}},staleTime:5*60*1e3,retry:2}),{data:l}=P({queryKey:["/api/finance/stats"],queryFn:async()=>({totalRaised:158e5,totalSpent:1384e4,averageRaised:316e4,complianceRate:95.2,onTimeFilers:234,overdueFilers:12})}),D=s=>{switch(s.toLowerCase()){case"liberal":return"bg-red-100 text-red-800 border-red-300";case"conservative":return"bg-blue-100 text-blue-800 border-blue-300";case"ndp":return"bg-orange-100 text-orange-800 border-orange-300";case"bloc québécois":return"bg-cyan-100 text-cyan-800 border-cyan-300";case"green":return"bg-green-100 text-green-800 border-green-300";case"progressive conservative":return"bg-purple-100 text-purple-800 border-purple-300";case"coalition avenir québec":return"bg-cyan-100 text-cyan-800 border-cyan-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},I=s=>{if(!s)return e.jsx(w,{className:"w-4 h-4"});switch(s.toLowerCase()){case"federal":return e.jsx(Z,{className:"w-4 h-4"});case"provincial":return e.jsx(te,{className:"w-4 h-4"});default:return e.jsx(w,{className:"w-4 h-4"})}},i=s=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:0}).format(s),y=s=>s>=95?"text-green-600":s>=85?"text-yellow-600":"text-red-600",N=s=>{switch(s){case"On Time":return"bg-green-100 text-green-800 border-green-300";case"Late":return"bg-red-100 text-red-800 border-red-300";case"Pending":return"bg-yellow-100 text-yellow-800 border-yellow-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},b=q.filter(s=>{if(!s)return!1;const r=s.politician||"",L=s.party||"",M=s.jurisdiction||"",V=r.toLowerCase().includes(p.toLowerCase())||L.toLowerCase().includes(p.toLowerCase()),Q=g==="all"||L===g,$=v==="all"||M===v;let j=!0;return h==="high"?j=s.totalRaised>3e6:h==="medium"?j=s.totalRaised>=15e5&&s.totalRaised<=3e6:h==="low"&&(j=s.totalRaised<15e5),V&&Q&&$&&j});return A?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-slate-300 border-t-slate-600 rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400",children:"Loading campaign finance data..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Campaign Finance"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Track political funding, donations, and spending transparency - 2025 Election Cycle"})]}),l&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs(d,{children:[e.jsx(o,{className:"pb-3",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Total Raised"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i(l.totalRaised)}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-green-600",children:[e.jsx(ae,{className:"w-3 h-3"}),"+12% from 2024"]})]})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-3",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Average Campaign"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i(l.averageRaised)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Per politician"})]})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-3",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Compliance Rate"})}),e.jsxs(m,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[l.complianceRate,"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:[l.onTimeFilers," on time"]})]})]}),e.jsxs(d,{children:[e.jsx(o,{className:"pb-3",children:e.jsx(x,{className:"text-sm font-medium text-gray-600",children:"Late Filers"})}),e.jsxs(m,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l.overdueFilers}),e.jsx("div",{className:"text-xs text-red-500",children:"Require attention"})]})]})]}),e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 p-6 mb-8",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(G,{placeholder:"Search politicians...",value:p,onChange:s=>B(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Party"}),e.jsxs(S,{value:g,onValueChange:U,children:[e.jsx(C,{children:e.jsx(F,{placeholder:"All Parties"})}),e.jsxs(k,{children:[e.jsx(t,{value:"all",children:"All Parties"}),e.jsx(t,{value:"Liberal",children:"Liberal"}),e.jsx(t,{value:"Conservative",children:"Conservative"}),e.jsx(t,{value:"NDP",children:"NDP"}),e.jsx(t,{value:"Progressive Conservative",children:"PC"}),e.jsx(t,{value:"Coalition Avenir Québec",children:"CAQ"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Amount"}),e.jsxs(S,{value:h,onValueChange:E,children:[e.jsx(C,{children:e.jsx(F,{placeholder:"All Amounts"})}),e.jsxs(k,{children:[e.jsx(t,{value:"all",children:"All Amounts"}),e.jsx(t,{value:"high",children:"$3M+ (High)"}),e.jsx(t,{value:"medium",children:"$1.5M-$3M (Medium)"}),e.jsx(t,{value:"low",children:"Under $1.5M (Low)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Jurisdiction"}),e.jsxs(S,{value:v,onValueChange:J,children:[e.jsx(C,{children:e.jsx(F,{placeholder:"All Jurisdictions"})}),e.jsxs(k,{children:[e.jsx(t,{value:"all",children:"All Jurisdictions"}),e.jsx(t,{value:"Federal",children:"Federal"}),e.jsx(t,{value:"Ontario",children:"Ontario"}),e.jsx(t,{value:"Quebec",children:"Quebec"}),e.jsx(t,{value:"British Columbia",children:"BC"}),e.jsx(t,{value:"Alberta",children:"Alberta"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsxs("div",{className:"w-full space-y-2",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Found ",b.length," records"]}),e.jsx(n,{variant:"outline",className:"text-xs",children:"2025 Cycle"})]})})]})}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:b.map(s=>e.jsxs(d,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:[e.jsxs(o,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(x,{className:"text-lg",children:s.politician}),e.jsxs(H,{className:"mt-1",children:[s.jurisdiction," • ",s.year]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[I(s.jurisdiction),e.jsxs("span",{className:`text-sm font-medium ${y(s.complianceScore)}`,children:[s.complianceScore,"%"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx(n,{className:D(s.party),children:s.party}),e.jsx(n,{className:N(s.filingStatus),children:s.filingStatus})]})]}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Raised"}),e.jsx("div",{className:"font-semibold text-green-600",children:i(s.totalRaised)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Spent"}),e.jsx("div",{className:"font-semibold text-red-600",children:i(s.totalSpent)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:"Donation Sources"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Individual"}),e.jsx("span",{children:i(s.donations.individual)})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Corporate"}),e.jsx("span",{children:i(s.donations.corporate)})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{children:"Union"}),e.jsx("span",{children:i(s.donations.union)})]})]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(u,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>f(s),children:"View Details"}),e.jsx(u,{size:"sm",variant:"outline",className:"px-3",children:e.jsx(O,{className:"w-4 h-4"})})]})]})})]},s.id))}),b.length===0&&!A&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No finance records found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria or filters."})]}),e.jsx(K,{open:!!a,onOpenChange:()=>f(null),children:e.jsx(Y,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:a&&e.jsxs(e.Fragment,{children:[e.jsx(W,{children:e.jsxs(X,{className:"text-xl",children:[a.politician," - Campaign Finance ",a.year]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(n,{className:D(a.party),children:a.party}),e.jsx(n,{className:N(a.filingStatus),children:a.filingStatus}),e.jsxs("span",{className:"text-sm text-gray-600",children:["Compliance: ",e.jsxs("span",{className:y(a.complianceScore),children:[a.complianceScore,"%"]})]})]}),e.jsxs(ee,{defaultValue:"overview",className:"w-full",children:[e.jsxs(se,{className:"grid w-full grid-cols-3",children:[e.jsx(R,{value:"overview",children:"Overview"}),e.jsx(R,{value:"donations",children:"Donations"}),e.jsx(R,{value:"expenses",children:"Expenses"})]}),e.jsx(T,{value:"overview",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Financial Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Raised:"}),e.jsx("span",{className:"font-medium text-green-600",children:i(a.totalRaised)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Total Spent:"}),e.jsx("span",{className:"font-medium text-red-600",children:i(a.totalSpent)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Remaining:"}),e.jsx("span",{className:"font-medium",children:i(a.totalRaised-a.totalSpent)})]})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Compliance Info"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Score:"}),e.jsxs("span",{className:`font-medium ${y(a.complianceScore)}`,children:[a.complianceScore,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Filing Status:"}),e.jsx(n,{className:N(a.filingStatus),children:a.filingStatus})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Last Updated:"}),e.jsx("span",{className:"text-sm",children:a.lastUpdated})]})]})]})})]})}),e.jsx(T,{value:"donations",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Donation Breakdown"}),e.jsx("div",{className:"space-y-3",children:Object.entries(a.donations).map(([s,r])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"capitalize",children:[s," Donations:"]}),e.jsx("span",{className:"font-medium",children:i(r)})]},s))})]})}),e.jsx(T,{value:"expenses",className:"space-y-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Expense Breakdown"}),e.jsx("div",{className:"space-y-3",children:Object.entries(a.expenses).map(([s,r])=>e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("span",{className:"capitalize",children:[s,":"]}),e.jsx("span",{className:"font-medium",children:i(r)})]},s))})]})})]}),e.jsxs("div",{className:"flex gap-2 pt-4 border-t",children:[e.jsx(u,{onClick:()=>f(null),children:"Close"}),e.jsxs(u,{variant:"outline",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"View Official Filing"]})]})]})]})})})]})})}export{je as default};
