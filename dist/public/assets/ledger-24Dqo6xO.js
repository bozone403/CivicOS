import{j as e}from"./ui-CDUWW_Ri.js";import{q as C,u as P,K as E,S as n,B as N,T as L,g as i,j as a,V as m,F as o,v as l,y as D}from"./index-BSMPUNXy.js";import{r as V}from"./vendor-1XCZ5AD1.js";import{C as I}from"./circle-alert-C3wzpuEM.js";import{T as B}from"./trending-up-Udqb7J9l.js";import{D as Z}from"./download-Dx8kUCnr.js";const f={summary:{totalVotes:12,totalPetitions:8,totalActivities:20,totalPoints:245},votes:[{id:1,itemId:101,itemType:"bill",voteValue:1,reasoning:"Supported the Climate Action Act for environmental protection",timestamp:"2024-12-15T10:30:00Z"},{id:2,itemId:102,itemType:"bill",voteValue:-1,reasoning:"Opposed the Budget Bill due to concerns about spending priorities",timestamp:"2024-12-10T14:20:00Z"}],petitions:[{id:1,petitionId:101,signedAt:"2024-12-01T09:15:00Z",petition:{title:"Universal Pharmacare Now",description:"Petition calling for immediate implementation of universal pharmacare",currentSignatures:87650,targetSignatures:1e5}},{id:2,petitionId:102,signedAt:"2024-11-25T16:45:00Z",petition:{title:"Climate Emergency Declaration",description:"Petition demanding federal climate emergency declaration",currentSignatures:92340,targetSignatures:75e3}}],activities:[{id:1,activityType:"vote",entityId:101,entityType:"bill",pointsEarned:10,details:"Supported the Climate Action Act.",createdAt:"2024-12-15T10:30:00Z"},{id:2,activityType:"petition",entityId:101,entityType:"petition",pointsEarned:5,details:"Signed Universal Pharmacare petition.",createdAt:"2024-12-01T09:15:00Z"},{id:3,activityType:"vote",entityId:102,entityType:"bill",pointsEarned:10,details:"Opposed the Budget Bill.",createdAt:"2024-12-10T14:20:00Z"},{id:4,activityType:"petition",entityId:102,entityType:"petition",pointsEarned:5,details:"Signed Climate Emergency petition.",createdAt:"2024-11-25T16:45:00Z"}]},x=r=>new Date(r).toLocaleDateString("en-CA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});function G(){var h,g,u,j,y;const{isAuthenticated:r,isLoading:c}=C(),[,d]=P();V.useEffect(()=>{!c&&!r&&d("/auth")},[r,c,d]);const{data:v,isLoading:b,error:w}=E({queryKey:["/api/civic-ledger"],queryFn:async()=>{try{return await D("/api/civic-ledger","GET")}catch{return f}},enabled:r,retry:1}),s=v||f,T=t=>{switch(t){case"vote":return e.jsx(m,{className:"h-4 w-4"});case"petition":return e.jsx(o,{className:"h-4 w-4"});default:return e.jsx(n,{className:"h-4 w-4"})}},p=t=>{switch(t){case"vote":return"bg-green-100 text-green-800";case"petition":return"bg-purple-100 text-purple-800";default:return"bg-blue-100 text-blue-800"}},A=t=>{switch(t){case 1:return"bg-green-100 text-green-800";case-1:return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},S=t=>{switch(t){case 1:return"SUPPORTED";case-1:return"OPPOSED";default:return"ABSTAINED"}};return c?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(n,{className:"w-12 h-12 mx-auto mb-4 text-gray-400 animate-pulse"}),e.jsx("p",{className:"text-gray-600",children:"Loading authentication..."})]})}):r?b?e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 lg:p-8",children:e.jsx("div",{className:"container mx-auto",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(n,{className:"w-12 h-12 mx-auto mb-4 text-gray-400 animate-pulse"}),e.jsx("p",{className:"text-gray-600",children:"Loading your civic ledger..."})]})})})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 lg:p-8",children:e.jsxs("main",{className:"container mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Civic Ledger"}),e.jsx("p",{className:"text-gray-600",children:"Complete history of your democratic participation and civic engagement"}),w&&e.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx(L,{className:"inline w-4 h-4 mr-1"}),"Showing sample data due to connection issues."]})})]}),s.summary&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(i,{children:e.jsxs(a,{className:"p-4 text-center",children:[e.jsx(B,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.summary.totalActivities}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Actions"})]})}),e.jsx(i,{children:e.jsxs(a,{className:"p-4 text-center",children:[e.jsx(m,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.summary.totalVotes}),e.jsx("p",{className:"text-sm text-gray-600",children:"Votes Cast"})]})}),e.jsx(i,{children:e.jsxs(a,{className:"p-4 text-center",children:[e.jsx(o,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.summary.totalPetitions}),e.jsx("p",{className:"text-sm text-gray-600",children:"Petitions Signed"})]})}),e.jsx(i,{children:e.jsxs(a,{className:"p-4 text-center",children:[e.jsx(n,{className:"h-8 w-8 text-indigo-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.summary.totalPoints}),e.jsx("p",{className:"text-sm text-gray-600",children:"Civic Points"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx(i,{children:e.jsxs(a,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Recent Votes"}),e.jsxs(l,{variant:"outline",children:[((h=s.votes)==null?void 0:h.length)||0," votes"]})]}),e.jsx("div",{className:"space-y-4",children:(g=s.votes)==null?void 0:g.map(t=>e.jsx("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx(m,{className:"w-4 h-4 text-gray-500"}),e.jsxs("span",{className:"font-medium",children:["Bill #",t.itemId]}),e.jsx(l,{className:A(t.voteValue),children:S(t.voteValue)})]}),t.reasoning&&e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t.reasoning}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:x(t.timestamp)})]})},t.id))})]})}),e.jsx(i,{children:e.jsxs(a,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Signed Petitions"}),e.jsxs(l,{variant:"outline",children:[((u=s.petitions)==null?void 0:u.length)||0," petitions"]})]}),e.jsx("div",{className:"space-y-4",children:(j=s.petitions)==null?void 0:j.map(t=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(o,{className:"w-4 h-4 text-purple-500"}),e.jsx("span",{className:"font-medium",children:t.petition.title})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2 line-clamp-2",children:t.petition.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("span",{children:[t.petition.currentSignatures.toLocaleString()," / ",t.petition.targetSignatures.toLocaleString()," signatures"]}),e.jsx("span",{children:x(t.signedAt)})]})]},t.id))})]})})]}),e.jsx(i,{className:"mt-8",children:e.jsxs(a,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Activity Timeline"}),e.jsxs(N,{variant:"outline",size:"sm",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Export Data"]})]}),e.jsx("div",{className:"space-y-4",children:(y=s.activities)==null?void 0:y.map(t=>e.jsxs("div",{className:"flex items-center space-x-4 p-4 border rounded-lg",children:[e.jsx("div",{className:`p-2 rounded-full ${p(t.activityType)}`,children:T(t.activityType)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-medium",children:t.details}),e.jsxs(l,{className:p(t.activityType),children:["+",t.pointsEarned," points"]})]}),e.jsx("p",{className:"text-xs text-gray-500",children:x(t.createdAt)})]})]},t.id))})]})})]})}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx(I,{className:"w-12 h-12 mx-auto mb-4 text-red-400"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Please log in to view your civic ledger"}),e.jsx(N,{onClick:()=>d("/auth"),children:"Go to Login"})]})})}export{G as default};
