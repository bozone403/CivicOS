import{K as u,E as s,r as a,an as d}from"./index-RnIHrvXK.js";function n(){return localStorage.getItem("civicos-jwt")||""}const r=d.apiUrl;function f(){return u({queryKey:["civicSocialFeed"],queryFn:async()=>{const t=n();if(!t)throw new Error("Authentication required");const e=await fetch(`${r}/api/social/feed`,{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw e.status===401||e.status===403?(localStorage.removeItem("civicos-jwt"),new Error("Authentication required")):new Error("Failed to fetch feed");return(await e.json()).feed||[]},retry:(t,e)=>e.message==="Authentication required"?!1:t<3})}function y(){const t=s();return a({mutationFn:async e=>{const o=n(),i=await fetch(`${r}/api/social/posts`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(e)});if(!i.ok)throw new Error("Failed to create post");return i.json()},onSuccess:()=>t.invalidateQueries({queryKey:["civicSocialFeed"]})})}function h(){return a({mutationFn:async({postId:t,...e})=>{const o=n(),i=await fetch(`${r}/api/social/posts/${t}/comment`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify(e)});if(!i.ok)throw new Error("Failed to add comment");return i.json()}})}function p(){const t=s();return a({mutationFn:async({postId:e,reaction:o})=>{const i=n(),c=await fetch(`${r}/api/social/posts/${e}/like`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({reaction:o})});if(!c.ok)throw new Error("Failed to react to post");return c.json()},onSuccess:()=>t.invalidateQueries({queryKey:["civicSocialFeed"]})})}function S(){return u({queryKey:["civicSocialFriends"],queryFn:async()=>{const t=n(),e=await fetch(`${r}/api/social/friends`,{headers:{Authorization:`Bearer ${t}`}});if(!e.ok)throw new Error("Failed to fetch friends");return e.json()}})}function w(){const t=s();return a({mutationFn:async({friendId:e})=>{const o=n(),i=await fetch(`${r}/api/social/friends`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({friendId:e,action:"send"})});if(!i.ok)throw new Error("Failed to send friend request");return i.json()},onSuccess:()=>t.invalidateQueries({queryKey:["civicSocialFriends"]})})}function F(){const t=s();return a({mutationFn:async({friendId:e})=>{const o=n(),i=await fetch(`${r}/api/social/friends`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({friendId:e,action:"accept"})});if(!i.ok)throw new Error("Failed to accept friend request");return i.json()},onSuccess:()=>t.invalidateQueries({queryKey:["civicSocialFriends"]})})}function v(){const t=s();return a({mutationFn:async({friendId:e})=>{const o=n(),i=await fetch(`${r}/api/social/friends`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({friendId:e,action:"remove"})});if(!i.ok)throw new Error("Failed to remove friend");return i.json()},onSuccess:()=>t.invalidateQueries({queryKey:["civicSocialFriends"]})})}function m(){return a({mutationFn:async t=>{const e=n(),o=await fetch(`${r}/api/social/notifications`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)});if(!o.ok)throw new Error("Failed to send notification");return o.json()}})}function C(){const t=s();return a({mutationFn:async e=>{const o=n(),i=await fetch(`${r}/api/social/follow`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${o}`},body:JSON.stringify({userId:e})});if(!i.ok)throw new Error("Failed to follow user");return i.json()},onSuccess:()=>{t.invalidateQueries({queryKey:["civicSocialFriends"]}),t.invalidateQueries({queryKey:["civicSocialFeed"]})}})}export{S as a,y as b,p as c,h as d,m as e,C as f,w as g,F as h,v as i,f as u};
