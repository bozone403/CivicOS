import{r as x,j as e}from"./ui-D2Re0T6U.js";import{p as Z,K as ee,B as l,l as se,I as ae,v as i,g as te,h as re,i as le,n as ie,j as ce,M as B,V as ne,a6 as de,a3 as oe,t as E,U as D,P as xe,a7 as me,G as he}from"./app-CPwj1jrm.js";import{S as q,a as z,b as O,c as U,d as m}from"./select-yy9Z7g_L.js";import{T as ge,a as je,b as h,c as g}from"./tabs-Bi_bjkTJ.js";import{B as K}from"./building-2-CBV5z5io.js";import{E as ve}from"./external-link-BH5xMO2A.js";import"./vendor-BtP0CW_r.js";import"./index-B4pxPuSB.js";function ke(){var N,y,b,w,C,k,S,T,A,L,I;const{toast:M}=Z(),[c,G]=x.useState(""),[j,H]=x.useState("all"),[v,J]=x.useState("all"),[a,f]=x.useState(null),{data:n=[],isLoading:p,error:Q}=ee({queryKey:["/api/politicians"],queryFn:async()=>{try{const s=await he("/api/politicians","GET");return s&&typeof s=="object"&&"data"in s?Array.isArray(s.data)?s.data:[]:Array.isArray(s)?s:[]}catch(s){return console.error("Failed to fetch politicians:",s),[]}},staleTime:300*1e3,retry:2}),W=Array.from(new Set((n||[]).map(s=>s.party))).sort();Array.from(new Set((n||[]).map(s=>s.level))).sort();const u=(n||[]).filter(s=>{const t=s.name.toLowerCase().includes(c.toLowerCase())||s.party.toLowerCase().includes(c.toLowerCase())||s.riding&&s.riding.toLowerCase().includes(c.toLowerCase()),d=j==="all"||s.party===j,o=v==="all"||s.level===v;return t&&d&&o}),Y=s=>{switch(s.toLowerCase()){case"liberal":return"bg-red-100 text-red-800 border-red-300";case"conservative":return"bg-blue-100 text-blue-800 border-blue-300";case"ndp":return"bg-orange-100 text-orange-800 border-orange-300";case"bloc québécois":return"bg-cyan-100 text-cyan-800 border-cyan-300";case"green":return"bg-green-100 text-green-800 border-green-300";case"progressive conservative":return"bg-purple-100 text-purple-800 border-purple-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},_=s=>{switch(s.toLowerCase()){case"federal":return e.jsx(me,{className:"w-4 h-4 text-yellow-600"});case"provincial":return e.jsx(K,{className:"w-4 h-4 text-blue-600"});case"municipal":return e.jsx(B,{className:"w-4 h-4 text-green-600"});default:return e.jsx(D,{className:"w-4 h-4 text-gray-600"})}},X=s=>s>=80?"text-green-600":s>=60?"text-yellow-600":"text-red-600",r=s=>new Intl.NumberFormat("en-CA",{style:"currency",currency:"CAD",minimumFractionDigits:0}).format(s);return p?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-slate-300 border-t-slate-600 rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400",children:"Loading politician data..."})]})})}):Q?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-lg font-medium text-red-600",children:"Failed to load politician data"}),e.jsx(l,{onClick:()=>window.location.reload(),children:"Retry"})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Canadian Politicians"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Track your elected representatives across all levels of government - accurate as of July 2025"})]}),e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 p-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(se,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),e.jsx(ae,{placeholder:"Search by name, riding, or party...",value:c,onChange:s=>G(s.target.value),className:"pl-10"})]}),e.jsxs(q,{value:j,onValueChange:H,children:[e.jsx(z,{className:"w-full lg:w-48",children:e.jsx(O,{placeholder:"Filter by party"})}),e.jsxs(U,{children:[e.jsx(m,{value:"all",children:"All Parties"}),W.map(s=>e.jsx(m,{value:s,children:s},s))]})]}),e.jsxs(q,{value:v,onValueChange:J,children:[e.jsx(z,{className:"w-full lg:w-48",children:e.jsx(O,{placeholder:"Filter by level"})}),e.jsxs(U,{children:[e.jsx(m,{value:"all",children:"All Levels"}),Array.from(new Set(n.map(s=>s.level).filter(Boolean))).map(s=>e.jsx(m,{value:s,children:s},s))]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsxs(i,{variant:"outline",className:"text-xs",children:[u.length," politicians found"]}),e.jsx(i,{variant:"outline",className:"text-xs",children:"Updated July 2025"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(s=>{var t,d,o,P,F,R;return e.jsxs(te,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:[e.jsxs(re,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(le,{className:"text-lg",children:s.name}),e.jsx(ie,{className:"text-sm mt-1",children:s.position})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[_(s.level||""),e.jsxs("span",{className:`text-sm font-medium ${X(s.trustScore||0)}`,children:[s.trustScore||0,"%"]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mt-3",children:[e.jsx(i,{className:Y(s.party),children:s.party}),e.jsx(i,{variant:"outline",className:"text-xs",children:s.level})]})]}),e.jsx(ce,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-600 dark:text-gray-300",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),s.riding||s.constituency||"N/A"]}),e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-300",children:[e.jsx("strong",{children:"Recent:"})," ",s.recentActivity||"No recent activity"]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ne,{className:"w-3 h-3"}),(((t=s.votingRecord)==null?void 0:t.yes)||0)+(((d=s.votingRecord)==null?void 0:d.no)||0)+(((o=s.votingRecord)==null?void 0:o.abstain)||0)," votes"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(de,{className:"w-3 h-3"}),r(((P=s.expenses)==null?void 0:P.total)||0)," (",((F=s.expenses)==null?void 0:F.year)||"N/A",")"]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(l,{size:"sm",variant:"outline",onClick:()=>f(s),children:"View Details"}),e.jsx(l,{size:"sm",variant:"outline",onClick:()=>{const V=`${window.location.origin}/politicians?id=${s.id}`,$=`Check out ${s.name} (${s.party}) on CivicOS`;navigator.share?navigator.share({title:s.name,text:$,url:V}):(navigator.clipboard.writeText(`${$} ${V}`),M({title:"Link copied!",description:"Politician profile link has been copied to your clipboard."}))},children:e.jsx(oe,{className:"w-4 h-4"})}),((R=s.contactInfo)==null?void 0:R.email)&&e.jsx(l,{size:"sm",variant:"outline",className:"px-3",children:e.jsx(E,{className:"w-4 h-4"})})]})]})})]},s.id)})}),u.length===0&&!p&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(D,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No politicians found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria or filters."})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white dark:bg-slate-800 rounded-lg max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:a.name}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:a.position})]}),e.jsx(l,{variant:"outline",onClick:()=>f(null),children:"Close"})]}),e.jsxs(ge,{defaultValue:"overview",className:"w-full",children:[e.jsxs(je,{className:"grid w-full grid-cols-4",children:[e.jsx(h,{value:"overview",children:"Overview"}),e.jsx(h,{value:"voting",children:"Voting"}),e.jsx(h,{value:"expenses",children:"Expenses"}),e.jsx(h,{value:"contact",children:"Contact"})]}),e.jsxs(g,{value:"overview",className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Biography"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:a.bio||"No biography available."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Key Achievements"}),e.jsx("ul",{className:"list-disc list-inside space-y-1",children:(N=a.keyAchievements)==null?void 0:N.map((s,t)=>e.jsx("li",{className:"text-sm text-gray-600 dark:text-gray-300",children:s},t))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Policy Positions"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(y=a.policyPositions)==null?void 0:y.map((s,t)=>e.jsx(i,{variant:"outline",children:s},t))})]})]}),e.jsx(g,{value:"voting",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:((b=a.votingRecord)==null?void 0:b.yes)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Yes Votes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:((w=a.votingRecord)==null?void 0:w.no)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"No Votes"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:((C=a.votingRecord)==null?void 0:C.abstain)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Abstained"})]})]})}),e.jsx(g,{value:"expenses",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Travel"}),e.jsx("div",{className:"font-semibold",children:r(((k=a.expenses)==null?void 0:k.travel)||0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Hospitality"}),e.jsx("div",{className:"font-semibold",children:r(((S=a.expenses)==null?void 0:S.hospitality)||0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-gray-500",children:"Office"}),e.jsx("div",{className:"font-semibold",children:r(((T=a.expenses)==null?void 0:T.office)||0)})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Total (",((A=a.expenses)==null?void 0:A.year)||"N/A",")"]}),e.jsx("div",{className:"font-semibold",children:r(((L=a.expenses)==null?void 0:L.total)||0)})]})]})}),e.jsx(g,{value:"contact",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[((I=a.contactInfo)==null?void 0:I.email)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(E,{className:"w-4 h-4 text-gray-500"}),e.jsx("a",{href:`mailto:${a.contactInfo.email}`,className:"text-blue-600 hover:underline",children:a.contactInfo.email})]}),a.contactInfo.phone&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-4 h-4"}),e.jsx("a",{href:`tel:${a.contactInfo.phone}`,className:"text-blue-600 hover:underline",children:a.contactInfo.phone})]}),a.contactInfo.office&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(K,{className:"w-4 h-4 mt-1"}),e.jsx("div",{className:"text-sm",children:a.contactInfo.office})]}),a.contactInfo.website&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("a",{href:a.contactInfo.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:"Official Website"})]})]})})]})]})})})]})})}export{ke as default};
