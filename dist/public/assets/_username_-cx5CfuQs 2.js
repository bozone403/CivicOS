import{j as e}from"./ui-CDUWW_Ri.js";import{r as U}from"./vendor-1XCZ5AD1.js";import{a3 as F,q as k,p as E,K as d,s as D,g as r,j as i,X as g,Y as p,Z as v,v as b,M as K,B as R,a4 as y,R as f,a2 as B,Q as G,y as o}from"./index-DhTCSRfs.js";import{T as I,a as M,b as h,c as u}from"./tabs-Do8ugyXE.js";import{U as V}from"./UnifiedSocialPost-DvKvhjGV.js";import{S as Q}from"./star-B-cigtIa.js";import{C as z}from"./calendar-hHYJSJEE.js";import{A as w}from"./award-BxYc0VLc.js";function ee(){var N;const{username:t}=F(),{user:l}=k(),{toast:C}=E(),[P,T]=U.useState("posts"),{data:s,isLoading:A}=d({queryKey:["user-profile",t],queryFn:async()=>(await o(`/api/users/profile/${t}`,"GET")).profile,enabled:!!t}),{data:c,isLoading:$}=d({queryKey:["user-posts",t],queryFn:async()=>(await o(`/api/social/posts/user/${t}`,"GET")).posts||[],enabled:!!t}),{data:n}=d({queryKey:["user-achievements",t],queryFn:async()=>(await o(`/api/users/${t}/achievements`,"GET")).achievements||[],enabled:!!t}),L=async()=>{const a=`${window.location.origin}/profile/${t}`,x=`Check out ${(s==null?void 0:s.firstName)||(s==null?void 0:s.username)}'s profile on CivicOS`;try{navigator.share?await navigator.share({title:`${(s==null?void 0:s.firstName)||(s==null?void 0:s.username)}'s Profile`,text:x,url:a}):(await navigator.clipboard.writeText(`${x} ${a}`),C({title:"Link copied!",description:"Profile link has been copied to your clipboard."}))}catch(q){console.error("Share error:",q)}},j=()=>s!=null&&s.firstName&&(s!=null&&s.lastName)?`${s.firstName} ${s.lastName}`:s!=null&&s.firstName?s.firstName:s!=null&&s.username?s.username:"Anonymous User",S=a=>{switch(a==null?void 0:a.toLowerCase()){case"champion":return"bg-purple-500";case"expert":return"bg-blue-500";case"advocate":return"bg-green-500";case"active":return"bg-yellow-500";default:return"bg-gray-500"}},m=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return A?e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading profile..."})]})}):s?e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsx(r,{className:"mb-8",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(g,{className:"w-24 h-24",children:[e.jsx(p,{src:s.profileImageUrl}),e.jsx(v,{className:"bg-blue-600 text-2xl",children:(N=j()[0])==null?void 0:N.toUpperCase()})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-3xl font-bold",children:j()}),s.isVerified&&e.jsxs(b,{variant:"secondary",children:[e.jsx(Q,{className:"w-3 h-3 mr-1"}),"Verified"]}),e.jsx(b,{className:`text-xs ${S(s.civicLevel||"")}`,children:s.civicLevel||"Registered"})]}),e.jsxs("p",{className:"text-gray-600",children:["@",s.username]}),s.bio&&e.jsx("p",{className:"text-gray-700 max-w-md",children:s.bio}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[s.location&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(K,{className:"w-4 h-4"}),s.location]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(z,{className:"w-4 h-4"}),"Joined ",m(s.joinDate)]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(R,{variant:"outline",size:"sm",onClick:L,children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Share Profile"]})})]})})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(r,{children:e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:s.postsCount}),e.jsx("div",{className:"text-sm text-gray-600",children:"Posts"})]})}),e.jsx(r,{children:e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:s.followersCount}),e.jsx("div",{className:"text-sm text-gray-600",children:"Followers"})]})}),e.jsx(r,{children:e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:s.followingCount}),e.jsx("div",{className:"text-sm text-gray-600",children:"Following"})]})}),e.jsx(r,{children:e.jsxs(i,{className:"p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:s.civicPoints}),e.jsx("div",{className:"text-sm text-gray-600",children:"Civic Points"})]})})]}),e.jsxs(I,{value:P,onValueChange:T,children:[e.jsxs(M,{className:"grid w-full grid-cols-3",children:[e.jsx(h,{value:"posts",children:"Posts"}),e.jsx(h,{value:"achievements",children:"Achievements"}),e.jsx(h,{value:"activity",children:"Activity"})]}),e.jsx(u,{value:"posts",className:"mt-6",children:e.jsxs("div",{className:"space-y-6",children:[(l==null?void 0:l.id)===s.id&&e.jsx(V,{placeholder:`What's on your mind, ${s.firstName||s.username}?`,onPostCreated:()=>{window.location.reload()}}),$?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-2 text-gray-600",children:"Loading posts..."})]}):(c==null?void 0:c.length)===0?e.jsx(r,{children:e.jsxs(i,{className:"p-8 text-center",children:[e.jsx(f,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No posts yet"}),e.jsx("p",{className:"text-gray-600",children:(l==null?void 0:l.id)===s.id?"Share your first post to get started!":`${s.firstName||s.username} hasn't posted anything yet.`})]})}):e.jsx("div",{className:"space-y-4",children:c==null?void 0:c.map(a=>{var x;return e.jsx(r,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsxs(g,{className:"w-10 h-10",children:[e.jsx(p,{src:a.user.profileImageUrl}),e.jsx(v,{className:"bg-blue-600",children:((x=a.user.firstName)==null?void 0:x[0])||"U"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsxs("span",{className:"font-semibold",children:[a.user.firstName," ",a.user.lastName]}),e.jsx("span",{className:"text-sm text-gray-500",children:m(a.createdAt)})]}),e.jsx("p",{className:"text-gray-800 mb-3",children:a.content}),a.imageUrl&&e.jsx("img",{src:a.imageUrl,alt:"Post",className:"rounded-lg max-w-full h-auto mb-3"}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("button",{className:"flex items-center gap-1 hover:text-blue-600",children:[e.jsx(B,{className:"w-4 h-4"}),a.likesCount||0]}),e.jsxs("button",{className:"flex items-center gap-1 hover:text-blue-600",children:[e.jsx(f,{className:"w-4 h-4"}),a.commentsCount||0]}),e.jsxs("button",{className:"flex items-center gap-1 hover:text-blue-600",children:[e.jsx(y,{className:"w-4 h-4"}),a.sharesCount||0]})]})]})]})})},a.id)})})]})}),e.jsx(u,{value:"achievements",className:"mt-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(n==null?void 0:n.length)===0?e.jsx(r,{className:"col-span-full",children:e.jsxs(i,{className:"p-8 text-center",children:[e.jsx(w,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No achievements yet"}),e.jsx("p",{className:"text-gray-600",children:"Keep engaging with civic activities to earn achievements!"})]})}):n==null?void 0:n.map(a=>e.jsx(r,{children:e.jsx(i,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsx(w,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:a.name}),e.jsx("p",{className:"text-sm text-gray-600",children:a.description}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Earned ",m(a.earnedAt)]})]})]})})},a.id))})}),e.jsx(u,{value:"activity",className:"mt-6",children:e.jsx(r,{children:e.jsxs(i,{className:"p-8 text-center",children:[e.jsx(G,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Activity Feed"}),e.jsx("p",{className:"text-gray-600",children:"Recent civic engagement activity will appear here."})]})})})]})]}):e.jsx("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(D,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Profile Not Found"}),e.jsx("p",{className:"text-gray-600",children:"The user profile you're looking for doesn't exist."})]})})}export{ee as default};
