import{j as e}from"./ui-B-8yHimL.js";import{q as p,u,H as N,g as a,j as i,a5 as y,V as m,F as d,S as l,B as o,E as v}from"./index-FHalh-En.js";import{r as f}from"./vendor-DRd396Ms.js";import{C as b}from"./circle-alert-CnsGEnnv.js";import{C as w}from"./calendar-B0C7dO7g.js";import{D as C}from"./download-BaLMUh_J.js";const A=r=>new Date(r).toLocaleDateString("en-CA",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});function S(){const{isAuthenticated:r,isLoading:n}=p(),[,x]=u();f.useEffect(()=>{!n&&!r&&x("/auth")},[r,n,x]);const{data:s,isLoading:h}=N({queryKey:["/api/civic-ledger"],enabled:r}),c=s&&s.activities&&s.activities.length>0?s.activities:[],g=t=>{switch(t){case"vote":return e.jsx(m,{className:"h-4 w-4"});case"petition":return e.jsx(d,{className:"h-4 w-4"});default:return e.jsx(l,{className:"h-4 w-4"})}},j=t=>{switch(t){case"vote":return"bg-green-100 text-green-800";case"petition":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}};return n||h?e.jsxs("div",{className:"min-h-screen bg-gray-50 p-4 lg:p-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Civic Ledger"}),e.jsx("p",{className:"text-gray-600",children:"Loading your civic ledger..."})]}),e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading your civic ledger..."})]})})]}):r?!c||c.length===0?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸ“‰"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"No ledger data available"}),e.jsx("p",{className:"text-gray-600",children:"No civic engagement activities found. Participate in the platform to see your history here."})]})}):e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 lg:p-8",children:e.jsxs("main",{className:"container mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Civic Ledger"}),e.jsx("p",{className:"text-gray-600",children:"Complete history of your democratic participation and civic engagement"})]}),(s==null?void 0:s.summary)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx(a,{children:e.jsxs(i,{className:"p-4 text-center",children:[e.jsx(y,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.summary.totalActivities}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Actions"})]})}),e.jsx(a,{children:e.jsxs(i,{className:"p-4 text-center",children:[e.jsx(m,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.summary.totalVotes}),e.jsx("p",{className:"text-sm text-gray-600",children:"Votes Cast"})]})}),e.jsx(a,{children:e.jsxs(i,{className:"p-4 text-center",children:[e.jsx(d,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.summary.totalPetitions}),e.jsx("p",{className:"text-sm text-gray-600",children:"Petitions Signed"})]})}),e.jsx(a,{children:e.jsxs(i,{className:"p-4 text-center",children:[e.jsx(l,{className:"h-8 w-8 text-indigo-600 mx-auto mb-2"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.summary.totalPoints}),e.jsx("p",{className:"text-sm text-gray-600",children:"Civic Points"})]})})]}),e.jsx(a,{className:"mb-8 bg-civic-green text-white",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(l,{className:"text-2xl mr-4 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Cryptographic Security"}),e.jsx("p",{className:"text-sm opacity-90",children:"Every vote is secured with a unique verification ID and block hash. This ensures your votes cannot be tampered with or deleted."})]})]})})}),c.length===0?e.jsx(a,{children:e.jsxs(i,{className:"p-12 text-center",children:[e.jsx(b,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Civic Activity"}),e.jsx("p",{className:"text-center text-muted-foreground mt-8",children:"You haven't participated in any civic activities yet. Visit the Active Legislation page to start voting."}),e.jsx(o,{className:"bg-civic-blue hover:bg-blue-700",children:"View Active Bills"})]})}):e.jsx("div",{className:"space-y-4",children:c.map(t=>e.jsx(a,{className:"hover:shadow-md transition-shadow",children:e.jsx(i,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsxs(v,{className:`mr-2 flex items-center ${j(t.activityType)}`,children:[g(t.activityType),e.jsx("span",{className:"ml-1",children:t.activityType})]}),e.jsx("h3",{className:"font-semibold text-gray-900",children:t.details})]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500 space-x-4",children:[e.jsxs("span",{className:"flex items-center",children:[e.jsx(w,{className:"h-4 w-4 mr-1"}),A(t.createdAt)]}),e.jsxs("span",{className:"flex items-center text-green-600",children:[e.jsx(l,{className:"h-4 w-4 mr-1"}),"+",t.pointsEarned," points"]})]})]}),e.jsx("div",{className:"flex items-center space-x-2 mt-4 lg:mt-0",children:e.jsxs(o,{variant:"outline",size:"sm",children:[e.jsx(C,{className:"h-4 w-4 mr-1"}),"Receipt"]})})]})})},t.id))})]})}):null}export{S as default};
