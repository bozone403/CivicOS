import{j as e}from"./ui-B-8yHimL.js";import{c as H,r as O,q as V,h as t,k as c,B as n,J as q,D as R,P as W,a as Y,b as Z,d as Q,e as $,I as m,Q as z,i as o,j as x,U as h,G,Z as J,o as P,V as E,O as K,F as X}from"./index-Bo3mAL2C.js";import{r as l}from"./vendor-DRd396Ms.js";import{P as r}from"./progress-BZxDKn09.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _=H("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);function ie(){var y,w,C,k;const{user:T,isAuthenticated:U,updateProfile:D}=O(),a=T,[L,I]=l.useState(!1),[A,d]=l.useState(!1),[j,p]=l.useState(""),[f,N]=l.useState(""),[v,u]=l.useState(""),[g,b]=l.useState("");l.useRef(null);const{toast:B}=V();l.useEffect(()=>{a&&(p(a.firstName||""),N(a.lastName||""),u(a.bio||""),b(a.profileImageUrl||""))},[a]),l.useEffect(()=>{window.location.search.includes("welcome")&&I(!0)},[]);const F=async()=>{try{await D({firstName:j,lastName:f,bio:v,profileImageUrl:g}),d(!1)}catch{}};if(!U||!a)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Loading your profile..."}),e.jsx("p",{className:"text-gray-600",children:"Please log in to view your profile."})]})});if(L)return e.jsx(t,{className:"max-w-xl mx-auto mt-12 p-6 bg-yellow-50 border-yellow-400 text-center",children:e.jsxs(c,{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to CivicOS Beta!"}),e.jsx("p",{className:"mb-4 text-gray-700",children:"Your feedback and participation are crucial! The more people who join, the faster we can improve and unlock full civic intelligence for everyone."}),e.jsx(n,{className:"mb-2",onClick:()=>{navigator.clipboard.writeText(window.location.origin),B({title:"Link copied!",description:"Share CivicOS with your friends and help us grow."})},children:"Invite Friends"}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Exposure is keyâ€”spread the word and help build a better civic future!"})]})});const{data:s}=q({queryKey:["/api/user/stats"]});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden mb-8",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 relative",children:e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"})}),e.jsx("div",{className:"relative px-6 pb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end space-y-4 sm:space-y-0 sm:space-x-6",children:[e.jsx("div",{className:"relative -mt-16",children:e.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center text-white text-4xl font-bold border-4 border-white shadow-lg",children:a!=null&&a.profileImageUrl?e.jsx("img",{src:a.profileImageUrl,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):((y=a==null?void 0:a.firstName)==null?void 0:y[0])||((w=a==null?void 0:a.email)==null?void 0:w[0])||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a!=null&&a.firstName&&(a!=null&&a.lastName)?`${a.firstName} ${a.lastName}`:((C=a==null?void 0:a.email)==null?void 0:C.split("@")[0])||"User"}),e.jsxs(R,{open:A,onOpenChange:d,children:[e.jsx(W,{asChild:!0,children:e.jsx(n,{variant:"outline",size:"sm",children:"Edit Profile"})}),e.jsxs(Y,{className:"max-w-md",children:[e.jsxs(Z,{children:[e.jsx(Q,{children:"Edit Profile"}),e.jsx($,{children:"Update your profile information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"First Name"}),e.jsx(m,{value:j,onChange:i=>p(i.target.value),placeholder:"First name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Last Name"}),e.jsx(m,{value:f,onChange:i=>N(i.target.value),placeholder:"Last name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bio"}),e.jsx(z,{value:v,onChange:i=>u(i.target.value),placeholder:"Tell us about yourself...",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Profile Picture URL"}),e.jsx(m,{value:g,onChange:i=>b(i.target.value),placeholder:"https://example.com/image.jpg"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx(n,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(n,{onClick:F,children:"Save Changes"})]})]})]})]}),e.jsx("p",{className:"text-gray-600 mb-2",children:a==null?void 0:a.email}),e.jsx("p",{className:"text-gray-700",children:(a==null?void 0:a.bio)||"No bio yet. Click 'Edit Profile' to add one!"})]})]})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(t,{className:"bg-white shadow-sm",children:[e.jsx(o,{className:"pb-3",children:e.jsxs(x,{className:"text-lg flex items-center space-x-2",children:[e.jsx(h,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Profile Stats"})]})}),e.jsxs(c,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Trust Score"}),e.jsxs(G,{variant:"secondary",children:[(s==null?void 0:s.trustScore)||"100.00","%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Civic Level"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(_,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.civicLevel)||1})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Civic Points"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(J,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.civicPoints)||0})]})]})]})]}),e.jsxs(t,{className:"md:col-span-2",children:[e.jsxs(o,{children:[e.jsx(x,{children:"Civic Engagement"}),e.jsx(P,{children:"Your participation in democratic processes"})]}),e.jsx(c,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(E,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Votes Cast"})]}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.voteCount)||0})]}),e.jsx(r,{value:((s==null?void 0:s.voteCount)||0)*10,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(K,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm",children:"Discussions"})]}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.discussionCount)||0})]}),e.jsx(r,{value:((s==null?void 0:s.discussionCount)||0)*5,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(X,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-sm",children:"Petitions Signed"})]}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.petitionCount)||0})]}),e.jsx(r,{value:((s==null?void 0:s.petitionCount)||0)*15,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm",children:"Representatives Contacted"})]}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.contactCount)||0})]}),e.jsx(r,{value:((s==null?void 0:s.contactCount)||0)*20,className:"h-2"})]})]})})]}),e.jsxs(t,{className:"md:col-span-3",children:[e.jsxs(o,{children:[e.jsx(x,{children:"Recent Activity"}),e.jsx(P,{children:"Your latest civic engagement activities"})]}),e.jsx(c,{children:e.jsx("div",{className:"space-y-4",children:(((k=s==null?void 0:s.recentActivity)==null?void 0:k.length)||0)>0?((s==null?void 0:s.recentActivity)||[]).map((i,M)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"h-8 w-8 bg-civic-blue rounded-full flex items-center justify-center",children:e.jsx(E,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.description}),e.jsx("p",{className:"text-sm text-gray-600",children:i.date})]})]},M)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(h,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Start engaging with civic activities to see your activity here!"})]})})})]})]})]})})}export{ie as default};
