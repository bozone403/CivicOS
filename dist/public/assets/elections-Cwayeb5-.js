import{r as o,j as e}from"./ui-D2Re0T6U.js";import{u as V,K as A,w as m,U as k,B as x,g as h,h as I,v as u,i as M,j as p,M as R,V as B}from"./app-CPwj1jrm.js";import{T as Q,a as z,b as g,c as j}from"./tabs-Bi_bjkTJ.js";import{A as N,a as b}from"./alert-q8qs8uQk.js";import{C as f}from"./clock--lPijnAW.js";import{E as v}from"./external-link-BH5xMO2A.js";import{C as K}from"./calendar-BRAO8aaP.js";import"./vendor-BtP0CW_r.js";function J(){const[y,w]=o.useState("upcoming");V();const[i,C]=o.useState(""),{data:t,isLoading:D,error:E,refetch:T}=A({queryKey:[i.trim()?`/api/elections?location=${encodeURIComponent(i.trim())}`:"/api/elections"],enabled:!0,refetchInterval:1e3*60*60,retry:!1}),a=t||{upcoming:[],recent:[],lastUpdated:new Date().toISOString()};if(D)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading authentic election data..."})]})})});if(E)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs(N,{className:"mt-20",children:[e.jsx(m,{className:"h-4 w-4"}),e.jsx(b,{children:"Unable to load election data. Showing fallback data."})]})})});const c=s=>new Date(s).toLocaleDateString("en-CA",{year:"numeric",month:"long",day:"numeric"}),S=s=>{const r=new Date(s),U=new Date,L=r.getTime()-U.getTime(),n=Math.ceil(L/(1e3*60*60*24));return n<0?"Election has passed":n===0?"Election today!":n===1?"1 day remaining":`${n} days remaining`},l=({election:s})=>e.jsxs(h,{className:"hover:shadow-lg transition-all duration-200 border-l-4 border-l-blue-500",children:[e.jsxs(I,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{variant:s.type==="federal"?"default":s.type==="provincial"?"secondary":"outline",className:"capitalize",children:s.type}),e.jsx(u,{variant:"outline",className:"text-xs",children:s.status})]}),s.sourceUrl&&e.jsxs(x,{variant:"ghost",size:"sm",onClick:()=>window.open(s.sourceUrl,"_blank"),className:"text-xs",children:[e.jsx(v,{className:"w-3 h-3 mr-1"}),"Source"]})]}),e.jsx(M,{className:"text-lg",children:s.description})]}),e.jsxs(p,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(R,{className:"w-4 h-4"}),e.jsx("span",{children:s.region})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(K,{className:"w-4 h-4"}),e.jsx("span",{children:c(s.date)})]}),s.status==="upcoming"&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600 font-medium",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsx("span",{children:S(s.date)})]}),s.registrationDeadline&&e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Registration Deadline:"})," ",c(s.registrationDeadline)]})}),s.advanceVotingDates&&s.advanceVotingDates.length>0&&e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Advance Voting:"})," ",s.advanceVotingDates.map(r=>c(r)).join(", ")]})}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Source: ",s.source]})})]})]}),d=({type:s})=>e.jsx(h,{className:"border-dashed border-2 border-gray-300",children:e.jsxs(p,{className:"text-center py-8",children:[e.jsx(B,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Scheduled Elections"}),e.jsxs("p",{className:"text-gray-600",children:["No ",s," elections are currently scheduled at this time."]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Data sourced from Elections Canada and provincial election authorities"})]})});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Canadian Elections"}),e.jsx("p",{className:"text-lg text-gray-600 mb-4",children:"Authentic election information from verified government sources"}),t&&e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(f,{className:"w-4 h-4"}),e.jsxs("span",{children:["Last updated: ",new Date(t.lastUpdated).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsxs("span",{children:[t.sources.length," verified sources"]})]})]})]}),e.jsxs(N,{className:"mb-6",children:[e.jsx(m,{className:"h-4 w-4"}),e.jsx(b,{children:"All election data is sourced directly from Elections Canada, provincial election authorities, and official government websites. This page shows only confirmed, scheduled elections."})]}),e.jsxs("div",{className:"mb-6 flex items-center gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:s=>C(s.target.value),placeholder:"Search by location (e.g., Toronto, Ontario, Canada)",className:"flex-1 px-3 py-2 border rounded-md text-sm"}),e.jsx(x,{variant:"default",onClick:()=>T(),children:"Search"})]}),e.jsxs(Q,{value:y,onValueChange:w,className:"space-y-6",children:[e.jsxs(z,{className:"grid w-full grid-cols-2",children:[e.jsx(g,{value:"upcoming",children:"Upcoming Elections"}),e.jsx(g,{value:"recent",children:"Recent Elections"})]}),e.jsx(j,{value:"upcoming",className:"space-y-6",children:a!=null&&a.upcoming&&a.upcoming.length>0?e.jsx("div",{className:"grid gap-4",children:a.upcoming.map(s=>e.jsx(l,{election:s},s.id))}):e.jsx(d,{type:"upcoming"})}),e.jsx(j,{value:"recent",className:"space-y-6",children:a!=null&&a.recent&&a.recent.length>0?e.jsx("div",{className:"grid gap-4",children:a.recent.map(s=>e.jsx(l,{election:s},s.id))}):e.jsx(d,{type:"recent"})})]}),(t==null?void 0:t.sources)&&e.jsxs("div",{className:"mt-12 p-6 bg-white rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Verified Data Sources"}),e.jsx("ul",{className:"space-y-2",children:t.sources.map((s,r)=>e.jsxs("li",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(v,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{children:s})]},r))})]})]})})}export{J as default};
