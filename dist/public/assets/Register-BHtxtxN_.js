import{j as e}from"./ui-wkHeCsE0.js";import{r as n}from"./vendor-DRd396Ms.js";import{p as A,u as I,x as O,S as q,y as N,T as E,g as F,h as R,t as L,i as g,n as G,j as Y,L as d,I as c,s as D,E as j,B as V,A as z,w as B}from"./index-jYG8Moy5.js";import{C as v}from"./CanadianCoatOfArms-BERSkbO1.js";import{L as y}from"./lock-oYOti-vD.js";import{E as w}from"./eye-off-_JyHhWhX.js";function W(){const[a,b]=n.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",city:"",province:"",postalCode:"",agreeToTerms:!1,agreeToPrivacy:!1,agreeToVerification:!1}),[m,C]=n.useState(!1),[x,P]=n.useState(!1),[i,f]=n.useState(!1),[t,p]=n.useState({}),{toast:h}=A(),[,u]=I(),S=O(),T=()=>{const s={};return a.email?/\S+@\S+\.\S+/.test(a.email)||(s.email="Please enter a valid email address"):s.email="Email is required",a.password?a.password.length<8&&(s.password="Password must be at least 8 characters long"):s.password="Password is required",a.password!==a.confirmPassword&&(s.confirmPassword="Passwords do not match"),a.firstName||(s.firstName="First name is required"),a.lastName||(s.lastName="Last name is required"),a.city||(s.city="City is required"),a.province||(s.province="Province is required"),a.postalCode||(s.postalCode="Postal code is required"),a.agreeToTerms||(s.agreeToTerms="You must agree to the terms of service"),a.agreeToPrivacy||(s.agreeToPrivacy="You must agree to the privacy policy"),a.agreeToVerification||(s.agreeToVerification="You must agree to identity verification"),p(s),Object.keys(s).length===0},k=async s=>{if(s.preventDefault(),!!T()){f(!0);try{const l={email:a.email,password:a.password,firstName:a.firstName,lastName:a.lastName,city:a.city,province:a.province,postalCode:a.postalCode},r=await B("/api/auth/register","POST",l);r.token?(localStorage.setItem("civicos-jwt",r.token),await S.invalidateQueries({queryKey:["/api/auth/user"]}),h({title:"Registration successful",description:"Welcome to CivicOS! Your account has been created.",variant:"default"}),setTimeout(()=>{u("/dashboard")},1e3)):h({title:"Registration failed",description:"No authentication token received",variant:"destructive"})}catch(l){console.error("Registration error:",l);const r=l.message||"Registration failed. Please try again.";h({title:"Registration failed",description:r,variant:"destructive"})}finally{f(!1)}}},o=(s,l)=>{b(r=>({...r,[s]:l})),t[s]&&p(r=>({...r,[s]:void 0}))};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 flex flex-col",children:[e.jsx("header",{className:"bg-white/95 backdrop-blur-sm shadow-lg border-b-2 border-red-600 sticky top-0 z-10",children:e.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-600 rounded-lg flex items-center justify-center",children:e.jsx(q,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"CivicOS"}),e.jsx("p",{className:"text-xs text-gray-600",children:"Government Accountability Platform"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(v,{size:"sm"}),e.jsx(N,{variant:"outline",className:"text-yellow-700 border-yellow-400",children:"Independent Platform"})]})]})})}),e.jsx("main",{className:"flex-1 flex items-center justify-center px-4 py-8",children:e.jsxs("div",{className:"w-full max-w-2xl",children:[e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-r-lg",children:e.jsxs("div",{className:"flex",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(E,{className:"h-5 w-5 text-yellow-400"})}),e.jsx("div",{className:"ml-3",children:e.jsxs("p",{className:"text-sm text-yellow-700 font-medium",children:[e.jsx("strong",{children:"Important Notice:"})," This is NOT an official Government of Canada website. CivicOS is an independent platform for government accountability."]})})]})})}),e.jsxs(F,{className:"shadow-xl border-0 bg-white/95 backdrop-blur-sm",children:[e.jsxs(R,{className:"space-y-6 pb-8",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"p-4 bg-gradient-to-br from-red-600 to-red-700 rounded-xl shadow-lg",children:e.jsx(L,{className:"w-10 h-10 text-white"})})}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(g,{className:"text-3xl font-bold text-gray-900",children:"Create Your CivicOS Account"}),e.jsx(g,{className:"text-lg font-semibold text-red-600",children:"Créer Votre Compte CivicOS"}),e.jsx(G,{className:"text-gray-600 text-base",children:"Join the platform for transparent government accountability and civic engagement."})]})]}),e.jsx(Y,{className:"space-y-6 px-8 pb-8",children:e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 border-b pb-2",children:"Account Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"firstName",children:"First Name *"}),e.jsx(c,{id:"firstName",value:a.firstName,onChange:s=>o("firstName",s.target.value),className:"h-12",disabled:i}),t.firstName&&e.jsx("p",{className:"text-red-500 text-sm",children:t.firstName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"lastName",children:"Last Name *"}),e.jsx(c,{id:"lastName",value:a.lastName,onChange:s=>o("lastName",s.target.value),className:"h-12",disabled:i}),t.lastName&&e.jsx("p",{className:"text-red-500 text-sm",children:t.lastName})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"email",children:"Email Address *"}),e.jsxs("div",{className:"relative",children:[e.jsx(D,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx(c,{id:"email",type:"email",value:a.email,onChange:s=>o("email",s.target.value),className:"h-12 pl-12",disabled:i})]}),t.email&&e.jsx("p",{className:"text-red-500 text-sm",children:t.email})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"password",children:"Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx(c,{id:"password",type:m?"text":"password",value:a.password,onChange:s=>o("password",s.target.value),className:"h-12 pl-12 pr-12",disabled:i}),e.jsx("button",{type:"button",onClick:()=>C(!m),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:m?e.jsx(w,{className:"h-5 w-5"}):e.jsx(j,{className:"h-5 w-5"})})]}),t.password&&e.jsx("p",{className:"text-red-500 text-sm",children:t.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(d,{htmlFor:"confirmPassword",children:"Confirm Password *"}),e.jsxs("div",{className:"relative",children:[e.jsx(y,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),e.jsx(c,{id:"confirmPassword",type:x?"text":"password",value:a.confirmPassword,onChange:s=>o("confirmPassword",s.target.value),className:"h-12 pl-12 pr-12",disabled:i}),e.jsx("button",{type:"button",onClick:()=>P(!x),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?e.jsx(w,{className:"h-5 w-5"}):e.jsx(j,{className:"h-5 w-5"})})]}),t.confirmPassword&&e.jsx("p",{className:"text-red-500 text-sm",children:t.confirmPassword})]})]})]}),e.jsx(V,{type:"submit",disabled:i,className:"w-full h-14 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white font-semibold text-lg shadow-lg transition-all duration-200 transform hover:scale-[1.02]",children:i?e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-3"}),"Creating Account..."]}):e.jsxs(e.Fragment,{children:["Create Account / Créer le Compte",e.jsx(z,{className:"w-5 h-5 ml-3"})]})}),e.jsx("div",{className:"text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",e.jsx("button",{type:"button",onClick:()=>u("/login"),className:"text-red-600 hover:text-red-700 font-medium",children:"Sign in here"})]})})]})})]})]})}),e.jsx("footer",{className:"bg-gray-50 border-t-2 border-red-600 py-8 mt-auto",children:e.jsxs("div",{className:"max-w-4xl mx-auto px-6 text-center",children:[e.jsxs("div",{className:"flex justify-center items-center space-x-3 mb-4",children:[e.jsx(v,{size:"sm"}),e.jsx("span",{className:"font-bold text-gray-900 text-lg",children:"CivicOS"}),e.jsx(N,{variant:"outline",className:"text-yellow-700 border-yellow-400",children:"Independent Platform"})]}),e.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["Independent Canadian Government Accountability Platform",e.jsx("br",{}),"Plateforme Indépendante de Responsabilité Gouvernementale Canadienne"]}),e.jsxs("p",{className:"text-xs text-yellow-600 font-medium mt-3",children:["* Not affiliated with the Government of Canada",e.jsx("br",{}),"* Non affilié au gouvernement du Canada"]})]})})]})}export{W as default};
