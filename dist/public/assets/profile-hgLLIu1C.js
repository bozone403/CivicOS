import{j as e}from"./ui-B-8yHimL.js";import{c as $,r as K,u as Q,q as z,J as D,B as c,h as r,k as d,D as J,P as X,a as _,b as S,d as ee,e as se,I as j,Q as ae,i as p,j as f,U as N,G as ie,Z as le,o as F,V as I,O as te,F as ce,x as ne}from"./index-D3s0LNS7.js";import{r as l}from"./vendor-DRd396Ms.js";import{P as o}from"./progress-bZyHrzr6.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=$("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);function he(){var E,L,T,U;const{user:t,isAuthenticated:q,updateProfile:A}=K(),[B,M]=Q(),{toast:O}=z(),u=B.split("/"),n=u[u.length-1],m=!n||n==="profile"||n===(t==null?void 0:t.id),x=m?t==null?void 0:t.id:n,{data:H,isLoading:R}=D({queryKey:["user-profile",x],queryFn:async()=>m?t:await ne(`/api/social/users/${x}`,"GET"),enabled:!!x}),a=H||t,[V,G]=l.useState(!1),[W,h]=l.useState(!1),[v,g]=l.useState(""),[b,y]=l.useState(""),[w,C]=l.useState(""),[k,P]=l.useState("");l.useRef(null),l.useEffect(()=>{a&&(g(a.firstName||""),y(a.lastName||""),C(a.bio||""),P(a.profileImageUrl||""))},[a]),l.useEffect(()=>{window.location.search.includes("welcome")&&G(!0)},[]);const Y=async()=>{try{await A({firstName:v,lastName:b,bio:w,profileImageUrl:k}),h(!1)}catch{}};if(!q)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Loading your profile..."}),e.jsx("p",{className:"text-gray-600",children:"Please log in to view profiles."})]})});if(R)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Loading profile..."}),e.jsx("p",{className:"text-gray-600",children:"Fetching user information..."})]})});if(!a)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"User not found"}),e.jsx("p",{className:"text-gray-600",children:"The user you're looking for doesn't exist or has been removed."}),e.jsx(c,{onClick:()=>M("/dashboard"),className:"mt-4",children:"Go to Dashboard"})]})});if(V)return e.jsx(r,{className:"max-w-xl mx-auto mt-12 p-6 bg-yellow-50 border-yellow-400 text-center",children:e.jsxs(d,{children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to CivicOS Beta!"}),e.jsx("p",{className:"mb-4 text-gray-700",children:"Your feedback and participation are crucial! The more people who join, the faster we can improve and unlock full civic intelligence for everyone."}),e.jsx(c,{className:"mb-2",onClick:()=>{navigator.clipboard.writeText(window.location.origin),O({title:"Link copied!",description:"Share CivicOS with your friends and help us grow."})},children:"Invite Friends"}),e.jsx("div",{className:"text-xs text-gray-500 mt-2",children:"Exposure is keyâ€”spread the word and help build a better civic future!"})]})});const{data:s}=D({queryKey:["/api/user/stats"]});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-6xl",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden mb-8",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 relative",children:e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-20"})}),e.jsx("div",{className:"relative px-6 pb-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end space-y-4 sm:space-y-0 sm:space-x-6",children:[e.jsx("div",{className:"relative -mt-16",children:e.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center text-white text-4xl font-bold border-4 border-white shadow-lg",children:a!=null&&a.profileImageUrl?e.jsx("img",{src:a.profileImageUrl,alt:"Profile",className:"w-full h-full rounded-full object-cover"}):((E=a==null?void 0:a.firstName)==null?void 0:E[0])||((L=a==null?void 0:a.email)==null?void 0:L[0])||"U"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:a!=null&&a.firstName&&(a!=null&&a.lastName)?`${a.firstName} ${a.lastName}`:((T=a==null?void 0:a.email)==null?void 0:T.split("@")[0])||"User"}),m&&e.jsxs(J,{open:W,onOpenChange:h,children:[e.jsx(X,{asChild:!0,children:e.jsx(c,{variant:"outline",size:"sm",children:"Edit Profile"})}),e.jsxs(_,{className:"max-w-md",children:[e.jsxs(S,{children:[e.jsx(ee,{children:"Edit Profile"}),e.jsx(se,{children:"Update your profile information"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"First Name"}),e.jsx(j,{value:v,onChange:i=>g(i.target.value),placeholder:"First name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Last Name"}),e.jsx(j,{value:b,onChange:i=>y(i.target.value),placeholder:"Last name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Bio"}),e.jsx(ae,{value:w,onChange:i=>C(i.target.value),placeholder:"Tell us about yourself...",rows:3})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-2",children:"Profile Picture URL"}),e.jsx(j,{value:k,onChange:i=>P(i.target.value),placeholder:"https://example.com/image.jpg"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx(c,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsx(c,{onClick:Y,children:"Save Changes"})]})]})]})]}),e.jsx("p",{className:"text-gray-600 mb-2",children:a==null?void 0:a.email}),e.jsx("p",{className:"text-gray-700",children:(a==null?void 0:a.bio)||"No bio yet. Click 'Edit Profile' to add one!"})]})]})})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsxs(r,{className:"bg-white shadow-sm",children:[e.jsx(p,{className:"pb-3",children:e.jsxs(f,{className:"text-lg flex items-center space-x-2",children:[e.jsx(N,{className:"h-5 w-5 text-blue-600"}),e.jsx("span",{children:"Profile Stats"})]})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Trust Score"}),e.jsxs(ie,{variant:"secondary",children:[(s==null?void 0:s.trustScore)||"100.00","%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Civic Level"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(re,{className:"h-4 w-4 text-amber-600"}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.civicLevel)||1})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Civic Points"}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(le,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.civicPoints)||0})]})]})]})]}),e.jsxs(r,{className:"md:col-span-2",children:[e.jsxs(p,{children:[e.jsx(f,{children:"Civic Engagement"}),e.jsx(F,{children:"Your participation in democratic processes"})]}),e.jsx(d,{children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(I,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Votes Cast"})]}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.voteCount)||0})]}),e.jsx(o,{value:((s==null?void 0:s.voteCount)||0)*10,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(te,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"text-sm",children:"Discussions"})]}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.discussionCount)||0})]}),e.jsx(o,{value:((s==null?void 0:s.discussionCount)||0)*5,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ce,{className:"h-4 w-4 text-purple-600"}),e.jsx("span",{className:"text-sm",children:"Petitions Signed"})]}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.petitionCount)||0})]}),e.jsx(o,{value:((s==null?void 0:s.petitionCount)||0)*15,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"h-4 w-4 text-orange-600"}),e.jsx("span",{className:"text-sm",children:"Representatives Contacted"})]}),e.jsx("span",{className:"font-medium",children:(s==null?void 0:s.contactCount)||0})]}),e.jsx(o,{value:((s==null?void 0:s.contactCount)||0)*20,className:"h-2"})]})]})})]}),e.jsxs(r,{className:"md:col-span-3",children:[e.jsxs(p,{children:[e.jsx(f,{children:"Recent Activity"}),e.jsx(F,{children:"Your latest civic engagement activities"})]}),e.jsx(d,{children:e.jsx("div",{className:"space-y-4",children:(((U=s==null?void 0:s.recentActivity)==null?void 0:U.length)||0)>0?((s==null?void 0:s.recentActivity)||[]).map((i,Z)=>e.jsxs("div",{className:"flex items-center space-x-3 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"h-8 w-8 bg-civic-blue rounded-full flex items-center justify-center",children:e.jsx(I,{className:"h-4 w-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:i.description}),e.jsx("p",{className:"text-sm text-gray-600",children:i.date})]})]},Z)):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(N,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-600",children:"Start engaging with civic activities to see your activity here!"})]})})})]})]})]})})}export{he as default};
