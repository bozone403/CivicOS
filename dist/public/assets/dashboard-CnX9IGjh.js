import{j as e}from"./ui-D2Re0T6U.js";import{H as c,h as x,i as h,j as u,g as j,q as f,K as g,B as o,O as m,F as N,U as v,S as b,n as y,G as w}from"./app-CPwj1jrm.js";import{L as S}from"./loading-spinner-BwGNgzoo.js";import{T as C}from"./target-WjgNDxd5.js";import{C as D}from"./calendar-BRAO8aaP.js";import"./vendor-BtP0CW_r.js";function P({children:a,className:i,hoverEffect:l="lift",delay:s=0,onClick:t}){const r={lift:"hover:shadow-lg hover:-translate-y-1 transition-all duration-300",glow:"hover:shadow-xl hover:shadow-blue-500/25 transition-all duration-300",scale:"hover:scale-105 transition-transform duration-300",none:""};return e.jsx(j,{className:c("transition-all duration-300 ease-in-out",r[l],i),style:{animationDelay:`${s}ms`},onClick:t,children:a})}function d({icon:a,title:i,description:l,value:s,trend:t,className:r,onClick:n}){const p={up:"text-green-600",down:"text-red-600",neutral:"text-gray-600"};return e.jsxs(P,{className:c("cursor-pointer",r),hoverEffect:"lift",onClick:n,children:[e.jsxs(x,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(h,{className:"text-sm font-medium",children:i}),e.jsx("div",{className:"h-4 w-4 text-muted-foreground",children:a})]}),e.jsxs(u,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s}),e.jsx("p",{className:"text-xs text-muted-foreground",children:l}),t&&e.jsxs("div",{className:c("flex items-center text-xs mt-1",p[t]),children:[t==="up"&&"↗",t==="down"&&"↘",t==="neutral"&&"→",e.jsxs("span",{className:"ml-1",children:[t==="up"&&"Increasing",t==="down"&&"Decreasing",t==="neutral"&&"Stable"]})]})]})]})}function I(){const{user:a}=f(),{data:i,isLoading:l,error:s}=g({queryKey:["/api/dashboard"],queryFn:async()=>{try{return(await w("/api/dashboard","GET")).data}catch(n){throw n}},staleTime:300*1e3,retry:2});if(l)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsx(S,{size:"lg"})});if(s)return e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-600 mb-4",children:"Failed to load dashboard data"}),e.jsx("div",{className:"text-sm text-gray-600 mb-4",children:s.message}),e.jsx(o,{onClick:()=>window.location.reload(),children:"Retry"})]})});const t=i||{activeBills:0,totalPoliticians:0,totalPetitions:0,platformStatus:"unknown",lastUpdated:new Date().toISOString()};return t.activeBills>0||t.totalPoliticians>0||t.totalPetitions>0?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back, ",(a==null?void 0:a.firstName)||(a==null?void 0:a.lastName)||(a==null?void 0:a.email)||"Citizen","!"]}),e.jsx("p",{className:"text-blue-100 mt-2",children:"Stay engaged with Canadian democracy. Your voice matters."}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t.platformStatus==="operational"?"bg-green-300":"bg-red-300"}`}),e.jsxs("span",{className:"text-sm text-blue-100",children:["Platform: ",t.platformStatus]})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-xs text-blue-200 mt-1",children:["Last updated: ",new Date(t.lastUpdated).toLocaleDateString()]})})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(d,{icon:e.jsx(N,{className:"h-4 w-4"}),title:"Active Bills",description:"Currently in parliament",value:t.activeBills,trend:"neutral"}),e.jsx(d,{icon:e.jsx(v,{className:"h-4 w-4"}),title:"Officials",description:"Total in database",value:t.totalPoliticians,trend:"up"}),e.jsx(d,{icon:e.jsx(C,{className:"h-4 w-4"}),title:"Petitions",description:"Available petitions",value:t.totalPetitions,trend:"up"}),e.jsx(d,{icon:e.jsx(b,{className:"h-4 w-4"}),title:"Platform Status",description:"System health",value:t.platformStatus==="operational"?"Healthy":"Issues",trend:t.platformStatus==="operational"?"up":"down"})]}),e.jsxs(j,{children:[e.jsxs(x,{children:[e.jsxs(h,{className:"flex items-center gap-2",children:[e.jsx(m,{className:"h-5 w-5 text-blue-600"}),"Platform Status"]}),e.jsx(y,{children:"Current system status and data availability"})]}),e.jsx(u,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-semibold text-blue-600",children:t.platformStatus==="operational"?"✅ Operational":"⚠️ Issues"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"System Status"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx(D,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),e.jsx("div",{className:"text-lg font-semibold",children:new Date(t.lastUpdated).toLocaleDateString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Last Updated"})]})]})})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg p-6 text-white",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold",children:["Welcome back, ",(a==null?void 0:a.firstName)||(a==null?void 0:a.lastName)||(a==null?void 0:a.email)||"Citizen","!"]}),e.jsx("p",{className:"text-blue-100 mt-2",children:"Stay engaged with Canadian democracy. Your voice matters."})]})})}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(m,{className:"h-16 w-16 mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Dashboard Data Available"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Dashboard statistics will appear here once data is available from the platform."}),e.jsx(o,{onClick:()=>window.location.reload(),children:"Refresh"})]})]})}export{I as default};
