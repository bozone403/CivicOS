import{j as e}from"./ui-CDUWW_Ri.js";import{r as h}from"./vendor-1XCZ5AD1.js";import{q as A,u as S,K as k,w as u,U as M,g,h as B,v as p,B as I,i as R,j,M as q,V as z}from"./index-MPP4tdMH.js";import{T as K,a as O,b as f,c as N}from"./tabs-b53rGpEV.js";import{A as b,a as v}from"./alert-BeauKIlB.js";import{C as y}from"./clock-LN0Q4GKA.js";import{E as w}from"./external-link-BBzI7JCl.js";import{C as H}from"./calendar-lWhacfF6.js";function X(){const{isAuthenticated:n,isLoading:c}=A(),[C,D]=h.useState("upcoming"),[,d]=S(),{data:a,isLoading:E,error:o}=k({queryKey:["/api/elections/authentic"],enabled:n,refetchInterval:1e3*60*60,retry:!1}),L={upcoming:[{id:"1",type:"federal",region:"Canada",date:"2025-10-20",status:"upcoming",description:"Next scheduled federal general election in Canada.",source:"Elections Canada",sourceUrl:"https://www.elections.ca",registrationDeadline:"2025-09-15",advanceVotingDates:["2025-10-10","2025-10-17"]}],recent:[{id:"2",type:"federal",region:"Canada",date:"2021-09-20",status:"completed",description:"Most recent federal general election in Canada.",source:"Elections Canada",sourceUrl:"https://www.elections.ca",registrationDeadline:"2021-08-20",advanceVotingDates:["2021-09-01","2021-09-08"]}],lastUpdated:new Date().toISOString()},t=o||!a||Object.keys(a).length===0?L:a;if(h.useEffect(()=>{!c&&!n&&d("/auth")},[n,c,d]),c)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading authentication..."})]})});if(!n)return null;if(E)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading authentic election data..."})]})})});if(o)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs(b,{className:"mt-20",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx(v,{children:"Unable to load election data. Showing fallback data."})]})})});const l=s=>new Date(s).toLocaleDateString("en-CA",{year:"numeric",month:"long",day:"numeric"}),T=s=>{const r=new Date(s),U=new Date,V=r.getTime()-U.getTime(),i=Math.ceil(V/(1e3*60*60*24));return i<0?"Election has passed":i===0?"Election today!":i===1?"1 day remaining":`${i} days remaining`},m=({election:s})=>e.jsxs(g,{className:"hover:shadow-lg transition-all duration-200 border-l-4 border-l-blue-500",children:[e.jsxs(B,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{variant:s.type==="federal"?"default":s.type==="provincial"?"secondary":"outline",className:"capitalize",children:s.type}),e.jsx(p,{variant:"outline",className:"text-xs",children:s.status})]}),s.sourceUrl&&e.jsxs(I,{variant:"ghost",size:"sm",onClick:()=>window.open(s.sourceUrl,"_blank"),className:"text-xs",children:[e.jsx(w,{className:"w-3 h-3 mr-1"}),"Source"]})]}),e.jsx(R,{className:"text-lg",children:s.description})]}),e.jsxs(j,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:s.region})]}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsx("span",{children:l(s.date)})]}),s.status==="upcoming"&&e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-blue-600 font-medium",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{children:T(s.date)})]}),s.registrationDeadline&&e.jsx("div",{className:"p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-yellow-800",children:[e.jsx("strong",{children:"Registration Deadline:"})," ",l(s.registrationDeadline)]})}),s.advanceVotingDates&&s.advanceVotingDates.length>0&&e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-md",children:e.jsxs("p",{className:"text-sm text-blue-800",children:[e.jsx("strong",{children:"Advance Voting:"})," ",s.advanceVotingDates.map(r=>l(r)).join(", ")]})}),e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("p",{className:"text-xs text-gray-500",children:["Source: ",s.source]})})]})]}),x=({type:s})=>e.jsx(g,{className:"border-dashed border-2 border-gray-300",children:e.jsxs(j,{className:"text-center py-8",children:[e.jsx(z,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Scheduled Elections"}),e.jsxs("p",{className:"text-gray-600",children:["No ",s," elections are currently scheduled at this time."]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Data sourced from Elections Canada and provincial election authorities"})]})});return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100",children:e.jsxs("div",{className:"max-w-6xl mx-auto p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Canadian Elections"}),e.jsx("p",{className:"text-lg text-gray-600 mb-4",children:"Authentic election information from verified government sources"}),a&&e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsxs("span",{children:["Last updated: ",new Date(a.lastUpdated).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsxs("span",{children:[a.sources.length," verified sources"]})]})]})]}),e.jsxs(b,{className:"mb-6",children:[e.jsx(u,{className:"h-4 w-4"}),e.jsx(v,{children:"All election data is sourced directly from Elections Canada, provincial election authorities, and official government websites. This page shows only confirmed, scheduled elections."})]}),e.jsxs(K,{value:C,onValueChange:D,className:"space-y-6",children:[e.jsxs(O,{className:"grid w-full grid-cols-2",children:[e.jsx(f,{value:"upcoming",children:"Upcoming Elections"}),e.jsx(f,{value:"recent",children:"Recent Elections"})]}),e.jsx(N,{value:"upcoming",className:"space-y-6",children:t!=null&&t.upcoming&&t.upcoming.length>0?e.jsx("div",{className:"grid gap-4",children:t.upcoming.map(s=>e.jsx(m,{election:s},s.id))}):e.jsx(x,{type:"upcoming"})}),e.jsx(N,{value:"recent",className:"space-y-6",children:t!=null&&t.recent&&t.recent.length>0?e.jsx("div",{className:"grid gap-4",children:t.recent.map(s=>e.jsx(m,{election:s},s.id))}):e.jsx(x,{type:"recent"})})]}),(a==null?void 0:a.sources)&&e.jsxs("div",{className:"mt-12 p-6 bg-white rounded-lg border",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Verified Data Sources"}),e.jsx("ul",{className:"space-y-2",children:a.sources.map((s,r)=>e.jsxs("li",{className:"flex items-center space-x-2 text-sm",children:[e.jsx(w,{className:"w-3 h-3 text-gray-400"}),e.jsx("span",{children:s})]},r))})]})]})})}export{X as default};
