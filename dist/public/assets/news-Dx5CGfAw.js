import{r as n,j as e}from"./ui-D2Re0T6U.js";import{K as A,l as O,I as U,v as t,g as T,h as D,i as L,n as R,j as E,S as _,B as x,E as P,C as W,D as X,a as Y,b as Z,c as ee,d as se,G as B}from"./app-BXLB3SPJ.js";import{S as p,a as f,b as N,c as b,d as l}from"./select-DDonTBsB.js";import{T as ae,a as te,b as V,c as q}from"./tabs-rKu_5x1T.js";import{C as w}from"./clock-0wUMQ_y6.js";import{G as v}from"./globe-C8dc7_vo.js";import{E as G}from"./external-link-X3WM4vhd.js";import{C as re}from"./calendar-DVnA9fHR.js";import"./vendor-BtP0CW_r.js";import"./index-B4pxPuSB.js";function ue(){const[m,I]=n.useState(""),[o,F]=n.useState("all"),[h,H]=n.useState("all"),[g,K]=n.useState("all"),[a,j]=n.useState(null),{data:i=[],isLoading:C,error:le}=A({queryKey:["/api/news"],queryFn:async()=>{try{const s=await B("/api/news","GET");return s&&typeof s=="object"&&"data"in s?Array.isArray(s.data)?s.data:[]:Array.isArray(s)?s:[]}catch{return[]}},staleTime:300*1e3,retry:2}),{data:Q=[]}=A({queryKey:["/api/news/sources"],queryFn:async()=>{try{const s=await B("/api/news/sources","GET");return s&&typeof s=="object"&&"data"in s?Array.isArray(s.data)?s.data:[]:Array.isArray(s)?s:[]}catch{return[]}},staleTime:600*1e3,retry:1}),u=i.filter(s=>{const c=s.title.toLowerCase().includes(m.toLowerCase())||s.summary.toLowerCase().includes(m.toLowerCase()),d=o==="all"||s.category===o,r=h==="all"||s.region===h,M=g==="all"||s.source===g;return c&&d&&r&&M}),$=Array.from(new Set(i.map(s=>s.category))),z=Array.from(new Set(i.map(s=>s.region))),J=Array.from(new Set(i.map(s=>s.source))),y=s=>s>=90?"text-green-600":s>=80?"text-yellow-600":"text-red-600",S=s=>{switch(s){case"Left":return"bg-blue-100 text-blue-800";case"Center-Left":return"bg-blue-50 text-blue-700";case"Center":return"bg-gray-100 text-gray-800";case"Center-Right":return"bg-red-50 text-red-700";case"Right":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},k=s=>{const c=new Date(s),r=Math.floor((new Date().getTime()-c.getTime())/(1e3*60*60));return r<1?"Just now":r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`};return C?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-slate-300 border-t-slate-600 rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400",children:"Loading latest news..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Canadian News"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Stay informed with verified news from across Canada - Updated July 2025"})]}),e.jsxs(ae,{defaultValue:"articles",className:"space-y-6",children:[e.jsxs(te,{className:"grid w-full grid-cols-2",children:[e.jsx(V,{value:"articles",children:"Latest News"}),e.jsx(V,{value:"sources",children:"News Sources"})]}),e.jsxs(q,{value:"articles",className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(U,{placeholder:"Search articles...",value:m,onChange:s=>I(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsxs(p,{value:o,onValueChange:F,children:[e.jsx(f,{children:e.jsx(N,{placeholder:"All Categories"})}),e.jsxs(b,{children:[e.jsx(l,{value:"all",children:"All Categories"}),$.map(s=>e.jsx(l,{value:s,children:s},s))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Region"}),e.jsxs(p,{value:h,onValueChange:H,children:[e.jsx(f,{children:e.jsx(N,{placeholder:"All Regions"})}),e.jsxs(b,{children:[e.jsx(l,{value:"all",children:"All Regions"}),z.map(s=>e.jsx(l,{value:s,children:s},s))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Source"}),e.jsxs(p,{value:g,onValueChange:K,children:[e.jsx(f,{children:e.jsx(N,{placeholder:"All Sources"})}),e.jsxs(b,{children:[e.jsx(l,{value:"all",children:"All Sources"}),J.map(s=>e.jsx(l,{value:s,children:s},s))]})]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsxs(t,{variant:"outline",className:"text-xs",children:[u.length," articles found"]}),e.jsxs(t,{variant:"outline",className:"text-xs",children:["Updated ",k(new Date().toISOString())]})]})]}),i.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map(s=>e.jsxs(T,{className:"hover:shadow-lg transition-shadow cursor-pointer",children:[e.jsxs(D,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx(t,{variant:"outline",className:"text-xs",children:s.category}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[e.jsx(w,{className:"w-3 h-3"}),k(s.publishedAt)]})]}),e.jsx(L,{className:"text-lg leading-tight line-clamp-2",children:s.title}),e.jsx(R,{className:"line-clamp-3",children:s.summary})]}),e.jsxs(E,{className:"pt-0",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-gray-200 rounded-full flex items-center justify-center",children:s.source.charAt(0)}),e.jsx("span",{children:s.source})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(_,{className:"w-3 h-3"}),e.jsxs("span",{className:y(s.credibility),children:[s.credibility,"%"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex gap-2",children:s.tags.slice(0,2).map((c,d)=>e.jsx(t,{variant:"secondary",className:"text-xs",children:c},d))}),e.jsxs(x,{size:"sm",variant:"outline",onClick:()=>j(s),children:[e.jsx(P,{className:"w-4 h-4 mr-1"}),"Read"]})]})]})]},s.id))}):e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(v,{className:"w-12 h-12 text-gray-400"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No News Articles Available"}),e.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"There are currently no news articles available. Check back later for updates on Canadian politics and civic affairs."}),e.jsxs("div",{className:"flex items-center justify-center gap-2 text-sm text-gray-500",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsxs("span",{children:["Last updated: ",new Date().toLocaleDateString()]})]})]}),u.length===0&&!C&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(v,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No articles found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria or filters."})]})]}),e.jsx(q,{value:"sources",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Q.map(s=>e.jsxs(T,{children:[e.jsxs(D,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(L,{className:"text-lg",children:s.name}),s.verified&&e.jsx(W,{className:"w-5 h-5 text-green-600"})]}),e.jsx(R,{children:s.type})]}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Credibility:"}),e.jsxs("span",{className:`font-medium ${y(s.credibility)}`,children:[s.credibility,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Bias:"}),e.jsx(t,{className:S(s.bias),children:s.bias})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Region:"}),e.jsx("span",{className:"text-sm font-medium",children:s.region})]}),e.jsxs(x,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open(s.url,"_blank"),children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Visit Source"]})]})})]},s.id))})})]}),e.jsx(X,{open:!!a,onOpenChange:()=>j(null),children:e.jsx(Y,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:a&&e.jsxs(e.Fragment,{children:[e.jsxs(Z,{children:[e.jsx(ee,{className:"text-xl",children:a.title}),e.jsx(se,{children:"Read the full article and view additional details."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(v,{className:"w-4 h-4"}),a.source]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(re,{className:"w-4 h-4"}),new Date(a.publishedAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"w-4 h-4"}),a.readTime," min read"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{className:S(a.bias),children:a.bias}),e.jsx(t,{variant:"outline",children:a.category}),e.jsxs(t,{variant:"outline",className:y(a.credibility),children:[a.credibility,"% Credible"]})]}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:a.summary})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(x,{onClick:()=>window.open(a.url,"_blank"),children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Read Full Article"]}),e.jsx(x,{variant:"outline",onClick:()=>j(null),children:"Close"})]})]})]})})})]})})}export{ue as default};
