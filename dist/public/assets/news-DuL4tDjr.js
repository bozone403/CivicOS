import{j as e}from"./ui-B-8yHimL.js";import{r as l}from"./vendor-DRd396Ms.js";import{H as O,l as Q,I as Z,E as t,g as T,h as A,i as R,C as M,j as E,S as _,B as n,n as J,D as U,a as K,b as W,d as X,w as Y}from"./index-DIqX-r1A.js";import{S as p,a as N,b,c as f,d as i}from"./select-CC7V6q7Q.js";import{T as ee,a as se,b as L,c as D}from"./tabs-CyGpNNA3.js";import{G as w}from"./globe-D5l3vue0.js";import{C as B}from"./clock-CtnoNbDg.js";import{E as v}from"./external-link-B2_img3A.js";import{C as ae}from"./calendar-BOfCkplA.js";import"./index-Bfvbq57u.js";function ge(){const[o,P]=l.useState(""),[m,F]=l.useState("all"),[x,I]=l.useState("all"),[h,V]=l.useState("all"),[a,c]=l.useState(null),{data:d=[],isLoading:C,error:te}=O({queryKey:["/api/news"],queryFn:async()=>{try{const s=await Y("/api/news","GET");return Array.isArray(s)?s:[]}catch(s){return console.error("Failed to fetch news:",s),[{id:"1",title:"Mark Carney Outlines Economic Vision in First Major Speech as PM",summary:"Prime Minister Mark Carney delivered his first major economic address, focusing on climate finance integration and housing market reforms.",source:"CBC News",sourceId:1,url:"https://www.cbc.ca/news/politics/carney-economic-vision-2025",publishedAt:"2025-07-24T18:30:00Z",category:"Politics",region:"National",credibility:95,bias:"Center",readTime:5,tags:["Mark Carney","Economy","Prime Minister","Climate Finance"],verified:!0},{id:"2",title:"Canadian Dollar Strengthens Following Carney Transition",summary:"The Canadian dollar has gained ground against major currencies as markets express confidence in the new Carney administration.",source:"Financial Post",sourceId:2,url:"https://financialpost.com/markets/currencies/cad-strength-carney",publishedAt:"2025-07-24T16:15:00Z",category:"Economics",region:"National",credibility:89,bias:"Center-Right",readTime:3,tags:["Currency","Markets","Mark Carney","Economy"],verified:!0},{id:"3",title:"Housing Market Response to Carney's Policy Announcements",summary:"Real estate analysts examine the potential impact of new housing affordability measures announced by the Carney government.",source:"Globe and Mail",sourceId:3,url:"https://theglobeandmail.com/real-estate/housing-carney-policy",publishedAt:"2025-07-24T14:20:00Z",category:"Real Estate",region:"National",credibility:92,bias:"Center",readTime:7,tags:["Housing","Real Estate","Policy","Mark Carney"],verified:!0}]}},staleTime:5*60*1e3,retry:2}),H=[{id:1,name:"CBC News",url:"https://www.cbc.ca",credibility:95,bias:"Center",region:"National",type:"Public Broadcaster",verified:!0},{id:2,name:"Financial Post",url:"https://financialpost.com",credibility:89,bias:"Center-Right",region:"National",type:"Business News",verified:!0},{id:3,name:"Globe and Mail",url:"https://theglobeandmail.com",credibility:92,bias:"Center",region:"National",type:"Newspaper",verified:!0},{id:4,name:"CTV News",url:"https://www.ctvnews.ca",credibility:88,bias:"Center",region:"National",type:"Television Network",verified:!0},{id:5,name:"National Post",url:"https://nationalpost.com",credibility:87,bias:"Right",region:"National",type:"Newspaper",verified:!0}],g=d.filter(s=>{const y=s.title.toLowerCase().includes(o.toLowerCase())||s.summary.toLowerCase().includes(o.toLowerCase()),S=m==="all"||s.category===m,r=x==="all"||s.region===x,z=h==="all"||s.source===h;return y&&S&&r&&z}),G=Array.from(new Set(d.map(s=>s.category))),$=Array.from(new Set(d.map(s=>s.region))),q=Array.from(new Set(d.map(s=>s.source))),u=s=>s>=90?"text-green-600":s>=80?"text-yellow-600":"text-red-600",j=s=>{switch(s){case"Left":return"bg-blue-100 text-blue-800";case"Center-Left":return"bg-blue-50 text-blue-700";case"Center":return"bg-gray-100 text-gray-800";case"Center-Right":return"bg-red-50 text-red-700";case"Right":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},k=s=>{const y=new Date(s),r=Math.floor((new Date().getTime()-y.getTime())/(1e3*60*60));return r<1?"Just now":r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`};return C?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsx("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-slate-300 border-t-slate-600 rounded-full animate-spin mx-auto"}),e.jsx("p",{className:"text-lg font-medium text-slate-600 dark:text-slate-400",children:"Loading latest news..."})]})})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800",children:e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-4",children:"Canadian News"}),e.jsx("p",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Stay informed with verified news from across Canada - Updated July 2025"})]}),e.jsxs(ee,{defaultValue:"articles",className:"space-y-6",children:[e.jsxs(se,{className:"grid w-full grid-cols-2",children:[e.jsx(L,{value:"articles",children:"Latest News"}),e.jsx(L,{value:"sources",children:"News Sources"})]}),e.jsxs(D,{value:"articles",className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-sm border border-gray-200 dark:border-slate-700 p-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),e.jsx(Z,{placeholder:"Search articles...",value:o,onChange:s=>P(s.target.value),className:"pl-10"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Category"}),e.jsxs(p,{value:m,onValueChange:F,children:[e.jsx(N,{children:e.jsx(b,{placeholder:"All Categories"})}),e.jsxs(f,{children:[e.jsx(i,{value:"all",children:"All Categories"}),G.map(s=>e.jsx(i,{value:s,children:s},s))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Region"}),e.jsxs(p,{value:x,onValueChange:I,children:[e.jsx(N,{children:e.jsx(b,{placeholder:"All Regions"})}),e.jsxs(f,{children:[e.jsx(i,{value:"all",children:"All Regions"}),$.map(s=>e.jsx(i,{value:s,children:s},s))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Source"}),e.jsxs(p,{value:h,onValueChange:V,children:[e.jsx(N,{children:e.jsx(b,{placeholder:"All Sources"})}),e.jsxs(f,{children:[e.jsx(i,{value:"all",children:"All Sources"}),q.map(s=>e.jsx(i,{value:s,children:s},s))]})]})]})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsxs(t,{variant:"outline",className:"text-xs",children:[g.length," articles found"]}),e.jsxs(t,{variant:"outline",className:"text-xs",children:["Updated ",k(new Date().toISOString())]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:g.map(s=>e.jsxs(T,{className:"cursor-pointer hover:shadow-lg transition-shadow",children:[e.jsx(A,{className:"pb-4",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex-1",children:[e.jsx(R,{className:"text-lg leading-tight hover:text-blue-600 transition-colors",onClick:()=>c(s),children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(t,{className:j(s.bias),children:s.bias}),e.jsx(t,{variant:"outline",className:"text-xs",children:s.category}),s.verified&&e.jsx(M,{className:"w-4 h-4 text-green-600"})]})]})})}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300 line-clamp-3",children:s.summary}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"w-3 h-3"}),s.source]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-3 h-3"}),k(s.publishedAt)]})]}),e.jsxs("div",{className:`flex items-center gap-1 ${u(s.credibility)}`,children:[e.jsx(_,{className:"w-3 h-3"}),s.credibility,"%"]})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsx(n,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>c(s),children:"Read More"}),e.jsx(n,{size:"sm",variant:"outline",className:"px-3",onClick:()=>window.open(s.url,"_blank"),children:e.jsx(v,{className:"w-4 h-4"})})]})]})})]},s.id))}),g.length===0&&!C&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(w,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No articles found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Try adjusting your search criteria or filters."})]})]}),e.jsx(D,{value:"sources",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:H.map(s=>e.jsxs(T,{children:[e.jsxs(A,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(R,{className:"text-lg",children:s.name}),s.verified&&e.jsx(M,{className:"w-5 h-5 text-green-600"})]}),e.jsx(J,{children:s.type})]}),e.jsx(E,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Credibility:"}),e.jsxs("span",{className:`font-medium ${u(s.credibility)}`,children:[s.credibility,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Bias:"}),e.jsx(t,{className:j(s.bias),children:s.bias})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Region:"}),e.jsx("span",{className:"text-sm font-medium",children:s.region})]}),e.jsxs(n,{variant:"outline",size:"sm",className:"w-full",onClick:()=>window.open(s.url,"_blank"),children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Visit Source"]})]})})]},s.id))})})]}),e.jsx(U,{open:!!a,onOpenChange:()=>c(null),children:e.jsx(K,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:a&&e.jsxs(e.Fragment,{children:[e.jsx(W,{children:e.jsx(X,{className:"text-xl",children:a.title})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(w,{className:"w-4 h-4"}),a.source]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ae,{className:"w-4 h-4"}),new Date(a.publishedAt).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B,{className:"w-4 h-4"}),a.readTime," min read"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(t,{className:j(a.bias),children:a.bias}),e.jsx(t,{variant:"outline",children:a.category}),e.jsxs(t,{variant:"outline",className:u(a.credibility),children:[a.credibility,"% Credible"]})]}),e.jsx("div",{className:"prose max-w-none",children:e.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300",children:a.summary})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(n,{onClick:()=>window.open(a.url,"_blank"),children:[e.jsx(v,{className:"w-4 h-4 mr-2"}),"Read Full Article"]}),e.jsx(n,{variant:"outline",onClick:()=>c(null),children:"Close"})]})]})]})})})]})})}export{ge as default};
