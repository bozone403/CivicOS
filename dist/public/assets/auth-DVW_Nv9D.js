import{j as e}from"./ui-B-8yHimL.js";import{r as u}from"./vendor-DRd396Ms.js";import{u as k,p as q,q as F,r as j,g as R,h as O,i as D,S as I,j as B,L as l,s as w,I as n,B as N,t as M,v,w as b}from"./index-BTNm65el.js";import{A as y,a as C}from"./alert-CmMYYM-F.js";import{T as K,a as J,b as P,c as S}from"./tabs-Cg8JGgNh.js";import{c as Q}from"./ChatGPT Image Jun 20_ 2025_ 06_03_54 PM_1750464244456-B2khg7hp.js";import{L as A}from"./lock-C4FvDdZT.js";function _(){const[h,c]=k(),[o,g]=u.useState({email:"",password:""}),[t,d]=u.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:""}),[x,r]=u.useState({login:"",register:""}),{toast:p}=q(),{isAuthenticated:f}=F(),[U,W]=u.useState(null);u.useEffect(()=>{f&&(h==="/auth"||h==="/login"?c("/dashboard"):h==="/register"&&c("/profile"))},[f,h,c]);const m=j({mutationFn:async a=>{const s=await b("/api/auth/login","POST",a);return s.token&&localStorage.setItem("civicos-jwt",s.token),s},onSuccess:()=>{v.invalidateQueries({queryKey:["/api/auth/user"]}),p({title:"Welcome to CivicOS",description:"You have successfully logged in"}),c("/dashboard")},onError:a=>{r(s=>({...s,login:a.message||"Invalid email or password"}))}}),i=j({mutationFn:async a=>b("/api/auth/register","POST",a),onSuccess:()=>{v.invalidateQueries({queryKey:["/api/auth/user"]}),p({title:"Welcome to CivicOS",description:"Your account has been created successfully"}),c("/profile?welcome=1")},onError:a=>{let s=a.message||"Registration failed";(a.status===409||a.message&&a.message.toLowerCase().includes("409"))&&(s="Email already registered. Please use a different email or log in."),r(T=>({...T,register:s}))}}),E=a=>{if(a.preventDefault(),r(s=>({...s,login:""})),!o.email||!o.password){r(s=>({...s,login:"Please enter both email and password"}));return}m.mutate(o)},L=a=>{if(a.preventDefault(),r(s=>({...s,register:""})),!t.email||!t.password||!t.firstName){r(s=>({...s,register:"Please fill in all required fields"}));return}if(t.password!==t.confirmPassword){r(s=>({...s,register:"Passwords do not match"}));return}if(t.password.length<8){r(s=>({...s,register:"Password must be at least 8 characters long"}));return}i.mutate({email:t.email,password:t.password,firstName:t.firstName,lastName:t.lastName})};return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-4 sm:p-6",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[e.jsx("div",{className:"flex justify-center mb-3 sm:mb-4",children:e.jsx("div",{className:"w-14 h-14 sm:w-16 sm:h-16 rounded-full bg-gradient-to-br from-slate-800 via-slate-700 to-slate-900 flex items-center justify-center shadow-2xl border border-slate-600 overflow-hidden",children:e.jsx("img",{src:Q,alt:"CivicOS",className:"w-12 h-12 sm:w-14 sm:h-14 object-cover rounded-full filter brightness-125 contrast-125"})})}),e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold font-serif text-slate-900 dark:text-slate-100",children:"CivicOS"}),e.jsx("p",{className:"text-sm sm:text-base text-slate-600 dark:text-slate-400 font-medium tracking-wider",children:"SECURE ACCESS PORTAL"})]}),e.jsxs(R,{className:"shadow-2xl border-slate-200 dark:border-slate-700",children:[e.jsxs(O,{className:"space-y-1",children:[e.jsxs(D,{className:"text-2xl text-center flex items-center justify-center space-x-2",children:[e.jsx(I,{className:"w-5 h-5"}),e.jsx("span",{children:"Authentication"})]}),e.jsx("p",{className:"text-center text-muted-foreground",children:"Access the Canadian political intelligence platform"})]}),e.jsx(B,{children:e.jsxs(K,{defaultValue:"login",className:"w-full",children:[e.jsxs(J,{className:"grid w-full grid-cols-2",children:[e.jsx(P,{value:"login",children:"Sign In"}),e.jsx(P,{value:"register",children:"Create Account"})]}),e.jsx(S,{value:"login",className:"space-y-4 mt-6",children:e.jsxs("form",{onSubmit:E,className:"space-y-4",children:[x.login&&e.jsx(y,{variant:"destructive",children:e.jsx(C,{children:x.login})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"login-email",className:"flex items-center space-x-2 text-sm sm:text-base",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:"Email Address"})]}),e.jsx(n,{id:"login-email",type:"email",placeholder:"your.email@example.com",value:o.email,onChange:a=>g(s=>({...s,email:a.target.value})),className:"h-10 sm:h-11 text-sm sm:text-base",disabled:m.isPending,autoComplete:"username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"login-password",className:"flex items-center space-x-2 text-sm sm:text-base",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:"Password"})]}),e.jsx(n,{id:"login-password",type:"password",placeholder:"Enter your password",value:o.password,onChange:a=>g(s=>({...s,password:a.target.value})),className:"h-10 sm:h-11 text-sm sm:text-base",disabled:m.isPending,autoComplete:"current-password"})]}),e.jsx(N,{type:"submit",className:"w-full h-10 sm:h-11 bg-slate-800 hover:bg-slate-700 text-white text-sm sm:text-base",disabled:m.isPending,children:m.isPending?"Authenticating...":"Secure Login"})]})}),e.jsx(S,{value:"register",className:"space-y-4 mt-6",children:e.jsxs("form",{onSubmit:L,className:"space-y-4",children:[x.register&&e.jsx(y,{variant:"destructive",children:e.jsx(C,{children:x.register})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"register-firstName",className:"flex items-center space-x-2 text-sm sm:text-base",children:[e.jsx(M,{className:"w-4 h-4"}),e.jsx("span",{children:"First Name"})]}),e.jsx(n,{id:"register-firstName",type:"text",placeholder:"Jordan",value:t.firstName,onChange:a=>d(s=>({...s,firstName:a.target.value})),className:"h-10 sm:h-11 text-sm sm:text-base",disabled:i.isPending,required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"register-lastName",className:"text-sm sm:text-base",children:"Last Name"}),e.jsx(n,{id:"register-lastName",type:"text",placeholder:"Smith",value:t.lastName,onChange:a=>d(s=>({...s,lastName:a.target.value})),className:"h-10 sm:h-11 text-sm sm:text-base",disabled:i.isPending})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"register-email",className:"flex items-center space-x-2",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:"Email Address"})]}),e.jsx(n,{id:"register-email",type:"email",placeholder:"your.email@example.com",value:t.email,onChange:a=>d(s=>({...s,email:a.target.value})),className:"h-11",disabled:i.isPending,required:!0,autoComplete:"username"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(l,{htmlFor:"register-password",className:"flex items-center space-x-2",children:[e.jsx(A,{className:"w-4 h-4"}),e.jsx("span",{children:"Password"})]}),e.jsx(n,{id:"register-password",type:"password",placeholder:"Create a secure password",value:t.password,onChange:a=>d(s=>({...s,password:a.target.value})),className:"h-11",disabled:i.isPending,required:!0,autoComplete:"new-password"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"register-confirmPassword",children:"Confirm Password"}),e.jsx(n,{id:"register-confirmPassword",type:"password",placeholder:"Confirm your password",value:t.confirmPassword,onChange:a=>d(s=>({...s,confirmPassword:a.target.value})),className:"h-11",disabled:i.isPending,required:!0,autoComplete:"new-password"})]}),e.jsx(N,{type:"submit",className:"w-full h-11 bg-slate-800 hover:bg-slate-700 text-white",disabled:i.isPending,children:i.isPending?"Creating Account...":"Create Account"})]})})]})})]}),e.jsxs("div",{className:"text-center mt-6 sm:mt-8 text-xs text-slate-500 dark:text-slate-400",children:[e.jsx("p",{children:"Built by Jordan Kenneth Boisclair"}),e.jsx("p",{children:"© 2025 CivicOS™ - All rights reserved"})]})]})})}export{_ as default};
