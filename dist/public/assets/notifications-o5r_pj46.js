import{r as O,G as U,q as y,O as b,s as l,j as e,w as d,B as c,al as V,D as _,a0 as w,aq as A,a as P,b as q,c as F,d as T,p as M,g as N,k as f,a3 as R,J as z,z as u}from"./index-buf9avXS.js";import{r as D}from"./vendor-BzpAWY_6.js";import{S as a}from"./switch-D3v3J7sV.js";import"./ui-7zmNL429.js";import"./index-CRhdpMXa.js";function H(){const[r,j]=D.useState("all"),[g,k]=D.useState(!1),{user:B,isAuthenticated:K}=O(),m=U(),{toast:t}=y(),{data:o=[]}=b({queryKey:["/api/notifications"],enabled:!0}),{data:s}=b({queryKey:["/api/notifications/preferences"],enabled:!0}),C=l({mutationFn:async i=>{try{await u(`/api/notifications/${i}`,"DELETE")}catch{}return i},onSuccess:()=>{m.invalidateQueries({queryKey:["/api/notifications"]}),t({title:"Notification deleted",description:"The notification has been removed."})},onError:()=>{t({title:"Error",description:"Failed to delete notification.",variant:"destructive"})}}),p=l({mutationFn:async()=>{try{await u("/api/notifications","DELETE")}catch{}return!0},onSuccess:()=>{t({title:"All notifications cleared",description:"All notifications have been removed."})},onError:()=>{t({title:"Error",description:"Failed to clear notifications.",variant:"destructive"})}}),E=l({mutationFn:async i=>{try{await u(`/api/notifications/${i}/read`,"POST")}catch{}return i},onSuccess:()=>{m.invalidateQueries({queryKey:["/api/notifications"]})}}),n=l({mutationFn:i=>u("/api/notifications/preferences","PUT",i),onSuccess:()=>{m.invalidateQueries({queryKey:["/api/notifications/preferences"]}),t({title:"Preferences updated",description:"Your notification preferences have been saved."})},onError:()=>{t({title:"Error",description:"Failed to update preferences.",variant:"destructive"})}}),x=o,v=x.filter(i=>r==="bill"?i.type==="bill":r==="petition"?i.type==="petition":r==="foi"?i.type==="foi":r==="system"?i.type==="system":!0),h=x.filter(i=>!i.read).length;return e.jsxDEV("div",{className:"space-y-8",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold tracking-tight",children:"Notifications"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:209,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Stay updated on civic activities and government changes"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:210,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:208,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center space-x-4",children:[e.jsxDEV(d,{variant:"outline",className:"text-sm",children:[h," unread"]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:215,columnNumber:11},this),e.jsxDEV(c,{variant:"outline",size:"sm",onClick:()=>p.mutate(),disabled:p.isPending||o.length===0,children:[e.jsxDEV(V,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:224,columnNumber:13},this),"Clear All"]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:218,columnNumber:11},this),e.jsxDEV(_,{open:g,onOpenChange:k,children:[e.jsxDEV(w,{asChild:!0,children:e.jsxDEV(c,{variant:"outline",size:"sm",children:[e.jsxDEV(A,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:230,columnNumber:17},this),"Preferences"]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:229,columnNumber:15},this)},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:228,columnNumber:13},this),e.jsxDEV(P,{className:"max-w-md",children:[e.jsxDEV(q,{children:[e.jsxDEV(F,{children:"Notification Preferences"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:236,columnNumber:17},this),e.jsxDEV(T,{children:"Manage which notifications you receive from CivicOS."},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:237,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:235,columnNumber:15},this),e.jsxDEV("div",{className:"space-y-4",children:[e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Petition Alerts"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:242,columnNumber:21},this),e.jsxDEV(a,{checked:(s==null?void 0:s.petitionAlerts)??!0,onCheckedChange:i=>n.mutate({petitionAlerts:i})},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:243,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:241,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Bill Updates"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:251,columnNumber:21},this),e.jsxDEV(a,{checked:(s==null?void 0:s.billUpdates)??!0,onCheckedChange:i=>n.mutate({billUpdates:i})},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:252,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:250,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"FOI Responses"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:260,columnNumber:21},this),e.jsxDEV(a,{checked:(s==null?void 0:s.foiResponses)??!0,onCheckedChange:i=>n.mutate({foiResponses:i})},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:261,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:259,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"System News"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:269,columnNumber:21},this),e.jsxDEV(a,{checked:(s==null?void 0:s.systemNews)??!0,onCheckedChange:i=>n.mutate({systemNews:i})},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:270,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:268,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:240,columnNumber:17},this),e.jsxDEV(M,{},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:278,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Email Notifications"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:281,columnNumber:21},this),e.jsxDEV(a,{checked:(s==null?void 0:s.emailNotifications)??!0,onCheckedChange:i=>n.mutate({emailNotifications:i})},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:282,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:280,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("span",{children:"Push Notifications"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:290,columnNumber:21},this),e.jsxDEV(a,{checked:(s==null?void 0:s.pushNotifications)??!0,onCheckedChange:i=>n.mutate({pushNotifications:i})},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:291,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:289,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:279,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:239,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:234,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:227,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:214,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:207,columnNumber:7},this),e.jsxDEV(N,{children:e.jsxDEV(f,{className:"p-6",children:e.jsxDEV("div",{className:"flex space-x-2",children:[{key:"all",label:"All",count:o.length},{key:"unread",label:"Unread",count:h},{key:"bills",label:"Bills",count:o.filter(i=>i.type==="bill").length},{key:"petitions",label:"Petitions",count:o.filter(i=>i.type==="petition").length}].map(i=>e.jsxDEV(c,{variant:r===i.key?"default":"ghost",size:"sm",onClick:()=>j(i.key),className:"space-x-2",children:[e.jsxDEV("span",{children:i.label},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:322,columnNumber:17},this),e.jsxDEV(d,{variant:"secondary",className:"text-xs",children:i.count},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:323,columnNumber:17},this)]},i.key,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:315,columnNumber:15},this))},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:308,columnNumber:11},this)},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:307,columnNumber:9},this)},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:306,columnNumber:7},this),e.jsxDEV("div",{className:"space-y-4",children:v.length===0?e.jsxDEV(N,{children:e.jsxDEV(f,{className:"flex flex-col items-center justify-center py-12",children:[e.jsxDEV(R,{className:"w-12 h-12 text-muted-foreground mb-4"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:337,columnNumber:15},this),e.jsxDEV("h3",{className:"text-lg font-medium mb-2",children:"No notifications"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:338,columnNumber:15},this),e.jsxDEV("p",{className:"text-muted-foreground text-center",children:"You're all caught up! Check back later for updates on civic activities."},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:339,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:336,columnNumber:13},this)},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:335,columnNumber:11},this):v.map(i=>e.jsxDEV(N,{className:z("border",i.read?"border-gray-200":"border-blue-400"),children:e.jsxDEV(f,{className:"flex flex-col gap-2 p-4",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(d,{variant:i.read?"secondary":"default",className:i.read?"bg-gray-200 text-gray-500":"bg-blue-600 text-white",children:i.type},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:350,columnNumber:21},this),e.jsxDEV("span",{className:"font-semibold text-sm",children:i.title},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:353,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:349,columnNumber:19},this),!i.read&&e.jsxDEV(c,{size:"sm",variant:"outline",className:"text-xs px-2 py-1 ml-2",onClick:()=>E.mutate(i.id),children:"Mark as Read"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:356,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:348,columnNumber:17},this),e.jsxDEV("div",{className:"text-xs text-gray-600",children:i.message},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:366,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center justify-between mt-2",children:[e.jsxDEV("span",{className:"text-xs text-gray-400",children:new Date(i.timestamp).toLocaleString()},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:368,columnNumber:19},this),e.jsxDEV(c,{size:"sm",variant:"ghost",className:"text-xs text-red-600 hover:bg-red-50",onClick:()=>C.mutate(i.id),children:"Delete"},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:369,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:367,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:347,columnNumber:15},this)},i.id,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:346,columnNumber:13},this))},void 0,!1,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:333,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/jordan/Desktop/CivicOsSuite_3/client/src/pages/notifications.tsx",lineNumber:205,columnNumber:5},this)}export{H as default};
